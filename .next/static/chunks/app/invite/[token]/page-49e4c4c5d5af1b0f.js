(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[956],{63:(e,t,n)=>{"use strict";var r=n(7260);n.o(r,"useParams")&&n.d(t,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSelectedLayoutSegments")&&n.d(t,{useSelectedLayoutSegments:function(){return r.useSelectedLayoutSegments}})},633:(e,t,n)=>{"use strict";n.d(t,{T5:()=>s.T5,hP:()=>r.hP,nO:()=>s.nO,yC:()=>a}),n(9176);var r=n(8381),s=n(4752);function a(e,t,n){let s=t.path||(null==n?void 0:n.path);return"path"===(t.routing||(null==n?void 0:n.routing)||"path")?s?{...n,...t,routing:"path"}:r.sb.throw((0,r.kd)(e)):t.path?r.sb.throw((0,r.s7)(e)):{...n,...t,path:void 0}}},3051:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(5155),s=n(2115),a=n(63),i=n(7471),o=n(2454),l=n(4652),u=n.n(l);function c(e){let{params:t}=e,[n,l]=(0,s.useState)("");(0,s.useEffect)(()=>{t.then(e=>l(e.token))},[t]);let c=(0,a.useRouter)(),{isSignedIn:d,userId:m}=(0,i.d)(),{user:h}=(0,o.Jd)(),[p,f]=(0,s.useState)(!0),[x,g]=(0,s.useState)(null),[v,j]=(0,s.useState)(""),[b,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{n&&(d&&m?N():w())},[d,m,n]);let w=async()=>{try{f(!1)}catch(e){j("Failed to load invitation details"),f(!1)}},N=async()=>{y(!0);try{let e=await fetch("/api/workspaces/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invite_token:n})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to join workspace");if(t.success)c.push("/");else throw Error(t.error||"Failed to join workspace")}catch(e){console.error("Error joining workspace:",e),j(e instanceof Error?e.message:"Failed to join workspace")}finally{y(!1)}};return p?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-white text-xl",children:"Loading invitation..."})}):v?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-red-400 text-xl mb-4",children:"⚠️ Invitation Error"}),(0,r.jsx)("div",{className:"text-gray-300 mb-8",children:v}),(0,r.jsx)("button",{onClick:()=>c.push("/"),className:"bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-6 rounded-lg",children:"Go to SAM AI"})]})}):d?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(u(),{src:"/SAM.jpg",alt:"SAM AI",width:100,height:100,className:"rounded-full mx-auto mb-6 object-cover",style:{objectPosition:"center 30%"}}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:b?"Joining Workspace...":"Welcome!"}),(0,r.jsx)("p",{className:"text-gray-400 mb-8",children:b?"Please wait while we add you to the workspace.":"Hi ".concat((null==h?void 0:h.firstName)||(null==h?void 0:h.username),", you're being added to the workspace.")}),b&&(0,r.jsxs)("div",{className:"flex justify-center space-x-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,r.jsx)("div",{className:"w-2 h-2 bg-purple-600 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,r.jsx)("div",{className:"max-w-md w-full mx-4",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(u(),{src:"/SAM.jpg",alt:"SAM AI",width:100,height:100,className:"rounded-full mx-auto mb-6 object-cover",style:{objectPosition:"center 30%"}}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"You're Invited!"}),(0,r.jsx)("p",{className:"text-gray-400 mb-8",children:"You've been invited to join a SAM AI workspace. Sign in to accept the invitation and start collaborating."}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("button",{onClick:()=>{c.push("/sign-in?redirect_url=".concat(encodeURIComponent("/invite/".concat(n))))},className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:"Sign In to Accept Invitation"}),(0,r.jsxs)("div",{className:"text-center text-sm text-gray-400",children:["Don't have an account?"," ",(0,r.jsx)("button",{onClick:()=>c.push("/sign-up?redirect_url=".concat(encodeURIComponent("/invite/".concat(n)))),className:"text-purple-400 hover:text-purple-300",children:"Sign up here"})]})]})]})})})}},4637:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useRouter",{enumerable:!0,get:function(){return a}});let r=n(2115),s=n(9862);function a(){return(0,r.useContext)(s.RouterContext)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4652:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return l},getImageProps:function(){return o}});let r=n(8140),s=n(5040),a=n(1356),i=r._(n(1124));function o(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}}let l=a.Image},5187:(e,t,n)=>{Promise.resolve().then(n.bind(n,3051))},7471:(e,t,n)=>{"use strict";n.d(t,{PromisifiedAuthProvider:()=>l,d:()=>u});var r=n(2454),s=n(633),a=n(9268),i=n(2115);let o=i.createContext(null);function l(e){let{authPromise:t,children:n}=e;return i.createElement(o.Provider,{value:t},n)}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.useRouter)(),n=i.useContext(o),l=n;return(n&&"then"in n&&(l=i.use(n)),"undefined"!=typeof window)?(0,r.As)({...l,...e}):t?(0,r.As)(e):(0,s.hP)({...l,...e})}},9268:(e,t,n)=>{e.exports=n(4637)},9862:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return r}});let r=n(8140)._(n(2115)).default.createContext(null)}},e=>{e.O(0,[454,356,441,255,358],()=>e(e.s=5187)),_N_E=e.O()}]);