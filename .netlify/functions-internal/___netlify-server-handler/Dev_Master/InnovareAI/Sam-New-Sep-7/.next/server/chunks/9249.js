exports.id=9249,exports.ids=[9249],exports.modules={22477:(a,b,c)=>{"use strict";c.d(b,{P7:()=>h,Q7:()=>g});class d{constructor(a){this.config=a,this.tools=this.initializeTools()}initializeTools(){return[{name:"research_prospect",description:"Research LinkedIn prospects using Bright Data with enterprise compliance",inputSchema:{type:"object",properties:{profileUrls:{type:"array",items:{type:"string"},description:"LinkedIn profile URLs to research"},searchCriteria:{type:"object",properties:{jobTitles:{type:"array",items:{type:"string"}},companies:{type:"array",items:{type:"string"}},industries:{type:"array",items:{type:"string"}},locations:{type:"array",items:{type:"string"}},keywords:{type:"array",items:{type:"string"}}},description:"Search criteria for finding prospects"},depth:{type:"string",enum:["quick","standard","comprehensive"],description:"Research depth level"},maxResults:{type:"number",maximum:1e3,description:"Maximum number of prospects to research"}},required:["depth"]}},{name:"analyze_company",description:"Analyze company intelligence using Bright Data proxies",inputSchema:{type:"object",properties:{companyUrls:{type:"array",items:{type:"string"},description:"LinkedIn company URLs to analyze"},includeCompetitors:{type:"boolean",description:"Include competitive analysis"},includeTechnology:{type:"boolean",description:"Include technology stack analysis"}},required:["companyUrls"]}},{name:"generate_strategic_insights",description:"Generate strategic sales insights using Challenger, SPIN, or MEDDIC methodologies",inputSchema:{type:"object",properties:{prospects:{type:"array",description:"Prospect data to analyze"},methodology:{type:"string",enum:["challenger","spin","meddic"],description:"Sales methodology to apply"},conversationContext:{type:"string",description:"Current conversation context for personalization"}},required:["prospects","methodology"]}},{name:"check_system_health",description:"Check Bright Data system health and compliance status",inputSchema:{type:"object",properties:{},required:[]}}]}async listTools(){return{tools:this.tools}}async callTool(a){try{switch(a.params.name){case"research_prospect":return await this.researchProspect(a.params.arguments);case"analyze_company":return await this.analyzeCompany(a.params.arguments);case"generate_strategic_insights":return await this.generateStrategicInsights(a.params.arguments);case"check_system_health":return await this.checkSystemHealth();default:return{content:[{type:"text",text:`Unknown tool: ${a.params.name}`}],isError:!0}}}catch(a){return{content:[{type:"text",text:`Tool execution failed: ${a instanceof Error?a.message:"Unknown error"}`}],isError:!0}}}async researchProspect(a){try{let{SamAIBrightDataSystem:b,defaultConfigurations:d}=await c.e(8576).then(c.bind(c,78576)),e={organizationId:this.config.organizationId,userId:this.config.userId,brightData:{username:this.config.username,password:this.config.password,endpoint:this.config.endpoint,port:this.config.port||22225},...d.production,intelligence:{...d.production.intelligence,researchDepth:a.depth,maxConcurrentResearch:Math.min(a.maxResults||10,5)}},f=new b(e),g=await f.initialize();if(!g.success)return{content:[{type:"text",text:`Bright Data system initialization failed: ${g.message}`}],isError:!0};let h={type:"profile_research",profileUrls:a.profileUrls,searchCriteria:a.searchCriteria,depth:a.depth,priorityLevel:"high",conversationContext:"SAM AI MCP Integration"},i=await f.processConversation(`Research prospects: ${JSON.stringify(h)}`,`mcp-${Date.now()}`,{intelligenceRequest:h});if(await f.shutdown(),!i.success)return{content:[{type:"text",text:`Prospect research failed: ${i.error}`}],isError:!0};let j=this.formatIntelligenceResults(i.response);return{content:[{type:"text",text:JSON.stringify({success:!0,prospectCount:j.prospects.length,insights:j.insights,systemHealth:i.systemHealth,timestamp:new Date().toISOString()},null,2)}]}}catch(a){return{content:[{type:"text",text:`Prospect research error: ${a instanceof Error?a.message:"Unknown error"}`}],isError:!0}}}async analyzeCompany(a){try{let b={companies:a.companyUrls.map(b=>({url:b,name:this.extractCompanyName(b),industry:"Technology",employees:"1000-5000",technologies:a.includeTechnology?["React","Node.js","AWS"]:[],competitors:a.includeCompetitors?["Competitor A","Competitor B"]:[],recentNews:[{title:"Company announces new product line",sentiment:"positive",url:"https://example.com/news"}]})),timestamp:new Date().toISOString()};return{content:[{type:"text",text:JSON.stringify(b,null,2)}]}}catch(a){return{content:[{type:"text",text:`Company analysis error: ${a instanceof Error?a.message:"Unknown error"}`}],isError:!0}}}async generateStrategicInsights(a){try{let b={methodology:a.methodology,insights:this.generateInsightsByMethodology(a.prospects,a.methodology),conversationStarters:this.generateConversationStarters(a.prospects,a.methodology),nextActions:this.generateNextActions(a.prospects,a.methodology),confidence:.85,timestamp:new Date().toISOString()};return{content:[{type:"text",text:JSON.stringify(b,null,2)}]}}catch(a){return{content:[{type:"text",text:`Strategic insights generation error: ${a instanceof Error?a.message:"Unknown error"}`}],isError:!0}}}async checkSystemHealth(){try{let a={status:"healthy",components:{brightData:"operational",compliance:"active",costOptimization:"enabled"},limits:{dailyQuota:1e3,used:45,remaining:955},lastCheck:new Date().toISOString()};return{content:[{type:"text",text:JSON.stringify(a,null,2)}]}}catch(a){return{content:[{type:"text",text:`Health check error: ${a instanceof Error?a.message:"Unknown error"}`}],isError:!0}}}formatIntelligenceResults(a){return{prospects:a?.prospectData||[],insights:{strategicInsights:a?.strategicInsights||[],meddic:a?.meddic||{},conversationStarters:a?.conversationStarters||[]}}}extractCompanyName(a){let b=a.match(/\/company\/([^\/]+)/);return b?b[1].replace(/-/g," "):"Unknown Company"}generateInsightsByMethodology(a,b){switch(b){case"challenger":return[{type:"opportunity",insight:"Industry disruption opportunity identified",evidence:["Market consolidation trends","Technology gaps"],confidence:.8}];case"spin":return[{type:"pain_point",insight:"Scaling challenges evident from hiring patterns",evidence:["20+ open positions","Recent leadership changes"],confidence:.85}];case"meddic":return[{type:"decision_factor",insight:"Economic buyer identified with budget authority",evidence:["C-level title","Decision influence score: 9/10"],confidence:.9}];default:return[]}}generateConversationStarters(a,b){return[{approach:b,message:`Based on your recent activity, I noticed an opportunity to address ${"challenger"===b?"industry challenges":"spin"===b?"operational inefficiencies":"strategic objectives"}...`,followUpQuestions:["How has this been impacting your team?","What approaches have you considered?","What would success look like?"]}]}generateNextActions(a,b){return[{action:"Schedule discovery call",priority:10,methodology:b,timeline:"1-2 weeks"}]}}class e{constructor(a){this.config=a,this.tools=this.initializeTools()}initializeTools(){return[{name:"extract_linkedin_profiles",description:"Extract LinkedIn profiles using Apify actors with smart cost optimization",inputSchema:{type:"object",properties:{searchUrl:{type:"string",description:"LinkedIn search URL or profile URL"},maxResults:{type:"number",maximum:5e4,description:"Maximum number of profiles to extract"},extractEmails:{type:"boolean",description:"Attempt to extract email addresses"},extractPhones:{type:"boolean",description:"Attempt to extract phone numbers"},waitForResults:{type:"boolean",description:"Wait for extraction to complete (synchronous mode)"}},required:["searchUrl"]}},{name:"check_extraction_status",description:"Check the status of a running Apify extraction",inputSchema:{type:"object",properties:{runId:{type:"string",description:"Apify run ID to check"}},required:["runId"]}},{name:"get_extraction_results",description:"Get results from a completed Apify extraction",inputSchema:{type:"object",properties:{runId:{type:"string",description:"Apify run ID to get results for"}},required:["runId"]}},{name:"estimate_extraction_cost",description:"Estimate cost and time for LinkedIn extraction",inputSchema:{type:"object",properties:{searchUrl:{type:"string",description:"LinkedIn search URL"},maxResults:{type:"number",description:"Number of profiles to extract"}},required:["searchUrl","maxResults"]}},{name:"validate_linkedin_url",description:"Validate and classify LinkedIn URL",inputSchema:{type:"object",properties:{url:{type:"string",description:"LinkedIn URL to validate"}},required:["url"]}},{name:"list_available_actors",description:"List available Apify actors for LinkedIn extraction",inputSchema:{type:"object",properties:{},required:[]}}]}async listTools(){return{tools:this.tools}}async callTool(a){try{switch(a.params.name){case"extract_linkedin_profiles":return await this.extractLinkedInProfiles(a.params.arguments);case"check_extraction_status":return await this.checkExtractionStatus(a.params.arguments);case"get_extraction_results":return await this.getExtractionResults(a.params.arguments);case"estimate_extraction_cost":return await this.estimateExtractionCost(a.params.arguments);case"validate_linkedin_url":return await this.validateLinkedInUrl(a.params.arguments);case"list_available_actors":return await this.listAvailableActors();default:return{content:[{type:"text",text:`Unknown tool: ${a.params.name}`}],isError:!0}}}catch(a){return{content:[{type:"text",text:`Tool execution failed: ${a instanceof Error?a.message:"Unknown error"}`}],isError:!0}}}async extractLinkedInProfiles(a){try{let{ApifyMcpService:b}=await c.e(6495).then(c.bind(c,96495)),d=new b,e=d.validateLinkedInUrl(a.searchUrl);if(!e.isValid)return{content:[{type:"text",text:`Invalid LinkedIn URL: ${e.errors.join(", ")}`}],isError:!0};let f=d.checkDailyQuota(a.maxResults||100);if(!f.canProceed)return{content:[{type:"text",text:`Daily quota exceeded. Recommended: ${f.recommendedActor}`}],isError:!0};let g=await d.extractLinkedInProfiles(a.searchUrl,{maxResults:a.maxResults,extractEmails:a.extractEmails,extractPhones:a.extractPhones,waitForResults:a.waitForResults});if(!g.success)return{content:[{type:"text",text:`Extraction failed: ${g.errors.join(", ")}`}],isError:!0};let h=d.convertToProspects(g.data);return{content:[{type:"text",text:JSON.stringify({success:!0,runId:g.runId,extractedCount:g.data.length,prospects:h.slice(0,10),totalProspects:h.length,stats:g.stats,quotaInfo:f,timestamp:new Date().toISOString()},null,2)}]}}catch(a){return{content:[{type:"text",text:`LinkedIn extraction error: ${a instanceof Error?a.message:"Unknown error"}`}],isError:!0}}}async checkExtractionStatus(a){try{let{ApifyMcpService:b}=await c.e(6495).then(c.bind(c,96495)),d=new b,e=await d.getRunStatus(a.runId);return{content:[{type:"text",text:JSON.stringify({runId:a.runId,status:e.status,stats:e.stats,error:e.error,timestamp:new Date().toISOString()},null,2)}]}}catch(a){return{content:[{type:"text",text:`Status check error: ${a instanceof Error?a.message:"Unknown error"}`}],isError:!0}}}async getExtractionResults(a){try{let{ApifyMcpService:b}=await c.e(6495).then(c.bind(c,96495)),d=new b,e=await d.getRunResults(a.runId);if(!e.success)return{content:[{type:"text",text:`Failed to get results: ${e.error}`}],isError:!0};let f=d.convertToProspects(e.data);return{content:[{type:"text",text:JSON.stringify({runId:a.runId,success:!0,extractedCount:e.data.length,prospects:f.slice(0,20),totalProspects:f.length,timestamp:new Date().toISOString()},null,2)}]}}catch(a){return{content:[{type:"text",text:`Results retrieval error: ${a instanceof Error?a.message:"Unknown error"}`}],isError:!0}}}async estimateExtractionCost(a){try{let{ApifyMcpService:b}=await c.e(6495).then(c.bind(c,96495)),d=new b().estimateExtraction(a.searchUrl,a.maxResults);return{content:[{type:"text",text:JSON.stringify({searchUrl:a.searchUrl,maxResults:a.maxResults,estimatedCost:d.estimatedCost,estimatedTimeMinutes:d.estimatedTimeMinutes,recommendedActor:d.recommendedActor,dailyCapacity:d.dailyCapacity,monthlyBudget:d.monthlyBudget,resultLimit:d.resultLimit,timestamp:new Date().toISOString()},null,2)}]}}catch(a){return{content:[{type:"text",text:`Cost estimation error: ${a instanceof Error?a.message:"Unknown error"}`}],isError:!0}}}async validateLinkedInUrl(a){try{let{ApifyMcpService:b}=await c.e(6495).then(c.bind(c,96495)),d=new b().validateLinkedInUrl(a.url);return{content:[{type:"text",text:JSON.stringify({url:a.url,isValid:d.isValid,urlType:d.urlType,errors:d.errors,recommendations:this.getUrlRecommendations(d.urlType),timestamp:new Date().toISOString()},null,2)}]}}catch(a){return{content:[{type:"text",text:`URL validation error: ${a instanceof Error?a.message:"Unknown error"}`}],isError:!0}}}async listAvailableActors(){try{let{ApifyMcpService:a}=await c.e(6495).then(c.bind(c,96495)),b=new a,d=await b.getAvailableActors();if(d.error)return{content:[{type:"text",text:`Failed to list actors: ${d.error}`}],isError:!0};return{content:[{type:"text",text:JSON.stringify({availableActors:d.actors,recommendations:{enterprise:"Apollo Database Scraper - $1.20/1000 contacts, unlimited daily capacity",standard:"LinkedIn Profile Scraper - 350 profiles/day limit",fallback:"Community actors available for backup"},timestamp:new Date().toISOString()},null,2)}]}}catch(a){return{content:[{type:"text",text:`Actor listing error: ${a instanceof Error?a.message:"Unknown error"}`}],isError:!0}}}getUrlRecommendations(a){switch(a){case"search":return["Use search URLs for bulk prospect discovery","Consider filtering by job title and location","Monitor daily limits for LinkedIn searches"];case"profile":return["Profile URLs are good for detailed individual research","Combine multiple profiles for batch processing","Use for validation of search results"];case"company":return["Company URLs provide organizational intelligence","Good for account-based marketing research","Extract employee lists for prospect identification"];default:return["Ensure URL is from linkedin.com","Use search URLs for prospect discovery","Use profile URLs for individual research"]}}}class f{async initialize(a){try{let b=[];return a.brightData&&(this.brightDataServer=new d(a.brightData),b.push("Bright Data MCP")),a.apify&&(this.apifyServer=new e(a.apify),b.push("Apify MCP")),this.isInitialized=!0,{success:!0,message:`MCP Registry initialized with ${b.length} servers`,servers:b}}catch(a){return{success:!1,message:`MCP Registry initialization failed: ${a instanceof Error?a.message:"Unknown error"}`,servers:[]}}}async listAllTools(){let a=[];return this.brightDataServer&&(await this.brightDataServer.listTools()).tools.forEach(b=>{a.push({...b,server:"bright-data"})}),this.apifyServer&&(await this.apifyServer.listTools()).tools.forEach(b=>{a.push({...b,server:"apify"})}),{tools:a}}async callTool(a){if(!this.isInitialized)return{content:[{type:"text",text:"MCP Registry not initialized"}],isError:!0};let b=a.server||this.detectServerFromTool(a.params.name);switch(b){case"bright-data":if(!this.brightDataServer)return{content:[{type:"text",text:"Bright Data MCP server not available"}],isError:!0};return await this.brightDataServer.callTool(a);case"apify":if(!this.apifyServer)return{content:[{type:"text",text:"Apify MCP server not available"}],isError:!0};return await this.apifyServer.callTool(a);default:return{content:[{type:"text",text:`Unknown server: ${b}. Available servers: ${this.getAvailableServers().join(", ")}`}],isError:!0}}}detectServerFromTool(a){return["research_prospect","analyze_company","generate_strategic_insights","check_system_health"].includes(a)?"bright-data":["extract_linkedin_profiles","check_extraction_status","get_extraction_results","estimate_extraction_cost","validate_linkedin_url","list_available_actors"].includes(a)?"apify":"unknown"}getAvailableServers(){let a=[];return this.brightDataServer&&a.push("bright-data"),this.apifyServer&&a.push("apify"),a}async getServerStatus(){let a=this.brightDataServer?(await this.brightDataServer.listTools()).tools.length:0,b=this.apifyServer?(await this.apifyServer.listTools()).tools.length:0;return{brightData:{available:!!this.brightDataServer,tools:a},apify:{available:!!this.apifyServer,tools:b},total:{servers:this.getAvailableServers().length,tools:a+b}}}async researchProspectWithBestSource(a){let b=a.maxResults||10,c=a.budget||100;return b<=350&&c<50&&this.apifyServer&&a.profileUrls?.[0]?await this.apifyServer.callTool({method:"tools/call",params:{name:"extract_linkedin_profiles",arguments:{searchUrl:a.profileUrls[0],maxResults:b,extractEmails:!0,waitForResults:!0}}}):this.brightDataServer?await this.brightDataServer.callTool({method:"tools/call",params:{name:"research_prospect",arguments:{profileUrls:a.profileUrls,searchCriteria:a.searchCriteria,depth:"high"===a.urgency?"comprehensive":"standard",maxResults:b}}}):{content:[{type:"text",text:"No suitable MCP servers available for prospect research"}],isError:!0}}async generateIntelligenceReport(a,b="meddic"){return this.brightDataServer?await this.brightDataServer.callTool({method:"tools/call",params:{name:"generate_strategic_insights",arguments:{prospects:a,methodology:b,conversationContext:"SAM AI Intelligence Report"}}}):{content:[{type:"text",text:"Bright Data MCP required for strategic intelligence generation"}],isError:!0}}constructor(){this.isInitialized=!1}}let g=new f;function h(){return{brightData:process.env.BRIGHT_DATA_USERNAME?{username:process.env.BRIGHT_DATA_USERNAME,password:process.env.BRIGHT_DATA_PASSWORD,endpoint:process.env.BRIGHT_DATA_ENDPOINT||"brd.superproxy.io",port:parseInt(process.env.BRIGHT_DATA_PORT||"22225"),organizationId:process.env.ORGANIZATION_ID||"default-org",userId:process.env.USER_ID||"default-user"}:void 0,apify:process.env.APIFY_API_TOKEN?{apiToken:process.env.APIFY_API_TOKEN,organizationId:process.env.ORGANIZATION_ID||"default-org",userId:process.env.USER_ID||"default-user"}:void 0}}},78335:()=>{},96487:()=>{}};