exports.id=5077,exports.ids=[5077],exports.modules={52153:(a,b,c)=>{"use strict";c.d(b,{j:()=>d});class d{constructor(a){this.googleBaseUrl="https://www.googleapis.com/customsearch/v1",this.serpApiBaseUrl="https://serpapi.com/search",this.config={maxResults:20,searchTimeout:3e4,...a},this.config.googleApiKey||console.warn("Google API key not provided - Google Custom Search will not work"),this.config.serpApiKey||console.warn("SerpAPI key not provided - SerpAPI searches will not work")}async listTools(){return{tools:[{name:"boolean_linkedin_search",description:"Search for LinkedIn profiles using Boolean operators and site filtering",inputSchema:{type:"object",properties:{query:{type:"string",description:'Boolean search query (e.g., "VP Sales" OR "Director Sales" site:linkedin.com/in)'},location:{type:"string",description:'Geographic filter (e.g., "San Francisco", "United States")',default:"United States"},maxResults:{type:"number",description:"Maximum number of profiles to return (1-100)",minimum:1,maximum:100,default:20},useAdvanced:{type:"boolean",description:"Use SerpAPI for more detailed results (costs more)",default:!1}},required:["query"]}},{name:"company_research_search",description:"Search for company information and intelligence",inputSchema:{type:"object",properties:{companyName:{type:"string",description:"Company name to research"},searchType:{type:"string",enum:["overview","technology","news","funding","competitors","jobs"],description:"Type of company information to find",default:"overview"},maxResults:{type:"number",description:"Maximum results to return",minimum:1,maximum:50,default:15}},required:["companyName"]}},{name:"icp_prospect_discovery",description:"Discover prospects matching Ideal Customer Profile criteria",inputSchema:{type:"object",properties:{jobTitles:{type:"array",items:{type:"string"},description:'Target job titles (e.g., ["VP Sales", "Chief Revenue Officer"])'},industries:{type:"array",items:{type:"string"},description:'Target industries (e.g., ["SaaS", "Technology", "Healthcare"])'},companySize:{type:"string",enum:["startup","small","medium","enterprise","any"],description:"Target company size range",default:"any"},location:{type:"string",description:"Geographic focus area",default:"United States"},excludeCompanies:{type:"array",items:{type:"string"},description:"Companies to exclude from results (competitors, existing customers)"},maxResults:{type:"number",description:"Maximum prospects to return",minimum:5,maximum:100,default:30}},required:["jobTitles","industries"]}},{name:"verify_search_quota",description:"Check remaining search quota and costs",inputSchema:{type:"object",properties:{service:{type:"string",enum:["google","serpapi","all"],description:"Which service quota to check",default:"all"}}}}]}}async callTool(a){let{name:b,arguments:c}=a.params;try{switch(b){case"boolean_linkedin_search":return await this.executeBooleanLinkedInSearch(c);case"company_research_search":return await this.executeCompanyResearchSearch(c);case"icp_prospect_discovery":return await this.executeICPProspectDiscovery(c);case"verify_search_quota":return await this.verifySearchQuota(c);default:return{content:[{type:"text",text:`Unknown tool: ${b}`}],isError:!0}}}catch(a){return{content:[{type:"text",text:`Google Search MCP error: ${a instanceof Error?a.message:"Unknown error"}`}],isError:!0}}}async executeBooleanLinkedInSearch(a){let{query:b,location:c="United States",maxResults:d=20,useAdvanced:e=!1}=a,f=this.optimizeLinkedInQuery(b);try{let a;if(e&&this.config.serpApiKey)a=await this.searchWithSerpAPI(f,d,c);else{if(!this.config.googleApiKey||!this.config.googleCseId)return{content:[{type:"text",text:"No search API keys configured. Please add GOOGLE_API_KEY + GOOGLE_CSE_ID or SERP_API_KEY"}],isError:!0};a=await this.searchWithGoogleCSE(f,d)}let b=this.extractLinkedInProfiles(a);return{content:[{type:"text",text:JSON.stringify({query:f,location:c,totalResults:b.length,searchService:e?"SerpAPI":"Google CSE",profiles:b,cost:this.calculateSearchCost(e,d),timestamp:new Date().toISOString()},null,2)}],isError:!1}}catch(a){return{content:[{type:"text",text:`LinkedIn search failed: ${a instanceof Error?a.message:"Unknown error"}`}],isError:!0}}}async executeCompanyResearchSearch(a){let{companyName:b,searchType:c="overview",maxResults:d=15}=a,e=this.buildCompanySearchQuery(b,c);try{let a=await this.searchWithGoogleCSE(e,d),f={company:b,searchType:c,query:e,results:a.map(a=>({title:a.title,url:a.link,snippet:a.snippet,source:a.displayLink})),insights:this.extractCompanyInsights(a,c),lastUpdated:new Date().toISOString(),cost:this.calculateSearchCost(!1,d)};return{content:[{type:"text",text:JSON.stringify(f,null,2)}],isError:!1}}catch(a){return{content:[{type:"text",text:`Company research failed: ${a instanceof Error?a.message:"Unknown error"}`}],isError:!0}}}async executeICPProspectDiscovery(a){let{jobTitles:b,industries:c,companySize:d="any",location:e="United States",excludeCompanies:f=[],maxResults:g=30}=a;try{let a=[];for(let h of b)for(let i of c){let j=this.buildICPSearchQuery(h,i,d,e,f),k=await this.searchWithGoogleCSE(j,Math.ceil(g/(b.length*c.length))),l=this.extractLinkedInProfiles(k);a.push(...l)}let h=this.deduplicateAndRankProspects(a,{jobTitles:b,industries:c,companySize:d}),i=h.slice(0,g);return{content:[{type:"text",text:JSON.stringify({icpCriteria:{jobTitles:b,industries:c,companySize:d,location:e},totalFound:h.length,returnedResults:i.length,prospects:i,searchCost:this.calculateSearchCost(!1,b.length*c.length*10),timestamp:new Date().toISOString()},null,2)}],isError:!1}}catch(a){return{content:[{type:"text",text:`ICP prospect discovery failed: ${a instanceof Error?a.message:"Unknown error"}`}],isError:!0}}}async verifySearchQuota(a){let{service:b="all"}=a;return{content:[{type:"text",text:JSON.stringify({google:{available:!!this.config.googleApiKey&&!!this.config.googleCseId,freeQuota:"100 searches/day",paidQuota:"10,000 searches/day",cost:"$5 per 1,000 searches after free tier"},serpapi:{available:!!this.config.serpApiKey,note:"Check SerpAPI dashboard for current quota",cost:"Varies by plan - see serpapi.com/pricing"},recommendation:this.config.googleApiKey?"Google CSE recommended for high-volume, cost-effective searches":"SerpAPI recommended for detailed results and advanced features"},null,2)}],isError:!1}}async searchWithGoogleCSE(a,b){if(!this.config.googleApiKey||!this.config.googleCseId)throw Error("Google Custom Search API key or CSE ID not configured");let c=new URL(this.googleBaseUrl);c.searchParams.set("key",this.config.googleApiKey),c.searchParams.set("cx",this.config.googleCseId),c.searchParams.set("q",a),c.searchParams.set("num",Math.min(b,10).toString());let d=await fetch(c.toString());if(!d.ok){let a=await d.json().catch(()=>({}));throw Error(`Google CSE API error: ${d.status} - ${a.error?.message||"Unknown error"}`)}return(await d.json()).items||[]}async searchWithSerpAPI(a,b,c){if(!this.config.serpApiKey)throw Error("SerpAPI key not configured");let d=new URL(this.serpApiBaseUrl);d.searchParams.set("api_key",this.config.serpApiKey),d.searchParams.set("q",a),d.searchParams.set("location",c),d.searchParams.set("num",Math.min(b,100).toString()),d.searchParams.set("engine","google");let e=await fetch(d.toString());if(!e.ok)throw Error(`SerpAPI error: ${e.status}`);return(await e.json()).organic_results||[]}optimizeLinkedInQuery(a){return a.includes("site:linkedin.com")||(a=`${a} site:linkedin.com/in/`),a=(a=a.replace(/\bAND\b/g,"+")).replace(/\bNOT\b/g,"-")}buildCompanySearchQuery(a,b){let c=`"${a}"`,d={overview:"company profile about",technology:"technology stack engineering blog",news:"news funding acquisition partnership",funding:"funding series investment valuation",competitors:"competitors vs alternative",jobs:"careers jobs hiring"};return`${c} ${d[b]||d.overview}`}buildICPSearchQuery(a,b,c,d,e){let f=`"${a}" ${b} ${d} site:linkedin.com/in/`;if("any"!==c&&(f+=` "${({startup:"1-50 employees",small:"50-200 employees",medium:"200-1000 employees",enterprise:"1000+ employees"})[c]}"`),e.length>0){let a=e.map(a=>`-"${a}"`).join(" ");f+=` ${a}`}return f}extractLinkedInProfiles(a){return a.filter(a=>a.link.includes("linkedin.com/in/")).map(a=>{let b=a.title.split(" - "),c=b[0]||"Unknown",d=b[1]||"",[e,f]=this.parseLinkedInTitleCompany(d,a.snippet);return{name:c.trim(),title:e||"Unknown Title",company:f||"Unknown Company",location:this.extractLocation(a.snippet),profileUrl:a.link,snippet:a.snippet,relevanceScore:this.calculateRelevanceScore(a,{name:c,title:e,company:f})}}).sort((a,b)=>b.relevanceScore-a.relevanceScore)}parseLinkedInTitleCompany(a,b){let c=a.match(/^(.+?)\s+at\s+(.+)$/);if(c)return[c[1].trim(),c[2].trim()];let d=b.match(/(\w+[\w\s]*?)\s+at\s+([^.]+)/);return d?[d[1].trim(),d[2].trim()]:[a,""]}extractLocation(a){let b=a.match(/(?:Greater|Metro)?\s*([A-Z][a-z\s]+(?:Area|Bay)?),?\s*([A-Z]{2}|[A-Z][a-z]+)/);return b?`${b[1].trim()}, ${b[2].trim()}`:"Unknown Location"}calculateRelevanceScore(a,b){let c=.5;return b.title&&"Unknown Title"!==b.title&&(c+=.2),b.company&&"Unknown Company"!==b.company&&(c+=.2),a.snippet.includes("years of experience")&&(c+=.1),(a.snippet.includes("skills")||a.snippet.includes("expertise"))&&(c+=.1),Math.min(c,1)}extractCompanyInsights(a,b){let c=[];for(let d of a.slice(0,3))"funding"===b&&d.snippet.includes("million")?c.push(`Recent funding activity mentioned: ${d.snippet.substring(0,100)}...`):"technology"===b&&(d.snippet.includes("API")||d.snippet.includes("platform"))?c.push(`Technology focus: ${d.snippet.substring(0,100)}...`):"news"===b&&c.push(`Recent news: ${d.snippet.substring(0,100)}...`);return c.length>0?c:["No specific insights extracted from search results"]}deduplicateAndRankProspects(a,b){return a.filter((a,b,c)=>b===c.findIndex(b=>b.profileUrl===a.profileUrl)).sort((a,c)=>{let d=a.relevanceScore,e=c.relevanceScore;return b.jobTitles.some(b=>a.title.toLowerCase().includes(b.toLowerCase()))&&(d+=.3),b.jobTitles.some(a=>c.title.toLowerCase().includes(a.toLowerCase()))&&(e+=.3),e-d})}calculateSearchCost(a,b){if(a)return"SerpAPI - check dashboard for current pricing";{if(b<=100)return"FREE - Google Custom Search (under daily limit)";let a=b-100;return`Google CSE: 100 free + ${a} paid (~$${(a/1e3*5).toFixed(2)})`}}}},78335:()=>{},96487:()=>{}};