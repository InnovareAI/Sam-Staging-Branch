(()=>{var a={};a.id=573,a.ids=[573],a.modules={87:(a,b,c)=>{"use strict";c.d(b,{E:()=>g});var d=c(82461);let e="https://latxadqrvrrrcvkktrog.supabase.co",f=process.env.SUPABASE_SERVICE_ROLE_KEY||"";(0,d.UU)(e,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxhdHhhZHFydnJycmN2a2t0cm9nIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI2OTk5ODYsImV4cCI6MjA2ODI3NTk4Nn0.3WkAgXpk_MyQioVf_SED9O_ArjcT9nH0uy9we2okftE");let g=()=>{if(!f)throw Error("SUPABASE_SERVICE_ROLE_KEY is not configured");return(0,d.UU)(e,f,{auth:{autoRefreshToken:!1,persistSession:!1}})}},261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:a=>{"use strict";a.exports=require("punycode")},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:a=>{"use strict";a.exports=require("stream")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},51767:(a,b,c)=>{"use strict";c.r(b),c.d(b,{handler:()=>K,patchFetch:()=>J,routeModule:()=>F,serverHooks:()=>I,workAsyncStorage:()=>G,workUnitAsyncStorage:()=>H});var d={};c.r(d),c.d(d,{POST:()=>E});var e=c(95736),f=c(9117),g=c(4044),h=c(39326),i=c(32324),j=c(261),k=c(54290),l=c(85328),m=c(38928),n=c(46595),o=c(3421),p=c(17679),q=c(41681),r=c(63446),s=c(86439),t=c(51356),u=c(10641),v=c(50698),w=c(40082),x=c(45299),y=c(65200),z=c(73582);let A=new(require("node:async_hooks")).AsyncLocalStorage;var B=c(66079);let C=async()=>{var a,b;let c;try{let a=await (0,x.TG)(),b=(0,z._b)(a,w.AA.Headers.ClerkRequestData);c=(0,B.Kk)(b)}catch(a){if(a&&(0,x.Sz)(a))throw a}let d=null!=(b=null==(a=A.getStore())?void 0:a.get("requestData"))?b:c;return(null==d?void 0:d.secretKey)||(null==d?void 0:d.publishableKey)?(0,y.n)(d):(0,y.n)({})};var D=c(87);async function E(a){try{let{userId:b}=await (0,v.j)();if(!b)return u.NextResponse.json({error:"Unauthorized"},{status:401});console.log("\uD83C\uDFE2 Creating organization for user:",b);let{name:c,slug:d}=await a.json();if(!c)return u.NextResponse.json({error:"Organization name is required"},{status:400});let e=await C(),f=await e.organizations.createOrganization({name:c,slug:d||c.toLowerCase().replace(/[^a-z0-9]/g,"-"),createdBy:b});console.log("✅ Clerk organization created:",f.id),await e.organizations.createOrganizationMembership({organizationId:f.id,userId:b,role:"org:admin"}),console.log("✅ User added as organization admin");let g=(0,D.E)(),{data:h,error:i}=await g.from("organizations").insert({clerk_org_id:f.id,name:f.name,slug:f.slug,created_by:b,settings:{industry:null,team_size:"1-10",features:["chat","knowledge_base","campaigns"],subscription_plan:"starter"}}).select().single();return i?console.error("Supabase organization sync error:",i):console.log("✅ Organization synced to Supabase:",h.id),u.NextResponse.json({organization:{id:f.id,name:f.name,slug:f.slug}})}catch(a){return console.error("Organization creation error:",a),u.NextResponse.json({error:"Failed to create organization"},{status:500})}}let F=new e.AppRouteRouteModule({definition:{kind:f.RouteKind.APP_ROUTE,page:"/api/organizations/create/route",pathname:"/api/organizations/create",filename:"route",bundlePath:"app/api/organizations/create/route"},distDir:".next",relativeProjectDir:"",resolvedPagePath:"/Users/tvonlinz/Dev_Master/InnovareAI/Sam-New-Sep-7/app/api/organizations/create/route.ts",nextConfigOutput:"standalone",userland:d}),{workAsyncStorage:G,workUnitAsyncStorage:H,serverHooks:I}=F;function J(){return(0,g.patchFetch)({workAsyncStorage:G,workUnitAsyncStorage:H})}async function K(a,b,c){var d;let e="/api/organizations/create/route";"/index"===e&&(e="/");let g=await F.prepare(a,b,{srcPage:e,multiZoneDraftMode:!1});if(!g)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:u,params:v,nextConfig:w,isDraftMode:x,prerenderManifest:y,routerServerContext:z,isOnDemandRevalidate:A,revalidateOnlyGenerated:B,resolvedPathname:C}=g,D=(0,j.normalizeAppPath)(e),E=!!(y.dynamicRoutes[D]||y.routes[C]);if(E&&!x){let a=!!y.routes[C],b=y.dynamicRoutes[D];if(b&&!1===b.fallback&&!a)throw new s.NoFallbackError}let G=null;!E||F.isDev||x||(G="/index"===(G=C)?"/":G);let H=!0===F.isDev||!E,I=E&&!H,J=a.method||"GET",K=(0,i.getTracer)(),L=K.getActiveScopeSpan(),M={params:v,prerenderManifest:y,renderOpts:{experimental:{cacheComponents:!!w.experimental.cacheComponents,authInterrupts:!!w.experimental.authInterrupts},supportsDynamicResponse:H,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:null==(d=w.experimental)?void 0:d.cacheLife,isRevalidate:I,waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:void 0,onInstrumentationRequestError:(b,c,d)=>F.onRequestError(a,b,d,z)},sharedContext:{buildId:u}},N=new k.NodeNextRequest(a),O=new k.NodeNextResponse(b),P=l.NextRequestAdapter.fromNodeNextRequest(N,(0,l.signalFromNodeResponse)(b));try{let d=async c=>F.handle(P,M).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=K.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==m.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${J} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${J} ${a.url}`)}),g=async g=>{var i,j;let k=async({previousCacheEntry:f})=>{try{if(!(0,h.getRequestMeta)(a,"minimalMode")&&A&&B&&!f)return b.statusCode=404,b.setHeader("x-nextjs-cache","REVALIDATED"),b.end("This page could not be found"),null;let e=await d(g);a.fetchMetrics=M.renderOpts.fetchMetrics;let i=M.renderOpts.pendingWaitUntil;i&&c.waitUntil&&(c.waitUntil(i),i=void 0);let j=M.renderOpts.collectedTags;if(!E)return await (0,o.I)(N,O,e,M.renderOpts.pendingWaitUntil),null;{let a=await e.blob(),b=(0,p.toNodeOutgoingHttpHeaders)(e.headers);j&&(b[r.NEXT_CACHE_TAGS_HEADER]=j),!b["content-type"]&&a.type&&(b["content-type"]=a.type);let c=void 0!==M.renderOpts.collectedRevalidate&&!(M.renderOpts.collectedRevalidate>=r.INFINITE_CACHE)&&M.renderOpts.collectedRevalidate,d=void 0===M.renderOpts.collectedExpire||M.renderOpts.collectedExpire>=r.INFINITE_CACHE?void 0:M.renderOpts.collectedExpire;return{value:{kind:t.CachedRouteKind.APP_ROUTE,status:e.status,body:Buffer.from(await a.arrayBuffer()),headers:b},cacheControl:{revalidate:c,expire:d}}}}catch(b){throw(null==f?void 0:f.isStale)&&await F.onRequestError(a,b,{routerKind:"App Router",routePath:e,routeType:"route",revalidateReason:(0,n.c)({isRevalidate:I,isOnDemandRevalidate:A})},z),b}},l=await F.handleResponse({req:a,nextConfig:w,cacheKey:G,routeKind:f.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:y,isRoutePPREnabled:!1,isOnDemandRevalidate:A,revalidateOnlyGenerated:B,responseGenerator:k,waitUntil:c.waitUntil});if(!E)return null;if((null==l||null==(i=l.value)?void 0:i.kind)!==t.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==l||null==(j=l.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,h.getRequestMeta)(a,"minimalMode")||b.setHeader("x-nextjs-cache",A?"REVALIDATED":l.isMiss?"MISS":l.isStale?"STALE":"HIT"),x&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let m=(0,p.fromNodeOutgoingHttpHeaders)(l.value.headers);return(0,h.getRequestMeta)(a,"minimalMode")&&E||m.delete(r.NEXT_CACHE_TAGS_HEADER),!l.cacheControl||b.getHeader("Cache-Control")||m.get("Cache-Control")||m.set("Cache-Control",(0,q.getCacheControlHeader)(l.cacheControl)),await (0,o.I)(N,O,new Response(l.value.body,{headers:m,status:l.value.status||200})),null};L?await g(L):await K.withPropagatedContext(a.headers,()=>K.trace(m.BaseServerSpan.handleRequest,{spanName:`${J} ${a.url}`,kind:i.SpanKind.SERVER,attributes:{"http.method":J,"http.target":a.url}},g))}catch(b){if(L||b instanceof s.NoFallbackError||await F.onRequestError(a,b,{routerKind:"App Router",routePath:D,routeType:"route",revalidateReason:(0,n.c)({isRevalidate:I,isOnDemandRevalidate:A})}),E)throw b;return await (0,o.I)(N,O,new Response(null,{status:500})),null}}},55591:a=>{"use strict";a.exports=require("https")},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65200:(a,b,c)=>{"use strict";c.d(b,{n:()=>J});var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=c(61510);c(42513);var z=c(44268);c(95563),c(73899);var A=c(6231),B=c(69702),C=c(59094),D=class{constructor(){(0,C.VK)(this,f),(0,C.VK)(this,d,"clerk_telemetry_throttler"),(0,C.VK)(this,e,864e5)}isEventThrottled(a){if(!(0,C.S7)(this,f,i))return!1;let b=Date.now(),c=(0,C.jq)(this,f,g).call(this,a),j=(0,C.S7)(this,f,h)?.[c];if(!j){let a={...(0,C.S7)(this,f,h),[c]:b};localStorage.setItem((0,C.S7)(this,d),JSON.stringify(a))}if(j&&b-j>(0,C.S7)(this,e)){let a=(0,C.S7)(this,f,h);delete a[c],localStorage.setItem((0,C.S7)(this,d),JSON.stringify(a))}return!!j}};d=new WeakMap,e=new WeakMap,f=new WeakSet,g=function(a){let{sk:b,pk:c,payload:d,...e}=a,f={...d,...e};return JSON.stringify(Object.keys({...d,...e}).sort().map(a=>f[a]))},h=function(){let a=localStorage.getItem((0,C.S7)(this,d));return a?JSON.parse(a):{}},i=function(){if("undefined"==typeof window)return!1;let a=window.localStorage;if(!a)return!1;try{let b="test";return a.setItem(b,b),a.removeItem(b),!0}catch(b){return b instanceof DOMException&&("QuotaExceededError"===b.name||"NS_ERROR_DOM_QUOTA_REACHED"===b.name)&&a.length>0&&a.removeItem((0,C.S7)(this,d)),!1}};var E=new Set(["error","warn","info","debug","trace"]),F={samplingRate:1,maxBufferSize:5,endpoint:"https://clerk-telemetry.com"},G=class{constructor(a){(0,C.VK)(this,o),(0,C.VK)(this,j),(0,C.VK)(this,k),(0,C.VK)(this,l,{}),(0,C.VK)(this,m,[]),(0,C.VK)(this,n,null),(0,C.OV)(this,j,{maxBufferSize:a.maxBufferSize??F.maxBufferSize,samplingRate:a.samplingRate??F.samplingRate,perEventSampling:a.perEventSampling??!0,disabled:a.disabled??!1,debug:a.debug??!1,endpoint:F.endpoint}),a.clerkVersion||"undefined"!=typeof window?(0,C.S7)(this,l).clerkVersion=a.clerkVersion??"":(0,C.S7)(this,l).clerkVersion="",(0,C.S7)(this,l).sdk=a.sdk,(0,C.S7)(this,l).sdkVersion=a.sdkVersion,(0,C.S7)(this,l).publishableKey=a.publishableKey??"";let b=(0,B.q5)(a.publishableKey);b&&((0,C.S7)(this,l).instanceType=b.instanceType),a.secretKey&&((0,C.S7)(this,l).secretKey=a.secretKey.substring(0,16)),(0,C.OV)(this,k,new D)}get isEnabled(){return!("development"!==(0,C.S7)(this,l).instanceType||(0,C.S7)(this,j).disabled||"undefined"!=typeof process&&process.env&&(0,A.zz)(process.env.CLERK_TELEMETRY_DISABLED)||"undefined"!=typeof window&&window?.navigator?.webdriver)}get isDebug(){return(0,C.S7)(this,j).debug||"undefined"!=typeof process&&process.env&&(0,A.zz)(process.env.CLERK_TELEMETRY_DEBUG)}record(a){try{let b=(0,C.jq)(this,o,w).call(this,a.event,a.payload);if((0,C.jq)(this,o,u).call(this,b.event,b),!(0,C.jq)(this,o,p).call(this,b,a.eventSamplingRate))return;(0,C.S7)(this,m).push({kind:"event",value:b}),(0,C.jq)(this,o,s).call(this)}catch(a){console.error("[clerk/telemetry] Error recording telemetry event",a)}}recordLog(a){try{if(!(0,C.jq)(this,o,q).call(this,a))return;let b="string"==typeof a?.level&&E.has(a.level),c="string"==typeof a?.message&&a.message.trim().length>0,d=null,e=a?.timestamp;if("number"==typeof e||"string"==typeof e){let a=new Date(e);Number.isNaN(a.getTime())||(d=a)}if(!b||!c||null===d){this.isDebug&&"undefined"!=typeof console&&console.warn("[clerk/telemetry] Dropping invalid telemetry log entry",{levelIsValid:b,messageIsValid:c,timestampIsValid:null!==d});return}let f=(0,C.jq)(this,o,v).call(this),g={sdk:f.name,sdkv:f.version,cv:(0,C.S7)(this,l).clerkVersion??"",lvl:a.level,msg:a.message,ts:d.toISOString(),pk:(0,C.S7)(this,l).publishableKey||null,payload:(0,C.jq)(this,o,x).call(this,a.context)};(0,C.S7)(this,m).push({kind:"log",value:g}),(0,C.jq)(this,o,s).call(this)}catch(a){console.error("[clerk/telemetry] Error recording telemetry log entry",a)}}};j=new WeakMap,k=new WeakMap,l=new WeakMap,m=new WeakMap,n=new WeakMap,o=new WeakSet,p=function(a,b){return this.isEnabled&&!this.isDebug&&(0,C.jq)(this,o,r).call(this,a,b)},q=function(a){return!0},r=function(a,b){let c=Math.random();return!!(c<=(0,C.S7)(this,j).samplingRate&&(!1===(0,C.S7)(this,j).perEventSampling||void 0===b||c<=b))&&!(0,C.S7)(this,k).isEventThrottled(a)},s=function(){if("undefined"==typeof window)return void(0,C.jq)(this,o,t).call(this);if((0,C.S7)(this,m).length>=(0,C.S7)(this,j).maxBufferSize){(0,C.S7)(this,n)&&("undefined"!=typeof cancelIdleCallback?cancelIdleCallback(Number((0,C.S7)(this,n))):clearTimeout(Number((0,C.S7)(this,n)))),(0,C.jq)(this,o,t).call(this);return}(0,C.S7)(this,n)||("requestIdleCallback"in window?(0,C.OV)(this,n,requestIdleCallback(()=>{(0,C.jq)(this,o,t).call(this),(0,C.OV)(this,n,null)})):(0,C.OV)(this,n,setTimeout(()=>{(0,C.jq)(this,o,t).call(this),(0,C.OV)(this,n,null)},0)))},t=function(){let a=[...(0,C.S7)(this,m)];if((0,C.OV)(this,m,[]),(0,C.OV)(this,n,null),0===a.length)return;let b=a.filter(a=>"event"===a.kind).map(a=>a.value),c=a.filter(a=>"log"===a.kind).map(a=>a.value);b.length>0&&fetch(new URL("/v1/event",(0,C.S7)(this,j).endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({events:b})}).catch(()=>void 0),c.length>0&&fetch(new URL("/v1/logs",(0,C.S7)(this,j).endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({logs:c})}).catch(()=>void 0)},u=function(a,b){this.isDebug&&(void 0!==console.groupCollapsed?(console.groupCollapsed("[clerk/telemetry]",a),console.log(b),console.groupEnd()):console.log("[clerk/telemetry]",a,b))},v=function(){let a={name:(0,C.S7)(this,l).sdk,version:(0,C.S7)(this,l).sdkVersion};if("undefined"!=typeof window){let b=window;if(b.Clerk){let c=b.Clerk;if("object"==typeof c&&null!==c&&"constructor"in c&&"function"==typeof c.constructor&&c.constructor.sdkMetadata){let{name:b,version:d}=c.constructor.sdkMetadata;void 0!==b&&(a.name=b),void 0!==d&&(a.version=d)}}}return a},w=function(a,b){let c=(0,C.jq)(this,o,v).call(this);return{event:a,cv:(0,C.S7)(this,l).clerkVersion??"",it:(0,C.S7)(this,l).instanceType??"",sdk:c.name,sdkv:c.version,...(0,C.S7)(this,l).publishableKey?{pk:(0,C.S7)(this,l).publishableKey}:{},...(0,C.S7)(this,l).secretKey?{sk:(0,C.S7)(this,l).secretKey}:{},payload:b}},x=function(a){if(null==a||"object"!=typeof a)return null;try{let b=JSON.parse(JSON.stringify(a));if(b&&"object"==typeof b&&!Array.isArray(b))return b;return null}catch{return null}},(0,z.C)(y.nr);var H=c(89963);let I={secretKey:H.rB,publishableKey:H.At,apiUrl:H.H$,apiVersion:H.mG,userAgent:"@clerk/nextjs@6.31.9",proxyUrl:H.Rg,domain:H.V2,isSatellite:H.fS,machineSecretKey:H.Fx,sdkMetadata:H.tm,telemetry:{disabled:H.nN,debug:H.Mh}},J=a=>(function(a){let b={...a},c=(0,y.y3)(b),d=(0,y.Bs)({options:b,apiClient:c}),e=new G({publishableKey:b.publishableKey,secretKey:b.secretKey,samplingRate:.1,...b.sdkMetadata?{sdk:b.sdkMetadata.name,sdkVersion:b.sdkMetadata.version}:{},...b.telemetry||{}});return{...c,...d,telemetry:e}})({...I,...a})},73024:a=>{"use strict";a.exports=require("node:fs")},74075:a=>{"use strict";a.exports=require("zlib")},76760:a=>{"use strict";a.exports=require("node:path")},77598:a=>{"use strict";a.exports=require("node:crypto")},78335:()=>{},79551:a=>{"use strict";a.exports=require("url")},81630:a=>{"use strict";a.exports=require("http")},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},96487:()=>{}};var b=require("../../../../webpack-runtime.js");b.C(a);var c=b.X(0,[996,641,698,856],()=>b(b.s=51767));module.exports=c})();