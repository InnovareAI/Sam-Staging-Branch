(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9662],{1078:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(5105).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2255:(e,s,t)=>{Promise.resolve().then(t.bind(t,2446))},2446:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>k});var a=t(5155),r=t(2115),n=t(3209),i=t(7003),l=t(7812),c=t(5850),d=t(3884),o=t(7816),x=t(1016),m=t(6983),p=t(1078),u=t(7333),h=t(5870),f=t(5276),j=t(9745),v=t(9408),g=t(814),N=t(3664);let y=(0,t(5105).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);var b=t(5880),w=t(5710);function k(){let[e,s]=(0,r.useState)(null),[t,k]=(0,r.useState)([]),[_,A]=(0,r.useState)({}),[C,S]=(0,r.useState)(new Set),[z,R]=(0,r.useState)("grid"),[L,E]=(0,r.useState)({}),[B,$]=(0,r.useState)(!0),[P,T]=(0,r.useState)([]),[Z,V]=(0,r.useState)(!1),[q,I]=(0,r.useState)(!0);(0,r.useEffect)(()=>{W()},[]),(0,r.useEffect)(()=>{Z&&!q&&M()},[Z,q]);let W=async()=>{I(!0);try{let e=await fetch("/api/unipile/accounts");if(e.ok){let s=await e.json();T(s.accounts||[]),V(s.has_linkedin||!1)}}catch(e){console.error("Error checking LinkedIn connection:",e),V(!1)}I(!1)},M=async()=>{try{$(!0);let e=await fetch("/api/prospect-approval/session");if(e.ok){let t=await e.json();if(s(t.session),t.session){let e=await fetch("/api/prospect-approval/prospects?session_id=".concat(t.session.id));if(e.ok){let s=await e.json();k(s.prospects)}let s=await fetch("/api/prospect-approval/decisions?session_id=".concat(t.session.id));if(s.ok){let e=(await s.json()).decisions.reduce((e,s)=>(e[s.prospect_id]=s,e),{});A(e)}}}}catch(e){console.error("Error loading approval session:",e)}finally{$(!1)}},O=async(t,a,r)=>{try{let n=await fetch("/api/prospect-approval/decide",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:null==e?void 0:e.id,prospect_id:t,decision:a,reason:r})});if(n.ok){let r=await n.json();if(A(e=>({...e,[t]:r.decision})),e){let t={...e};"approved"===a?t.approved_count+=1:t.rejected_count+=1,t.pending_count-=1,s(t)}}}catch(e){console.error("Error saving prospect decision:",e)}},H=async e=>{if(0===C.size)return;let s=Array.from(C).map(s=>O(s,e,"Bulk ".concat(e)));await Promise.all(s),S(new Set)},U=async()=>{if(e)try{let s=await fetch("/api/prospect-approval/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:e.id})});s.ok&&(await s.json(),window.location.href="/dashboard/prospect-approval/results/".concat(e.id))}catch(e){console.error("Error completing session:",e)}};if(B)return(0,a.jsx)("div",{className:"container mx-auto p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(m.A,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Loading Prospect Approval Session..."})]})});if(!e)return(0,a.jsx)("div",{className:"container mx-auto p-6",children:(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"No Active Approval Session"}),(0,a.jsx)(n.BT,{children:"Start a new ICP research session to begin prospect approval"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)(i.$,{onClick:()=>window.location.href="/dashboard",children:"Start New Research Session"})})]})});let F=t.filter(e=>{var s,t,a;return(null==(s=L.company_size)||!s.length||!!L.company_size.includes(e.company.size))&&(null==(t=L.industry)||!t.length||!!L.industry.includes(e.company.industry))&&(null==(a=L.connection_degree)||!a.length||!!L.connection_degree.includes(e.connection_degree))&&(void 0===L.has_email||!!e.contact.email===L.has_email)}),D=(e.approved_count+e.rejected_count)/e.total_prospects*100;return(0,a.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[q&&(0,a.jsx)(n.Zp,{className:"border-blue-200 bg-blue-50",children:(0,a.jsx)(n.Wu,{className:"py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(m.A,{className:"h-5 w-5 text-blue-600 animate-spin"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-blue-800 font-medium",children:"Checking LinkedIn Connection..."}),(0,a.jsx)("p",{className:"text-blue-600 text-sm",children:"Verifying your Unipile account status"})]})]})})}),!q&&!Z&&(0,a.jsx)(n.Zp,{className:"border-red-200 bg-red-50",children:(0,a.jsx)(n.Wu,{className:"py-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)(p.A,{className:"h-6 w-6 text-red-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-red-800 font-semibold text-lg mb-2",children:"LinkedIn Account Not Connected"}),(0,a.jsx)("p",{className:"text-red-700 mb-4",children:"To use the Prospect Approval system, you need to connect your LinkedIn account through Unipile. This allows us to enrich prospect data and provide comprehensive contact information for your approval decisions."}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(i.$,{onClick:()=>window.open("/integrations/unipile","_blank"),className:"bg-red-600 hover:bg-red-700 text-white",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Connect LinkedIn Account"]}),(0,a.jsxs)(i.$,{variant:"outline",onClick:W,className:"border-red-300 text-red-700 hover:bg-red-100",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Refresh Connection Status"]})]})]})]})})}),!q&&Z&&(0,a.jsx)(n.Zp,{className:"border-green-200 bg-green-50",children:(0,a.jsx)(n.Wu,{className:"py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(o.A,{className:"h-5 w-5 text-green-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-green-800 font-medium",children:"LinkedIn Connected"}),(0,a.jsxs)("p",{className:"text-green-600 text-sm",children:[P.length," Unipile account",1!==P.length?"s":""," connected"]})]})]})})}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(n.ZB,{className:"text-2xl",children:["Prospect Approval - Batch #",e.batch_number]}),(0,a.jsx)(n.BT,{children:"Review and approve prospects from Unipile LinkedIn enrichment"})]}),(0,a.jsxs)(l.E,{variant:"outline",className:"text-lg px-3 py-1",children:[e.total_prospects," Prospects"]})]})}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.approved_count}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Approved"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:e.rejected_count}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Rejected"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:e.pending_count}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Pending"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(D),"%"]}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Complete"})]})]}),(0,a.jsx)(c.k,{value:D,className:"w-full"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.$,{variant:"grid"===z?"default":"outline",size:"sm",onClick:()=>R("grid"),children:"Grid View"}),(0,a.jsx)(i.$,{variant:"list"===z?"default":"outline",size:"sm",onClick:()=>R("list"),children:"List View"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>H("approved"),disabled:0===C.size,children:[(0,a.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"Approve Selected (",C.size,")"]}),(0,a.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>H("rejected"),disabled:0===C.size,children:[(0,a.jsx)(j.A,{className:"w-4 h-4 mr-2"}),"Reject Selected (",C.size,")"]}),(0,a.jsx)(i.$,{onClick:U,disabled:e.pending_count>0,children:"Complete Session"})]})]}),(0,a.jsx)("div",{className:"grid"===z?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-4",children:F.map(e=>{var s,t;let r=(null==(t=_[e.id])?void 0:t.decision)||"pending",c="pending"!==r,p=C.has(e.id);return(0,a.jsxs)(n.Zp,{className:"transition-all ".concat(c?"opacity-75":"hover:shadow-lg"," ").concat("approved"===r?"border-green-200 bg-green-50":"rejected"===r?"border-red-200 bg-red-50":p?"border-blue-200 bg-blue-50":""),children:[(0,a.jsx)(n.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(d.eu,{children:[(0,a.jsx)(d.BK,{src:e.profile_image}),(0,a.jsx)(d.q5,{children:e.name.split(" ").map(e=>e[0]).join("")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(n.ZB,{className:"text-lg",children:e.name}),(0,a.jsx)(n.BT,{children:e.title})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"approved":return(0,a.jsx)(o.A,{className:"w-5 h-5 text-green-600"});case"rejected":return(0,a.jsx)(x.A,{className:"w-5 h-5 text-red-600"});default:return(0,a.jsx)(m.A,{className:"w-5 h-5 text-yellow-600"})}})(r),!c&&(0,a.jsx)("input",{type:"checkbox",checked:p,onChange:s=>{let t=new Set(C);s.target.checked?t.add(e.id):t.delete(e.id),S(t)}})]})]})}),(0,a.jsxs)(n.Wu,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.A,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:e.company.name}),(0,a.jsx)(l.E,{variant:"outline",className:"text-xs",children:e.company.size})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:e.company.industry})]}),e.contact.email&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(N.A,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:e.contact.email})]}),e.contact.phone&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:e.contact.phone})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsxs)("span",{className:"text-sm",children:[1===e.connection_degree?"1st":2===e.connection_degree?"2nd":3===e.connection_degree?"3rd":"".concat(e.connection_degree,"th")," connection"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-2",children:[(0,a.jsxs)(l.E,{variant:"secondary",className:"text-xs",children:["Score: ",e.enrichment_score,"/100"]}),(0,a.jsx)("div",{className:"flex gap-1",children:(0,a.jsx)(i.$,{size:"sm",variant:"outline",onClick:()=>window.open(e.contact.linkedin_url,"_blank"),children:(0,a.jsx)(b.A,{className:"w-3 h-3"})})})]}),!c&&(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsxs)(i.$,{size:"sm",variant:"default",onClick:()=>O(e.id,"approved"),className:"flex-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 mr-1"}),"Approve"]}),(0,a.jsxs)(i.$,{size:"sm",variant:"outline",onClick:()=>O(e.id,"rejected"),className:"flex-1",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 mr-1"}),"Reject"]})]}),c&&(null==(s=_[e.id])?void 0:s.reason)&&(0,a.jsx)("div",{className:"text-xs text-muted-foreground bg-muted p-2 rounded",children:_[e.id].reason})]})]},e.id)})}),0===F.length&&(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"text-center py-8",children:[(0,a.jsx)(w.A,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No prospects found"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Try adjusting your filter criteria"})]})})]})}},3209:(e,s,t)=>{"use strict";t.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>i,aR:()=>l});var a=t(5155),r=t(2115),n=t(5016);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...r})});i.displayName="Card";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});l.displayName="CardHeader";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("font-semibold leading-none tracking-tight",t),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},3884:(e,s,t)=>{"use strict";t.d(s,{BK:()=>c,eu:()=>l,q5:()=>d});var a=t(5155),r=t(2115),n=t(6591),i=t(5016);let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.bL,{ref:s,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r})});l.displayName=n.bL.displayName;let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n._V,{ref:s,className:(0,i.cn)("aspect-square h-full w-full",t),...r})});c.displayName=n._V.displayName;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.H4,{ref:s,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r})});d.displayName=n.H4.displayName},5016:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var a=t(2821),r=t(5889);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},5850:(e,s,t)=>{"use strict";t.d(s,{k:()=>l});var a=t(5155),r=t(2115),n=t(9484),i=t(5016);let l=r.forwardRef((e,s)=>{let{className:t,value:r,...l}=e;return(0,a.jsx)(n.bL,{ref:s,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,a.jsx)(n.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});l.displayName=n.bL.displayName},5870:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(5105).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5880:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(5105).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},6983:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(5105).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7003:(e,s,t)=>{"use strict";t.d(s,{$:()=>d});var a=t(5155),r=t(2115),n=t(2467),i=t(3101),l=t(5016);let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,s)=>{let{className:t,variant:r,size:i,asChild:d=!1,...o}=e,x=d?n.DX:"button";return(0,a.jsx)(x,{className:(0,l.cn)(c({variant:r,size:i,className:t})),ref:s,...o})});d.displayName="Button"},7812:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var a=t(5155);t(2115);var r=t(3101),n=t(5016);let i=(0,r.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:t}),s),...r})}}},e=>{e.O(0,[5514,1038,8441,1255,7358],()=>e(e.s=2255)),_N_E=e.O()}]);