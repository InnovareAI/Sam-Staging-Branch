(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{5367:(e,s,t)=>{Promise.resolve().then(t.bind(t,8956))},8956:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eh});var a=t(5155),r=t(2115);function l(){let[e,s]=(0,r.useState)(null),[t,l]=(0,r.useState)("idle");return(0,a.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-white",children:"Upload Document"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-600 rounded p-6 text-center",children:[(0,a.jsx)("input",{type:"file",onChange:e=>{var t,a;return s(null!=(a=null==(t=e.target.files)?void 0:t[0])?a:null)},className:"text-gray-300"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"PDF, DOCX, MD, URL exports"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,a.jsx)("button",{className:"px-3 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:opacity-50 transition-colors",disabled:!e||"uploading"===t,onClick:()=>l("done"),children:"uploading"===t?"Uploading…":"Upload (mock)"}),e&&(0,a.jsxs)("span",{className:"text-sm text-gray-400",children:["Selected: ",e.name]})]})]})}function n(){let[e,s]=(0,r.useState)(""),[t,l]=(0,r.useState)([]);return(0,a.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-white",children:"Test Knowledge Retrieval"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{className:"bg-gray-700 border border-gray-600 px-3 py-2 rounded text-white placeholder-gray-400 w-full focus:border-purple-500 focus:outline-none",placeholder:"Ask a question…",value:e,onChange:e=>s(e.target.value)}),(0,a.jsx)("button",{className:"px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors",onClick:()=>{l([{score:.89,text:"Our ICP are B2B SaaS startups…",labels:["icp","saas"]},{score:.74,text:"Competitors include HubSpot and Apollo…",labels:["competitive"]},{score:.66,text:"Success metrics: reply %, meetings/mo, ROI…",labels:["metrics"]}])},children:"Run"})]}),(0,a.jsx)("div",{className:"space-y-2 mt-3 max-h-72 overflow-auto",children:t.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 bg-gray-700 border border-gray-600 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[(0,a.jsx)("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-gray-800 text-white text-[10px]",children:(100*e.score).toFixed(0)}),(0,a.jsx)("span",{children:"score"})]}),(0,a.jsx)("div",{className:"text-sm mt-1 text-gray-300",children:e.text}),(0,a.jsx)("div",{className:"flex gap-2 mt-2 flex-wrap",children:e.labels.map(e=>(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs rounded bg-gray-600 text-gray-200",children:e},e))})]},s))})]})}let i=[{name:"ICP_SaaS.pdf",status:"Ready",uploaded:"10m ago",labels:["icp","saas"]},{name:"Competitors_2025.md",status:"Processing",uploaded:"2m ago",labels:["competitive"]},{name:"CaseStudy_Acme.pdf",status:"Error",uploaded:"1h ago",labels:[]}];function c(){return(0,a.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg",children:[(0,a.jsx)("div",{className:"px-4 py-3 border-b border-gray-700 font-semibold text-white",children:"Documents"}),(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-750 text-gray-400",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left px-4 py-2",children:"File Name"}),(0,a.jsx)("th",{className:"text-left px-4 py-2",children:"Status"}),(0,a.jsx)("th",{className:"text-left px-4 py-2",children:"Uploaded"}),(0,a.jsx)("th",{className:"text-left px-4 py-2",children:"Labels"}),(0,a.jsx)("th",{className:"text-right px-4 py-2",children:"Action"})]})}),(0,a.jsx)("tbody",{children:i.map(e=>(0,a.jsxs)("tr",{className:"border-t border-gray-700",children:[(0,a.jsx)("td",{className:"px-4 py-2 text-gray-300",children:e.name}),(0,a.jsxs)("td",{className:"px-4 py-2",children:["Ready"===e.status&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-green-400",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Ready"]}),"Processing"===e.status&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-yellow-400",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Processing"]}),"Error"===e.status&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-red-400",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-red-500"}),"Error"]})]}),(0,a.jsx)("td",{className:"px-4 py-2 text-gray-400",children:e.uploaded}),(0,a.jsx)("td",{className:"px-4 py-2",children:(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:e.labels.length?e.labels.map(e=>(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs rounded bg-gray-600 text-gray-200",children:e},e)):(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"—"})})}),(0,a.jsx)("td",{className:"px-4 py-2 text-right",children:(0,a.jsx)("button",{className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded transition-colors",children:"View Chunks"})})]},e.name))})]})]})}let o=[{text:"Our ICP: B2B SaaS, 50–200 employees, NA/EU, VP Sales/CRO…",labels:["icp","saas","vp_sales"],confidence:.92},{text:"Competitors: HubSpot, Apollo; we win on personalization at scale…",labels:["competitive"],confidence:.81}];function d(){let[e,s]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-gray-700 flex items-center justify-between",children:[(0,a.jsx)("div",{className:"font-semibold text-white",children:"Chunks"}),(0,a.jsx)("button",{className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded transition-colors",onClick:()=>s(!e),children:e?"Close":"Open"})]}),e&&(0,a.jsx)("div",{className:"p-4 space-y-3 max-h-72 overflow-auto",children:o.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 bg-gray-700 border border-gray-600 rounded",children:[(0,a.jsx)("div",{className:"text-sm text-gray-300",children:e.text}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2 flex-wrap",children:[e.labels.map(e=>(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs rounded bg-gray-600 text-gray-200",children:e},e)),(0,a.jsxs)("span",{className:"ml-auto text-xs text-gray-400",children:["conf: ",Math.round(100*e.confidence),"%"]})]})]},s))})]})}let m=()=>(0,a.jsxs)("div",{className:"flex-1 bg-gray-900 p-6 overflow-y-auto",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Knowledge Base"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Manage and search your knowledge documents"})]})}),(0,a.jsxs)("div",{className:"max-w-7xl space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(l,{}),(0,a.jsx)(n,{})]}),(0,a.jsx)(c,{}),(0,a.jsx)(d,{})]})]});var x=t(6485),p=t(1761),u=t(5899),h=t(3664),g=t(6983),b=t(1169),y=t(2987);let j=[{id:"1",type:"demo",subject:"Demo request from Acme Corp",from:"kevin@acme.com",time:"now",company:"Acme Corp",details:"Interested in our enterprise solution for 500+ employees"},{id:"2",type:"pricing",subject:"Pricing for 10k leads",from:"mara@beta.com",time:"5m",company:"Beta Systems",details:"Need pricing information for processing 10,000 leads monthly"},{id:"3",type:"support",subject:"Login issue",from:"ops@charlie.com",time:"10m",company:"Charlie Solutions",details:"Users unable to access dashboard since this morning"},{id:"4",type:"demo",subject:"Product walkthrough request",from:"sarah@deltatech.com",time:"1h",company:"Delta Tech",details:"Technical team wants to see API integration capabilities"}];function f(){let[e,s]=(0,r.useState)(j[0]),t=e=>{switch(e){case"demo":return x.A;case"pricing":return p.A;case"support":return u.A;default:return h.A}},l=e=>{switch(e){case"demo":return"text-green-400 bg-green-900/20";case"pricing":return"text-blue-400 bg-blue-900/20";case"support":return"text-orange-400 bg-orange-900/20";default:return"text-gray-400 bg-gray-900/20"}};return(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[(0,a.jsxs)("div",{className:"lg:col-span-1 bg-gray-800 border border-gray-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"border-b border-gray-700 p-4",children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:"Inbound Requests"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Recent inquiries and requests"})]}),(0,a.jsx)("div",{className:"divide-y divide-gray-700 max-h-96 overflow-y-auto",children:j.map(r=>{let n=t(r.type),i=r.id===e.id;return(0,a.jsx)("div",{onClick:()=>s(r),className:"p-4 cursor-pointer transition-colors ".concat(i?"bg-purple-900/30 border-l-4 border-l-purple-500":"hover:bg-gray-700"),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(l(r.type)),children:(0,a.jsx)(n,{size:16})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-xs uppercase font-medium ".concat(l(r.type).split(" ")[0]),children:r.type}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-400",children:[(0,a.jsx)(g.A,{size:12,className:"mr-1"}),r.time]})]}),(0,a.jsx)("h4",{className:"text-sm text-white font-medium truncate mb-1",children:r.subject}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 truncate",children:[r.from," • ",r.company]})]})]})},r.id)})})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 bg-gray-800 border border-gray-700 rounded-lg",children:[(0,a.jsx)("div",{className:"border-b border-gray-700 p-4",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(l(e.type)),children:r.createElement(t(e.type),{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xs uppercase font-medium ".concat(l(e.type).split(" ")[0]),children:e.type}),(0,a.jsx)("h2",{className:"text-white font-semibold",children:e.subject})]})]})})}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"From:"}),(0,a.jsx)("span",{className:"text-white",children:e.from})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Company:"}),(0,a.jsx)("span",{className:"text-white",children:e.company})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Time:"}),(0,a.jsx)("span",{className:"text-white",children:e.time})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-white font-medium mb-2",children:"Details"}),(0,a.jsx)("div",{className:"bg-gray-700 rounded-lg p-4",children:(0,a.jsx)("p",{className:"text-gray-300 text-sm",children:e.details})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 pt-4 border-t border-gray-700",children:["demo"===e.type&&(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(x.A,{size:16}),"Send Calendar Link"]}),"pricing"===e.type&&(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(p.A,{size:16}),"Send Pricing Sheet"]}),"support"===e.type&&(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(u.A,{size:16}),"Route to Support"]}),(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-600 hover:bg-gray-700 text-gray-300 rounded-lg transition-colors",children:[(0,a.jsx)(b.A,{size:16}),"Create Callback"]}),(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-600 hover:bg-gray-700 text-gray-300 rounded-lg transition-colors",children:[(0,a.jsx)(y.A,{size:16}),"Escalate to AE"]})]})]})]})]})}let v=()=>(0,a.jsxs)("div",{className:"flex-1 bg-gray-900 p-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Contact Center"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Manage inbound requests and customer communications"})]}),(0,a.jsx)("div",{className:"h-[calc(100vh-200px)]",children:(0,a.jsx)(f,{})})]});var N=t(3511),w=t(5921),k=t(33),C=t(6191);let S=[{id:"c1",name:"VP Sales (SaaS, NA)",status:"draft",sent:0,opened:0,replied:0},{id:"c2",name:"Founders (Consulting, EU)",status:"active",sent:47,opened:23,replied:5},{id:"c3",name:"CTOs (Fintech, Global)",status:"paused",sent:132,opened:61,replied:12}];function A(){return(0,a.jsx)("div",{className:"space-y-3",children:S.map(e=>(0,a.jsxs)("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:e.name}),(0,a.jsx)("span",{className:"text-xs uppercase px-2 py-1 rounded ".concat((e=>{switch(e){case"active":return"text-green-400 bg-green-900/20";case"paused":return"text-yellow-400 bg-yellow-900/20";default:return"text-gray-400 bg-gray-900/20"}})(e.status)),children:e.status})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:["active"===e.status?(0,a.jsx)("button",{className:"p-2 text-yellow-400 hover:bg-gray-700 rounded",children:(0,a.jsx)(N.A,{size:16})}):(0,a.jsx)("button",{className:"p-2 text-green-400 hover:bg-gray-700 rounded",children:(0,a.jsx)(w.A,{size:16})}),(0,a.jsx)("button",{className:"p-2 text-blue-400 hover:bg-gray-700 rounded",children:(0,a.jsx)(k.A,{size:16})})]})]}),"draft"!==e.status&&(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-white font-medium",children:e.sent}),(0,a.jsx)("div",{className:"text-gray-400",children:"Sent"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-white font-medium",children:e.opened}),(0,a.jsx)("div",{className:"text-gray-400",children:"Opened"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-white font-medium",children:e.replied}),(0,a.jsx)("div",{className:"text-gray-400",children:"Replied"})]})]})]},e.id))})}function I(){let[e,s]=(0,r.useState)("Outbound – VP Sales (SaaS, NA)"),t=async()=>{alert("Created draft campaign: ".concat(e))};return(0,a.jsxs)("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-white",children:"New Campaign"}),(0,a.jsx)("input",{className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-purple-500 focus:outline-none",value:e,onChange:e=>s(e.target.value),placeholder:"Campaign name..."}),(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"Create Draft"})]})}let _=()=>{let[e,s]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"flex-1 bg-gray-900 p-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Campaign Hub"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Design, approve, and launch marketing campaigns"})]}),(0,a.jsxs)("button",{onClick:()=>s(!e),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(C.A,{size:16}),"New Campaign"]})]}),(0,a.jsxs)("div",{className:"max-w-4xl space-y-6",children:[e&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(I,{})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Active Campaigns"}),(0,a.jsx)(A,{})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8",children:[(0,a.jsx)("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(h.A,{size:24,className:"text-blue-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:"179"}),(0,a.jsx)("div",{className:"text-gray-400 text-sm",children:"Total Sent"})]})]})}),(0,a.jsx)("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(k.A,{size:24,className:"text-green-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:"84"}),(0,a.jsx)("div",{className:"text-gray-400 text-sm",children:"Opened"})]})]})}),(0,a.jsx)("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(b.A,{size:24,className:"text-purple-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:"17"}),(0,a.jsx)("div",{className:"text-gray-400 text-sm",children:"Replies"})]})]})})]})]})]})},z=["Prospects","Qualified","Opportunities","Closed"],E={Prospects:[{id:"p1",name:"Acme Inc."},{id:"p2",name:"Beta LLC"}],Qualified:[{id:"q1",name:"CoreTech"}],Opportunities:[{id:"o1",name:"DeltaWorks"}],Closed:[{id:"c1",name:"Everest"}]};function P(){let[e,s]=(0,r.useState)(E);return(0,a.jsx)("div",{className:"grid grid-cols-4 gap-4",children:z.map(t=>{var r;return(0,a.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"font-semibold mb-4 text-white text-center",children:t}),(0,a.jsx)("div",{className:"space-y-3",children:null==(r=e[t])?void 0:r.map((r,l)=>(0,a.jsxs)("div",{className:"p-3 bg-gray-700 border border-gray-600 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-white font-medium mb-2",children:r.name}),(0,a.jsx)("div",{className:"flex gap-1 flex-wrap",children:z.filter(e=>e!==t).map(r=>(0,a.jsx)("button",{onClick:()=>((t,a,r)=>{let l=e[t][r],n={...e};n[t]=n[t].filter((e,s)=>s!==r),n[a]=[...n[a],l],s(n)})(t,r,l),className:"px-2 py-1 bg-gray-600 hover:bg-gray-500 text-gray-200 rounded text-xs transition-colors",children:r},r))})]},r.id))})]},t)})})}let D=()=>(0,a.jsxs)("div",{className:"flex-1 bg-gray-900 p-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Lead Pipeline"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Track prospects from discovery to opportunities"})]}),(0,a.jsx)("div",{className:"max-w-7xl",children:(0,a.jsx)(P,{})})]});function L(){return(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Readiness",value:"82%"},{label:"Reply Rate",value:"9.8%"},{label:"Meetings / Mo",value:"34"},{label:"ROI (90d)",value:"9.6x"}].map(e=>(0,a.jsxs)("div",{className:"p-6 bg-gray-800 border border-gray-700 rounded-lg",children:[(0,a.jsx)("div",{className:"text-xs uppercase text-gray-400 mb-2",children:e.label}),(0,a.jsx)("div",{className:"text-3xl font-semibold text-white",children:e.value})]},e.label))})}let T=()=>(0,a.jsxs)("div",{className:"flex-1 bg-gray-900 p-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Analytics"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Performance metrics, insights, and optimization recommendations"})]}),(0,a.jsx)("div",{className:"max-w-6xl",children:(0,a.jsx)(L,{})})]});var U=t(4485),O=t(6046),M=t(5229),F=t(6651),R=t(7107),W=t(5937),q=t(1360),B=t(7726);let J=["qualified","demo-scheduled","proposal-sent","negotiation","closed-won","closed-lost","fintech","healthcare","enterprise","startup","saas","manufacturing","hot-lead","warm-lead","cold-lead","follow-up-needed","decision-maker","influencer","linkedin","referral","cold-outreach","inbound","webinar","conference","prospect-research","company-analysis","competitor-intel","market-research","meddic","spin","challenger","discovery","objection-handling"];function H(e){let{currentTags:s=[],onTagsChange:t,suggestedTags:l=J,className:n="",maxTags:i=10,placeholder:c="Add tags..."}=e,[o,d]=(0,r.useState)(!1),[m,x]=(0,r.useState)(""),[p,u]=(0,r.useState)([]),h=(0,r.useRef)(null),g=(0,r.useRef)(null);(0,r.useEffect)(()=>{m.trim()?u(l.filter(e=>e.toLowerCase().includes(m.toLowerCase())&&!s.includes(e)).slice(0,8)):u(l.filter(e=>!s.includes(e)).slice(0,8))},[m,s,l]),(0,r.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&(d(!1),x(""))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let b=e=>{let a=e.trim().toLowerCase();a&&!s.includes(a)&&s.length<i&&(t([...s,a]),x(""),d(!1))},y=e=>{t(s.filter(s=>s!==e))};return(0,a.jsxs)("div",{ref:g,className:"relative ".concat(n),children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:s.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(["hot-lead","decision-maker","qualified"].includes(e)?"bg-red-100 text-red-800":["warm-lead","demo-scheduled","follow-up-needed"].includes(e)?"bg-orange-100 text-orange-800":["cold-lead","prospect-research"].includes(e)?"bg-blue-100 text-blue-800":["closed-won","proposal-sent"].includes(e)?"bg-green-100 text-green-800":["linkedin","referral","inbound"].includes(e)?"bg-purple-100 text-purple-800":["meddic","spin","challenger"].includes(e)?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"),children:[(0,a.jsx)(R.A,{size:12,className:"mr-1"}),e,(0,a.jsx)("button",{onClick:()=>y(e),className:"ml-1 hover:bg-black hover:bg-opacity-20 rounded-full p-0.5",children:(0,a.jsx)(M.A,{size:12})})]},e))}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)("input",{ref:h,type:"text",value:m,onChange:e=>x(e.target.value),onKeyDown:e=>{switch(e.key){case"Enter":e.preventDefault(),m.trim()&&b(m);break;case"Escape":d(!1),x("");break;case"Backspace":!m&&s.length>0&&y(s[s.length-1])}},onFocus:()=>d(!0),placeholder:s.length>=i?"Max ".concat(i," tags reached"):c,disabled:s.length>=i,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed"}),(0,a.jsx)(B.A,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400"})]}),m.trim()&&(0,a.jsx)("button",{onClick:()=>b(m),className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:(0,a.jsx)(C.A,{size:16})})]}),o&&p.length>0&&(0,a.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-gray-500 mb-2",children:"Suggested tags:"}),(0,a.jsx)("div",{className:"space-y-1",children:p.map(e=>(0,a.jsxs)("button",{onClick:()=>b(e),className:"w-full text-left px-2 py-1 text-sm hover:bg-gray-100 rounded flex items-center space-x-2",children:[(0,a.jsx)(R.A,{size:12,className:"text-gray-400"}),(0,a.jsx)("span",{children:e})]},e))})]})})]}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[s.length,"/",i," tags"]})]})}function K(e){let{isOpen:s,onClose:t,currentMessages:l,onLoadConversation:n,className:i=""}=e,{threads:c,isLoading:o,loadThreads:d,createThread:m,deleteThread:x}=function(){let[e,s]=(0,r.useState)([]),[t,a]=(0,r.useState)(null),[l,n]=(0,r.useState)([]),[i,c]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!1),[m,x]=(0,r.useState)(null),p=(0,r.useCallback)(async e=>{try{var t;c(!0),x(null);let a=new URLSearchParams;(null==e?void 0:e.thread_type)&&a.append("type",e.thread_type),(null==e?void 0:e.status)&&a.append("status",e.status),(null==e?void 0:e.priority)&&a.append("priority",e.priority),(null==e?void 0:e.search)&&a.append("search",e.search),(null==e||null==(t=e.tags)?void 0:t.length)&&a.append("tags",e.tags.join(","));let r=await fetch("/api/sam/threads?".concat(a));if(!r.ok){if(401===r.status||403===r.status){console.log("\uD83D\uDCA1 User not authenticated, skipping thread load"),s([]);return}throw Error("Failed to load conversation threads")}let l=await r.json();s(l.threads||[])}catch(e){console.error("\uD83D\uDCA5 Load threads error:",e),x(e instanceof Error?e.message:"Unknown error")}finally{c(!1)}},[]),u=(0,r.useCallback)(async e=>{try{c(!0);let s=await fetch("/api/sam/threads/".concat(e,"/messages"));if(!s.ok)throw Error("Failed to load thread messages");let t=await s.json();n(t.messages||[])}catch(e){x(e instanceof Error?e.message:"Unknown error")}finally{c(!1)}},[]),h=(0,r.useCallback)(async e=>{try{c(!0);let t=await fetch("/api/sam/threads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create thread: ".concat(t.status));let r=(await t.json()).thread;return s(e=>[r,...e]),a(r),n([]),r}catch(e){return x(e instanceof Error?e.message:"Unknown error"),null}finally{c(!1)}},[]),g=(0,r.useCallback)(async(e,s,t)=>{let a=s&&t?"".concat(s," - ").concat(t):"LinkedIn Research - ".concat(new Date().toLocaleDateString());return await h({title:a,thread_type:"linkedin_research",prospect_name:s,prospect_company:t,prospect_linkedin_url:e,tags:["linkedin","prospect-research"],priority:"medium",sales_methodology:"meddic"})},[h]),b=(0,r.useCallback)(async(e,a)=>{if(!e.trim())return null;let r=t,l=e.match(/https?:\/\/(www\.)?linkedin\.com\/in\/[^\s]+/gi);if(l&&!r&&(console.log("\uD83D\uDD17 LinkedIn URL detected, creating research thread..."),!(r=await g(l[0])))||!r&&!(r=await h({title:"Chat - ".concat(new Date().toLocaleDateString()),thread_type:"general",priority:"medium",sales_methodology:"meddic"})))return null;let i=a||r.id;try{d(!0);let t=await fetch("/api/sam/threads/".concat(i,"/messages"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})});if(!t.ok){let e=await t.text();throw Error("Failed to send message: ".concat(t.status," - ").concat(e))}let a=await t.json();return a.userMessage&&a.samMessage&&(n(e=>[...e,a.userMessage,a.samMessage]),s(e=>e.map(e=>e.id===i?{...e,last_user_message:a.userMessage.content,last_sam_message:a.samMessage.content,message_count:e.message_count+2,last_active_at:new Date().toISOString()}:e))),a}catch(e){return console.error("\uD83D\uDCA5 SendMessage error:",e),x(e instanceof Error?e.message:"Unknown error"),null}finally{d(!1)}},[t,h,g]),y=(0,r.useCallback)(async e=>{a(e),await u(e.id)},[u]),j=(0,r.useCallback)(async(e,r)=>{try{let l=await fetch("/api/sam/threads/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!l.ok)throw Error("Failed to update thread");let n=(await l.json()).thread;return s(s=>s.map(s=>s.id===e?n:s)),(null==t?void 0:t.id)===e&&a(n),n}catch(e){return x(e instanceof Error?e.message:"Unknown error"),null}},[t]),f=(0,r.useCallback)(async e=>await j(e,{status:"archived"}),[j]),v=(0,r.useCallback)(async e=>{try{if(!(await fetch("/api/sam/threads/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete thread");return s(s=>s.filter(s=>s.id!==e)),(null==t?void 0:t.id)===e&&(a(null),n([])),!0}catch(e){return x(e instanceof Error?e.message:"Unknown error"),!1}},[t]),N=(0,r.useCallback)(()=>e.reduce((e,s)=>(e[s.thread_type]||(e[s.thread_type]=[]),e[s.thread_type].push(s),e),{}),[e]),w=(0,r.useCallback)(function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return e.filter(e=>"active"===e.status).sort((e,s)=>new Date(s.last_active_at).getTime()-new Date(e.last_active_at).getTime()).slice(0,s)},[e]);return{threads:e,currentThread:t,messages:l,isLoading:i,isSending:o,error:m,loadThreads:p,loadMessages:u,createThread:h,createLinkedInThread:g,sendMessage:b,switchToThread:y,updateThread:j,archiveThread:f,deleteThread:v,getThreadsByType:N,getRecentThreads:w,clearError:()=>x(null)}}(),[p,u]=(0,r.useState)(""),[h,b]=(0,r.useState)([]),[y,j]=(0,r.useState)(!1),[f,v]=(0,r.useState)({title:"",tags:[],priority:"medium"});(0,r.useEffect)(()=>{s&&d()},[s,d]);let N=c.filter(e=>{var s,t,a;if(p){let a=p.toLowerCase();if(!e.title.toLowerCase().includes(a)&&!(null==(s=e.prospect_name)?void 0:s.toLowerCase().includes(a))&&!(null==(t=e.tags)?void 0:t.some(e=>e.toLowerCase().includes(a))))return!1}return(!(h.length>0)||!!(null==(a=e.tags)?void 0:a.some(e=>h.includes(e))))&&!0}),w=Array.from(new Set(c.flatMap(e=>e.tags||[]))),k=async()=>{if(0===l.length)return void alert("No conversation to save");if(!f.title.trim())return void alert("Please enter a title for the conversation");try{if(await m({title:f.title,thread_type:"general",priority:f.priority,tags:f.tags})){for(let e of l);alert("Conversation saved successfully!"),j(!1),v({title:"",tags:[],priority:"medium"}),d()}}catch(e){console.error("Failed to save conversation:",e),alert("Failed to save conversation")}},C=async e=>{try{let s=await fetch("/api/sam/threads/".concat(e.id,"/messages"));if(!s.ok)throw Error("Failed to load thread messages");let a=(await s.json()).messages||[];a.length>0?(n(a),t()):alert("No messages found in this conversation")}catch(e){console.error("Failed to load conversation:",e),alert("Failed to load conversation")}},S=async(e,s)=>{if(confirm('Are you sure you want to delete "'.concat(s,'"? This cannot be undone.')))try{await x(e),d()}catch(e){console.error("Failed to delete thread:",e),alert("Failed to delete conversation")}};return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl h-[80vh] flex flex-col ".concat(i),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(U.A,{className:"text-purple-400",size:24}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Conversation History"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[l.length>0&&(0,a.jsxs)("button",{onClick:()=>j(!0),className:"flex items-center space-x-2 px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(O.A,{size:16}),(0,a.jsx)("span",{children:"Save Current"})]}),(0,a.jsx)("button",{onClick:t,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:(0,a.jsx)(M.A,{size:20})})]})]}),(0,a.jsxs)("div",{className:"p-4 border-b border-gray-700 space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(F.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search conversations...",value:p,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),w.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400 self-center",children:"Filter by tags:"}),w.slice(0,10).map(e=>(0,a.jsxs)("button",{onClick:()=>{b(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium transition-colors ".concat(h.includes(e)?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:[(0,a.jsx)(R.A,{size:10,className:"mr-1"}),e]},e))]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:o?(0,a.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Loading conversations..."}):0===N.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(W.A,{className:"mx-auto mb-4 text-gray-600",size:48}),(0,a.jsx)("p",{className:"text-gray-400",children:p||h.length>0?"No conversations match your filters.":"No saved conversations yet."}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Start chatting and save important conversations to access them later."})]}):(0,a.jsx)("div",{className:"space-y-3",children:N.map(e=>(0,a.jsx)("div",{className:"bg-gray-700 rounded-lg p-4 hover:bg-gray-600 transition-colors group",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("h3",{className:"text-white font-medium truncate",children:e.title}),(0,a.jsx)("span",{className:"text-xs ".concat((e=>{switch(e){case"urgent":return"text-red-400";case"high":return"text-orange-400";case"medium":return"text-blue-400";default:return"text-gray-400"}})(e.priority)),children:e.priority})]}),e.prospect_name&&(0,a.jsxs)("p",{className:"text-sm text-gray-300 mb-2",children:[e.prospect_name,e.prospect_company&&" • ".concat(e.prospect_company)]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-400 mb-2",children:[(0,a.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,a.jsx)(g.A,{size:12}),(0,a.jsx)("span",{children:(e=>{let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/36e5),a=Math.floor(t/24);return t<1?"Just now":t<24?"".concat(t,"h ago"):a<7?"".concat(a,"d ago"):s.toLocaleDateString()})(e.last_active_at)})]}),(0,a.jsxs)("span",{children:[e.message_count," messages"]})]}),e.tags&&e.tags.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,4).map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-gray-600 text-gray-300 rounded text-xs",children:[(0,a.jsx)(R.A,{size:8,className:"mr-1"}),e]},e)),e.tags.length>4&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.tags.length-4]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("button",{onClick:()=>C(e),className:"px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded transition-colors",children:"Load"}),(0,a.jsx)("button",{onClick:()=>S(e.id,e.title),className:"p-1 text-gray-400 hover:text-red-400 transition-colors",children:(0,a.jsx)(q.A,{size:14})})]})]})},e.id))})}),y&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Save Conversation"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),(0,a.jsx)("input",{type:"text",value:f.title,onChange:e=>v(s=>({...s,title:e.target.value})),placeholder:"Enter conversation title...",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Priority"}),(0,a.jsxs)("select",{value:f.priority,onChange:e=>v(s=>({...s,priority:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"}),(0,a.jsx)("option",{value:"urgent",children:"Urgent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tags"}),(0,a.jsx)(H,{currentTags:f.tags,onTagsChange:e=>v(s=>({...s,tags:e})),maxTags:5,className:"text-sm"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,a.jsx)("button",{onClick:k,className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-lg transition-colors",children:"Save"}),(0,a.jsx)("button",{onClick:()=>j(!1),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded-lg transition-colors",children:"Cancel"})]})]})})]})}):null}function V(e){let{isOpen:s,onClose:t,title:r,children:l,size:n="md",showCloseButton:i=!0,className:c=""}=e;return s?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-900/90 backdrop-blur-md",onClick:t}),(0,a.jsxs)("div",{className:"\n        relative w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[n]," mx-4 \n        bg-gray-800 rounded-lg border border-gray-600\n        shadow-xl shadow-black/30\n        transform transition-all duration-300 ease-out\n        ").concat(c,"\n      "),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-600 bg-gray-700/50",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:r}),i&&(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-200 transition-colors p-2 rounded-md hover:bg-gray-700",children:(0,a.jsx)(M.A,{size:18})})]}),(0,a.jsx)("div",{className:"p-6",children:l})]})]}):null}function G(e){let{isOpen:s,onClose:t,title:r,children:l,onSubmit:n,submitText:i="Submit",submitDisabled:c=!1,size:o="md"}=e;return(0,a.jsx)(V,{isOpen:s,onClose:t,title:r,size:o,children:(0,a.jsxs)("form",{onSubmit:n,className:"space-y-6",children:[l,(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-600",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"px-6 py-2 text-gray-300 bg-gray-600 hover:bg-gray-500 rounded-lg transition-colors font-medium",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors font-medium",children:i})]})]})})}function Y(e){let{label:s,type:t="text",value:r,onChange:l,placeholder:n,required:i=!1,disabled:c=!1,error:o}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[s,i&&(0,a.jsx)("span",{className:"text-red-400 ml-1",children:"*"})]}),(0,a.jsx)("input",{type:t,value:r,onChange:e=>l(e.target.value),placeholder:n,required:i,disabled:c,className:"\n          w-full px-3 py-2 bg-gray-700 text-white rounded-lg border border-gray-600\n          focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\n          disabled:bg-gray-800 disabled:cursor-not-allowed\n          ".concat(o?"border-red-500 focus:ring-red-500":"","\n        ")}),o&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-400",children:o})]})}function Q(e){let{label:s,value:t,onChange:r,options:l,required:n=!1,disabled:i=!1,error:c}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[s,n&&(0,a.jsx)("span",{className:"text-red-400 ml-1",children:"*"})]}),(0,a.jsx)("select",{value:t,onChange:e=>r(e.target.value),required:n,disabled:i,className:"\n          w-full px-3 py-2 bg-gray-700 text-white rounded-lg border border-gray-600\n          focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\n          disabled:bg-gray-800 disabled:cursor-not-allowed\n          ".concat(c?"border-red-500 focus:ring-red-500":"","\n        "),children:l.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),c&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-400",children:c})]})}var X=t(9408);function Z(e){var s,t,l;let{isOpen:n,onClose:i,onSubmit:c,workspaces:o=[]}=e,[d,m]=(0,r.useState)({email:"",firstName:"",lastName:"",company:"InnovareAI",role:"member",workspaceId:""}),[x,p]=(0,r.useState)(!1),[u,g]=(0,r.useState)({}),b=async e=>{if(e.preventDefault(),(()=>{let e={};return d.email.trim()?/\S+@\S+\.\S+/.test(d.email)||(e.email="Invalid email format"):e.email="Email is required",d.firstName.trim()||(e.firstName="First name is required"),d.lastName.trim()||(e.lastName="Last name is required"),d.workspaceId||(e.workspaceId="Workspace selection is required"),g(e),0===Object.keys(e).length})()){p(!0);try{await c(d),m({email:"",firstName:"",lastName:"",company:"InnovareAI",role:"member",workspaceId:""}),g({}),i()}catch(e){console.error("Invitation failed:",e)}finally{p(!1)}}};console.log("\uD83D\uDCCB InviteUserPopup received workspaces:",(null==o?void 0:o.length)||0),console.log("\uD83D\uDCCB Workspace names in invite popup:",(null==o?void 0:o.map(e=>e.name))||[]);let y=null==o?void 0:o.find(e=>e.id===d.workspaceId),j=y&&("3cubed"===y.slug||"3cubedai"===y.slug||(null==(s=y.slug)?void 0:s.toLowerCase().includes("3cubed"))||"3cubed"===y.name||"3CubedAI"===y.name||(null==(t=y.name)?void 0:t.toLowerCase().includes("3cubed"))||(null==(l=y.name)?void 0:l.toLowerCase().includes("3 cubed"))||"3cubedai"===y.company||"3CubedAI"===y.company||(null==y?void 0:y.tenant)==="3cubedai"||(null==y?void 0:y.tenant)==="3CubedAI"),f=j?"3cubedai":"InnovareAI";console.log("\uD83D\uDD0D Workspace Detection Debug:",{selectedWorkspaceId:d.workspaceId,selectedWorkspace:y,is3CubedWorkspace:j,detectedCompany:f,currentCompany:d.company}),(0,r.useEffect)(()=>{d.workspaceId&&y&&d.company!==f&&(console.log("\uD83D\uDD04 Auto-updating company from",d.company,"to",f,"for workspace:",y.name),m(e=>({...e,company:f})))},[d.workspaceId,f]);let v=[{value:"",label:"Select a workspace..."},...o.map(e=>({value:e.id,label:"".concat(e.name).concat(e.company?" (".concat(e.company,")"):e.slug?" (".concat(e.slug,")"):"")}))];return(0,a.jsxs)(G,{isOpen:n,onClose:()=>{x||(m({email:"",firstName:"",lastName:"",company:"InnovareAI",role:"member",workspaceId:""}),g({}),i())},title:"Invite User to SAM AI",onSubmit:b,submitText:x?"Sending Invitation...":"Send Invitation",submitDisabled:x,size:"md",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(h.A,{className:"text-white",size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-white",children:"Send Invitation"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Invite a new user to join your SAM AI workspace"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(Y,{label:"First Name",value:d.firstName,onChange:e=>m({...d,firstName:e}),placeholder:"John",required:!0,disabled:x,error:u.firstName}),(0,a.jsx)(Y,{label:"Last Name",value:d.lastName,onChange:e=>m({...d,lastName:e}),placeholder:"Doe",required:!0,disabled:x,error:u.lastName})]}),(0,a.jsx)(Y,{label:"Email Address",type:"email",value:d.email,onChange:e=>m({...d,email:e}),placeholder:"john.doe@company.com",required:!0,disabled:x,error:u.email}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(Q,{label:"Company",value:d.company,onChange:e=>m({...d,company:e}),options:[{value:"InnovareAI",label:"InnovareAI"},{value:"3cubedai",label:"3CubedAI"}],required:!0,disabled:x}),(0,a.jsx)(Q,{label:"Role",value:d.role,onChange:e=>m({...d,role:e}),options:[{value:"member",label:"Member"},{value:"admin",label:"Admin"},{value:"owner",label:"Owner"}],required:!0,disabled:x})]}),(0,a.jsx)(Q,{label:"Target Workspace",value:d.workspaceId||"",onChange:e=>m({...d,workspaceId:e}),options:v,required:!0,disabled:x,error:u.workspaceId}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-gray-700 rounded-lg",children:[(0,a.jsx)(X.A,{size:16,className:"text-gray-400"}),(0,a.jsxs)("span",{className:"text-sm text-gray-300",children:["Email will be sent from:"," ",(0,a.jsx)("span",{className:"font-medium ".concat("InnovareAI"===d.company?"text-blue-400":"text-green-400"),children:"InnovareAI"===d.company?"sp@innovareai.com (Sarah Powell)":"sophia@3cubed.ai (Sophia)"})]})]})]})]})}var $=t(8760),ee=t(508),es=t(9708),et=t(532),ea=t(7828);function er(e){let{isOpen:s,onClose:t,initialMode:l="signin"}=e,[n,i]=(0,r.useState)(l),[c,o]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),[x,p]=(0,r.useState)(""),[u,g]=(0,r.useState)(""),[b,y]=(0,r.useState)(!1),[j,f]=(0,r.useState)(!1),[v,N]=(0,r.useState)(""),[w,k]=(0,r.useState)("");if((0,$.createClientComponentClient)(),r.useEffect(()=>{s&&(o(""),m(""),p(""),g(""),N(""),k(""),f(!1))},[s,n]),!s)return null;let C=async e=>{e.preventDefault(),f(!0),N(""),k("");try{let e=await fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:d})}),s=await e.json();e.ok?(k("Sign-in successful! Redirecting..."),setTimeout(()=>{window.location.reload()},1e3)):N(s.error||"Sign-in failed")}catch(e){N("Network error. Please try again.")}finally{f(!1)}},S=async e=>{e.preventDefault(),f(!0),N(""),k("");try{let e=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:d,firstName:x||void 0,lastName:u||void 0})}),s=await e.json();e.ok?(k("Account created! Please check your email to verify your account."),setTimeout(()=>{i("signin")},2e3)):N(s.error||"Sign-up failed")}catch(e){N("Network error. Please try again.")}finally{f(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"relative p-6 pb-4",children:[(0,a.jsx)("button",{onClick:t,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-200 transition-colors",children:(0,a.jsx)(M.A,{size:24})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("img",{src:"/SAM.jpg",alt:"SAM AI",className:"w-20 h-20 rounded-full object-cover mx-auto mb-4 shadow-lg",style:{objectPosition:"center 30%"}}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"signin"===n?"Welcome Back":"Join SAM AI"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"signin"===n?"Sign in to your Sales Assistant Platform":"Create your SAM AI account"})]})]}),(0,a.jsx)("div",{className:"px-6 pb-6",children:(0,a.jsxs)("form",{onSubmit:"signin"===n?C:S,className:"space-y-4",children:["signup"===n&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-300 mb-2",children:"First Name"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(ee.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),(0,a.jsx)("input",{type:"text",id:"firstName",value:x,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"John"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Last Name"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(ee.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),(0,a.jsx)("input",{type:"text",id:"lastName",value:u,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Doe"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),(0,a.jsx)("input",{type:"email",id:"email",value:c,onChange:e=>o(e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your email"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(es.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),(0,a.jsx)("input",{type:b?"text":"password",id:"password",value:d,onChange:e=>m(e.target.value),required:!0,minLength:6,className:"w-full pl-10 pr-12 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"signup"===n?"Create a password (min 6 chars)":"Enter your password"}),(0,a.jsx)("button",{type:"button",onClick:()=>y(!b),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-200 transition-colors",children:b?(0,a.jsx)(et.A,{size:18}):(0,a.jsx)(ea.A,{size:18})})]})]}),v&&(0,a.jsx)("div",{className:"p-3 bg-red-600 bg-opacity-20 border border-red-500 rounded-lg text-red-400 text-sm",children:v}),w&&(0,a.jsx)("div",{className:"p-3 bg-green-600 bg-opacity-20 border border-green-500 rounded-lg text-green-400 text-sm",children:w}),(0,a.jsx)("button",{type:"submit",disabled:j||!c||!d,className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 disabled:from-purple-400 disabled:to-purple-500 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 transform hover:scale-105 disabled:scale-100 disabled:cursor-not-allowed",children:j?"signin"===n?"Signing in...":"Creating account...":"signin"===n?"Sign In":"Create Account"}),(0,a.jsxs)("div",{className:"text-center pt-4 border-t border-gray-700",children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm mb-3",children:"signin"===n?"Don't have an account?":"Already have an account?"}),(0,a.jsx)("button",{type:"button",onClick:()=>{i("signin"===n?"signup":"signin"),N(""),k("")},disabled:j,className:"text-purple-400 hover:text-purple-300 font-medium transition-colors disabled:opacity-50",children:"signin"===n?"Create an account":"Sign in instead"})]}),"signin"===n&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("button",{type:"button",onClick:()=>{alert("Password reset functionality will be implemented")},className:"text-purple-400 hover:text-purple-300 text-sm transition-colors",children:"Forgot your password?"})})]})})]})})}var el=t(8446),en=t(403),ei=t(1524),ec=t(6583),eo=t(7910),ed=t(5870),em=t(4926),ex=t(7333),ep=t(4285),eu=t(8085);function eh(){var e,s;let t=(0,$.createClientComponentClient)(),l=async()=>{if(null==c?void 0:c.access_token)return c.access_token;try{let{data:{session:e}}=await t.auth.getSession();if(e)return o(e),e.access_token}catch(e){console.error("Error getting session:",e)}return null},[n,i]=(0,r.useState)(null),[c,o]=(0,r.useState)(null),[d,x]=(0,r.useState)(!0),[p,u]=(0,r.useState)(!0),[g,y]=(0,r.useState)(""),[j,f]=(0,r.useState)("chat"),[N,w]=(0,r.useState)([]),[C,S]=(0,r.useState)(!1),[A,I]=(0,r.useState)(!1),[z,E]=(0,r.useState)(!1),[P,L]=(0,r.useState)({password:"",confirmPassword:"",loading:!1}),[O,M]=(0,r.useState)(!1),F=(0,r.useRef)(null),[R,q]=(0,r.useState)([]),[B,J]=(0,r.useState)(!1),[H,V]=(0,r.useState)(""),[G,Y]=(0,r.useState)(!1),[Q,es]=(0,r.useState)(!1),[et,ea]=(0,r.useState)(!1),[eh,eg]=(0,r.useState)("InnovareAI"),[eb,ey]=(0,r.useState)(!1),[ej,ef]=(0,r.useState)(new Set),[ev,eN]=(0,r.useState)(!1),[ew,ek]=(0,r.useState)(""),[eC,eS]=(0,r.useState)(null),[eA,eI]=(0,r.useState)(!1),[e_,ez]=(0,r.useState)("signin"),[eE,eP]=(0,r.useState)(!1),[eD,eL]=(0,r.useState)([]),[eT,eU]=(0,r.useState)(!1),[eO,eM]=(0,r.useState)(null),[eF,eR]=(0,r.useState)(new Set),[eW,eq]=(0,r.useState)(!1),[eB,eJ]=(0,r.useState)(!1),[eH,eK]=(0,r.useState)(!1),eV=e=>["tl@innovareai.com","cl@innovareai.com"].includes(e.toLowerCase());(0,r.useEffect)(()=>{(async()=>{try{let{data:{user:e}}=await t.auth.getUser();if(console.log("Auth check result:",e?"authenticated":"not authenticated"),i(e),e){let{data:{session:s}}=await t.auth.getSession();o(s);let a=eV(e.email||"");es(a),await eZ(e.id,a)}else o(null)}catch(e){console.error("Error getting user:",e),i(null),o(null)}finally{x(!1)}})();let{data:{subscription:e}}=t.auth.onAuthStateChange((e,s)=>{if(console.log("Auth state change:",e,(null==s?void 0:s.user)?"user present":"no user"),"SIGNED_OUT"===e?(console.log("\uD83E\uDDE0 MEMORY: Auth state change - user signed out, clearing messages"),w([]),u(!0),localStorage.removeItem("sam_messages")):console.log("\uD83E\uDDE0 MEMORY: Auth state change - preserving conversation history"),i((null==s?void 0:s.user)||null),o(s),null==s?void 0:s.user){let e=eV(s.user.email||"");es(e),eZ(s.user.id,e)}x(!1)});return()=>{e.unsubscribe()}},[]),(0,r.useEffect)(()=>{"true"===new URLSearchParams(window.location.search).get("change-password")&&(E(!0),window.history.replaceState({},document.title,window.location.pathname))},[]),(0,r.useEffect)(()=>{{let e=localStorage.getItem("sam_messages");if(e)try{let s=JSON.parse(e);Array.isArray(s)&&s.length>0&&(w(s),u(!1))}catch(e){console.error("Error loading saved messages:",e)}let s=localStorage.getItem("sam_active_menu");s&&f(s),I(!0)}},[]),(0,r.useEffect)(()=>{A&&localStorage.setItem("sam_messages",JSON.stringify(N))},[N,A]),(0,r.useEffect)(()=>{A&&localStorage.setItem("sam_active_menu",j)},[j,A]),(0,r.useEffect)(()=>{"profile"===j&&n&&e0()},[j,n]),(0,r.useEffect)(()=>{var e;null==(e=F.current)||e.scrollIntoView({behavior:"smooth"})},[N,C]);let eG=[{id:"chat",label:"Chat with Sam",icon:W.A,active:!0},{id:"knowledge",label:"Knowledge Base",icon:el.A,active:!1},{id:"contact",label:"Contact Center",icon:b.A,active:!1},{id:"campaign",label:"Campaign Hub",icon:en.A,active:!1},{id:"pipeline",label:"Lead Pipeline",icon:ei.A,active:!1},{id:"analytics",label:"Analytics",icon:k.A,active:!1},{id:"invite",label:"Invite Team",icon:ec.A,active:!1},...et?[{id:"admin",label:"Workspace Admin",icon:eo.A,active:!1}]:[],{id:"profile",label:"Profile",icon:ee.A,active:!1},...Q?[{id:"superadmin",label:"SuperAdmin",icon:ed.A,active:!1}]:[]],eY=async e=>{if(e.preventDefault(),P.password!==P.confirmPassword)return void alert("Passwords do not match");if(P.password.length<6)return void alert("Password must be at least 6 characters long");L(e=>({...e,loading:!0}));try{let{error:e}=await t.auth.updateUser({password:P.password});e?alert("Error updating password: "+e.message):(alert("Password updated successfully!"),E(!1),L({password:"",confirmPassword:"",loading:!1}))}catch(e){alert("An unexpected error occurred")}finally{L(e=>({...e,loading:!1}))}},eQ=async()=>{if(g.trim()){let e={id:Date.now(),role:"user",content:g.trim()};w(s=>[...s,e]),y(""),S(!0),p&&u(!1);try{let s=await fetch("/api/sam/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e.content,conversationHistory:N})}),t=await s.json();if(s.ok){let e={id:Date.now()+1,role:"assistant",content:t.response};w(s=>[...s,e])}else{let e={id:Date.now()+1,role:"assistant",content:"I apologize, but I'm having trouble processing your request right now. Please try again."};w(s=>[...s,e])}}catch(s){console.error("Chat API error:",s);let e={id:Date.now()+1,role:"assistant",content:"I'm experiencing technical difficulties. Please try again in a moment."};w(s=>[...s,e])}finally{S(!1)}}},eX=async()=>{if(confirm("Are you sure you want to sign out?"))try{await t.auth.signOut({scope:"global"}),localStorage.removeItem("supabase.auth.token"),localStorage.removeItem("sam_messages"),localStorage.removeItem("sam_active_menu"),sessionStorage.clear(),w([]),u(!0),f("chat"),i(null),x(!1),window.location.reload()}catch(e){console.error("Error signing out:",e),window.location.reload()}},eZ=async(e,s)=>{try{console.log("\uD83D\uDD04 loadWorkspaces called with userId:",e,"isAdmin:",s,"isSuperAdmin:",Q),Y(!0);let r=null!=s?s:Q;if(console.log("\uD83C\uDFAF shouldLoadAllWorkspaces:",r),r){let s=await l(),r=await fetch("/api/admin/workspaces",{method:"GET",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}});if(r.ok){var t,a;let e=await r.json();console.log("\uD83D\uDCCA Admin API returned workspaces:",(null==(t=e.workspaces)?void 0:t.length)||0),console.log("\uD83D\uDCCB Workspace names:",(null==(a=e.workspaces)?void 0:a.map(e=>e.name))||[]),q(e.workspaces||[])}else console.error("❌ Failed to fetch admin workspaces"),await e$(e)}else await e$(e)}catch(e){console.error("Failed to load workspaces:",e)}finally{Y(!1)}},e$=async e=>{try{let{data:s,error:a}=await t.from("workspaces").select("\n          *,\n          workspace_members (\n            id,\n            user_id,\n            role,\n            joined_at,\n            users (\n              email,\n              first_name,\n              last_name\n            )\n          )\n        ").eq("owner_id",e);if(a)throw a;let{data:r,error:l}=await t.from("workspace_members").select("\n          workspaces (\n            *,\n            workspace_members (\n              id,\n              user_id,\n              role,\n              joined_at,\n              users (\n                email,\n                first_name,\n                last_name\n              )\n            )\n          )\n        ").eq("user_id",e);if(l)throw l;let n=[...s||[]];null==r||r.forEach(e=>{e.workspaces&&!n.find(s=>s.id===e.workspaces.id)&&n.push(e.workspaces)}),console.log("\uD83D\uDCCA User workspaces loaded:",n.length,"workspaces"),q(n);let i=n.some(s=>s.owner_id===e),c=null==r?void 0:r.some(e=>"admin"===e.role);ea(i||c||!1)}catch(e){console.error("Error loading user workspaces:",e),q([])}},e0=async()=>{try{eK(!0);let e=await fetch("/api/unipile/accounts");if(e.ok){let s=await e.json();eJ(s.has_linkedin||!1)}else eJ(!1)}catch(e){console.error("LinkedIn status check failed:",e),eJ(!1)}finally{eK(!1)}},e4=async()=>{try{eU(!0);let e=await l(),s=await fetch("/api/admin/users",{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(s.ok){let e=await s.json();eL(e.users||[]),eM(e.stats||{})}else console.error("Failed to fetch users")}catch(e){console.error("Failed to load users:",e)}finally{eU(!1)}},e2=async()=>{if(H.trim()&&n)try{console.log("Attempting workspace creation via service role API...");let r=await fetch("/api/admin/create-workspace-minimal",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(await l())},body:JSON.stringify({name:H,company:eh||"InnovareAI"})}),i=await r.json();if(r.ok&&i.success){console.log("✅ Workspace created via service role API:",i.workspace),V(""),J(!1),console.log("\uD83D\uDD04 Reloading workspaces after creation..."),await eZ(n.id,Q),alert("✅ Workspace created successfully!");return}console.log("Service role API failed, trying direct insertion...");let c=[{name:H,owner_id:n.id,created_by:n.id,company:eh||"InnovareAI",settings:{}},{name:H,owner_id:n.id,created_by:n.id,settings:{}},{name:H,owner_id:n.id,settings:{}},{name:H,owner_id:n.id}],o=null,d=null;for(let r=0;r<c.length;r++){var e,s,a;try{console.log("Direct attempt ".concat(r+1,":"),c[r]);let{data:s,error:a}=await t.from("workspaces").insert(c[r]).select().single();if(a){if(d=a,null==(e=a.message)?void 0:e.includes("infinite recursion"))throw Error("❌ Database RLS policies are preventing workspace creation. This requires manual database configuration.")}else{o=s,console.log("Workspace created on direct attempt ".concat(r+1));break}}catch(e){if(d=e,(null==(s=e.message)?void 0:s.includes("infinite recursion"))||(null==(a=e.message)?void 0:a.includes("Database RLS")))throw e}}if(!o)throw Error("All creation methods failed. API error: ".concat(i.error||"Unknown",". Direct error: ").concat((null==d?void 0:d.message)||"Unknown"));V(""),J(!1),await eZ(n.id,Q),alert("✅ Workspace created successfully!")}catch(s){console.error("Complete workspace creation failure:",s);let e=(null==s?void 0:s.message)||"Unknown error occurred";e.includes("infinite recursion")||e.includes("Database RLS")?alert("❌ ".concat(e,"\n\n\uD83D\uDD27 To fix: Execute the SQL script in FIX_RLS_POLICIES_MANUAL.sql via Supabase console.")):alert("❌ Failed to create workspace: ".concat(e))}},e1=async e=>{try{let s=await fetch("/api/admin/simple-invite",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(await l())},body:JSON.stringify(e)}),t=await s.json();if(s.ok)alert("✅ Invitation sent successfully to ".concat(e.email,"!")),eE&&e4();else throw Error(t.error||"Failed to send invitation")}catch(e){throw console.error("Invitation failed:",e),alert("❌ Failed to send invitation: ".concat(e instanceof Error?e.message:"Unknown error")),e}},e6=async()=>{if(0===eF.size)return void alert("Please select users to delete");if(window.confirm("Are you sure you want to delete ".concat(eF.size," selected user").concat(eF.size>1?"s":"","? This action cannot be undone."))){eq(!0);try{let e=await fetch("/api/admin/delete-users",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(await l())},body:JSON.stringify({userIds:Array.from(eF)})}),s=await e.json();if(e.ok)alert("✅ Successfully deleted ".concat(eF.size," user").concat(eF.size>1?"s":"","!")),eR(new Set),e4();else throw Error(s.error||"Failed to delete users")}catch(e){console.error("Bulk delete failed:",e),alert("❌ Failed to delete users: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{eq(!1)}}},e3=async()=>{if(0===ej.size)return void alert("Please select workspaces to delete");if(window.confirm("Are you sure you want to delete ".concat(ej.size," selected workspace").concat(ej.size>1?"s":"","? This action cannot be undone and will remove all associated data."))){eN(!0);try{let e=await fetch("/api/admin/delete-workspaces",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(await l())},body:JSON.stringify({workspaceIds:Array.from(ej)})}),s=await e.json();if(e.ok)alert("✅ Successfully deleted ".concat(ej.size," workspace").concat(ej.size>1?"s":"","!")),ef(new Set),n&&await eZ(n.id,Q);else throw Error(s.error||"Failed to delete workspaces")}catch(e){console.error("Bulk workspace delete failed:",e),alert("❌ Failed to delete workspaces: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{eN(!1)}}};return d||!A?(0,a.jsx)("div",{className:"flex h-screen bg-gray-900 items-center justify-center",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"text-white text-lg font-medium",children:"Loading..."})})}):n?(0,a.jsxs)("div",{className:"flex h-screen bg-gray-800",children:[(0,a.jsxs)("div",{className:"w-64 bg-gray-700 flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-600",children:(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("img",{src:"/SAM.jpg",alt:"Sam AI",className:"w-10 h-10 rounded-full object-cover",style:{objectPosition:"center 30%"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-white font-bold text-base",children:"SAM AI ✨"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Sales Assistant"})]})]})})}),(0,a.jsx)("div",{className:"flex-1 py-2",children:(0,a.jsx)("nav",{className:"space-y-1 px-3",children:eG.map(e=>{let s=e.icon,t=e.id===j;return(0,a.jsxs)("button",{onClick:()=>f(e.id),className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-sm font-medium transition-colors ".concat(t?"bg-purple-600 text-white":"text-gray-400 hover:bg-gray-600 hover:text-gray-300"),children:[(0,a.jsx)(s,{size:18}),(0,a.jsx)("span",{children:e.label})]},e.id)})})}),(0,a.jsxs)("div",{className:"border-t border-gray-600",children:[(0,a.jsxs)("button",{onClick:()=>{confirm("Clear all conversation history? This cannot be undone.")&&(w([]),u(!0),f("chat"),localStorage.removeItem("sam_messages"),localStorage.removeItem("sam_active_menu"))},className:"w-full flex items-center space-x-3 px-6 py-3 text-gray-400 hover:bg-gray-600 hover:text-gray-300 transition-colors",children:[(0,a.jsx)(ed.A,{size:18}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Clear History"})]}),(0,a.jsx)("div",{className:"p-4",children:n?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:n.email?n.email.charAt(0).toUpperCase():"U"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-white text-sm font-medium truncate",children:n.email||"Authenticated User"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"Authenticated"})]})]}),(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsxs)("button",{onClick:eX,className:"w-full flex items-center justify-center space-x-2 px-3 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg text-gray-200 hover:text-white text-sm font-medium transition-colors",children:[(0,a.jsx)(em.A,{size:16}),(0,a.jsx)("span",{children:"Sign Out"})]})})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:"A"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white text-sm font-medium",children:"Anonymous User"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"No Authentication"})]})]})})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col bg-gray-900",children:["knowledge"===j?(0,a.jsx)(m,{}):"contact"===j?(0,a.jsx)(v,{}):"campaign"===j?(0,a.jsx)(_,{}):"pipeline"===j?(0,a.jsx)(D,{}):"analytics"===j?(0,a.jsx)(T,{}):"invite"===j?(0,a.jsx)("div",{className:"flex-1 p-6 overflow-y-auto",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center",children:[(0,a.jsx)(ec.A,{className:"mr-3",size:36}),"Invite Team Members"]}),(0,a.jsx)("button",{onClick:()=>f("chat"),className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg transition-colors text-white",children:"← Back to Chat"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white mb-6",children:"Invite Coworkers to SAM AI"}),(0,a.jsx)("p",{className:"text-gray-400 mb-6",children:"Invite your team members to join your workspace on the SAM AI platform. They'll receive an email invitation with instructions to get started."}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-900 to-indigo-900 rounded-lg p-6 border border-purple-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white text-lg font-semibold mb-2",children:"Ready to invite someone?"}),(0,a.jsx)("p",{className:"text-purple-200 text-sm",children:"Click the button to send an invitation email"})]}),(0,a.jsxs)("button",{onClick:async()=>{console.log("\uD83D\uDD04 Loading user workspaces for invite..."),n&&await eZ(n.id,Q),ey(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-colors",children:[(0,a.jsx)(h.A,{size:18}),(0,a.jsx)("span",{children:"Send Invitation"})]})]})})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white mb-6",children:"Current Team Members"}),G?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("div",{className:"text-gray-400",children:"Loading workspace information..."})}):0===R.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-gray-700 rounded-lg",children:[(0,a.jsx)(b.A,{className:"mx-auto mb-4 text-gray-600",size:48}),(0,a.jsx)("p",{className:"text-gray-400",children:"No workspace information available"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Contact your administrator for workspace access"})]}):(0,a.jsx)("div",{className:"space-y-4",children:R.map(e=>(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:e.name}),e.slug&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("innovareai"===e.slug?"bg-blue-600 text-white":"bg-green-600 text-white"),children:e.slug})]}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:["Created ",new Date(e.created_at).toLocaleDateString()]})]}),(0,a.jsxs)("button",{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm flex items-center space-x-1 transition-colors",onClick:()=>{eS(e.id),ey(!0)},children:[(0,a.jsx)(h.A,{size:14}),(0,a.jsx)("span",{children:"Invite to This Workspace"})]})]}),e.workspace_members&&e.workspace_members.length>0?(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsxs)("p",{className:"text-gray-400 text-xs mb-2",children:["Team Members (",e.workspace_members.length,"):"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.workspace_members.map((e,s)=>{var t,r;return(0,a.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-600 px-3 py-1 rounded-lg",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-xs font-medium",children:(null==(t=e.users)?void 0:t.email)?e.users.email.charAt(0).toUpperCase():"U"})}),(0,a.jsx)("span",{className:"text-white text-sm",children:(null==(r=e.users)?void 0:r.email)||"User ".concat(e.user_id.slice(0,8))}),(0,a.jsxs)("span",{className:"text-gray-400 text-xs",children:["(",e.role,")"]})]},s)})})]}):(0,a.jsx)("div",{className:"mt-3 text-gray-500 text-sm",children:"No team members yet - invite your first coworker!"})]},e.id))})]})]})}):"admin"===j?(0,a.jsx)("div",{className:"flex-1 p-6 overflow-y-auto",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center",children:[(0,a.jsx)(eo.A,{className:"mr-3",size:36}),"Workspace Administration"]}),(0,a.jsx)("button",{onClick:()=>f("chat"),className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg transition-colors text-white",children:"← Back to Chat"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white mb-6",children:"My Workspaces"}),G?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("div",{className:"text-gray-400",children:"Loading workspace information..."})}):0===R.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-gray-700 rounded-lg",children:[(0,a.jsx)(eo.A,{className:"mx-auto mb-4 text-gray-600",size:48}),(0,a.jsx)("p",{className:"text-gray-400",children:"No workspace access available"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Contact your administrator for workspace access"})]}):(0,a.jsx)("div",{className:"space-y-4",children:R.filter(e=>{var s;return e.owner_id===(null==n?void 0:n.id)||(null==(s=e.workspace_members)?void 0:s.some(e=>e.user_id===(null==n?void 0:n.id)&&"admin"===e.role))}).map(e=>{var s;return(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("h3",{className:"text-white font-semibold text-lg",children:e.name}),e.slug&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("innovareai"===e.slug?"bg-blue-600 text-white":"bg-green-600 text-white"),children:e.slug}),e.owner_id===(null==n?void 0:n.id)&&(0,a.jsx)("span",{className:"bg-purple-600 text-white text-xs px-2 py-1 rounded",children:"Owner"})]}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:["Created ",new Date(e.created_at).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-400",children:[(null==(s=e.workspace_members)?void 0:s.length)||0," members"]}),(0,a.jsxs)("button",{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded text-sm flex items-center space-x-1 transition-colors",onClick:()=>{eS(e.id),ey(!0)},children:[(0,a.jsx)(ec.A,{size:16}),(0,a.jsx)("span",{children:"Invite Member"})]})]})]}),e.workspace_members&&e.workspace_members.length>0?(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{className:"text-white font-medium mb-3",children:"Team Members"}),(0,a.jsx)("div",{className:"space-y-2",children:e.workspace_members.map((s,t)=>{var r,l;return(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-600 px-4 py-2 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:(null==(r=s.users)?void 0:r.email)?s.users.email.charAt(0).toUpperCase():"U"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-medium",children:(null==(l=s.users)?void 0:l.email)||"User ".concat(s.user_id.slice(0,8))}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:["Joined ",new Date(s.joined_at).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("owner"===s.role?"bg-purple-600 text-white":"admin"===s.role?"bg-blue-600 text-white":"bg-gray-500 text-white"),children:s.role}),e.owner_id===(null==n?void 0:n.id)&&"owner"!==s.role&&(0,a.jsx)("button",{className:"text-red-400 hover:text-red-300 text-sm",onClick:()=>{confirm("Remove this member from the workspace?")&&alert("Member removal functionality will be implemented")},children:"Remove"})]})]},t)})})]}):(0,a.jsx)("div",{className:"mt-4 text-gray-500 text-sm bg-gray-600 rounded-lg p-4 text-center",children:"No team members yet - invite your first coworker!"}),e.owner_id===(null==n?void 0:n.id)&&(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-600",children:[(0,a.jsx)("h4",{className:"text-white font-medium mb-3",children:"Workspace Settings"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-300",children:"Workspace Name"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Change the display name of this workspace"})]}),(0,a.jsx)("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded text-sm transition-colors",children:"Edit Name"})]})]})]},e.id)})})]})]})}):"profile"===j?(0,a.jsx)("div",{className:"flex-1 p-6 overflow-y-auto",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center",children:[(0,a.jsx)(ee.A,{className:"mr-3",size:36}),"User Profile"]}),(0,a.jsx)("button",{onClick:()=>f("chat"),className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg transition-colors text-white",children:"← Back to Chat"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white mb-6",children:"Profile Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),(0,a.jsx)("input",{type:"email",value:(null==n?void 0:n.email)||"",disabled:!0,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white opacity-50"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"Email cannot be changed"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"First Name"}),(0,a.jsx)("input",{type:"text",value:(null==n||null==(e=n.user_metadata)?void 0:e.first_name)||"",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",placeholder:"Enter first name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Last Name"}),(0,a.jsx)("input",{type:"text",value:(null==n||null==(s=n.user_metadata)?void 0:s.last_name)||"",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",placeholder:"Enter last name"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Account Created"}),(0,a.jsx)("input",{type:"text",value:(null==n?void 0:n.created_at)?new Date(n.created_at).toLocaleDateString():"N/A",disabled:!0,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white opacity-50"})]}),(0,a.jsx)("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Update Profile"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white mb-6",children:"LinkedIn Integration"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:"LinkedIn Account Connection"}),eH?(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(eB?"bg-green-500":"bg-red-500")})]}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:eH?"Checking connection status...":eB?"LinkedIn account connected - prospect features enabled":"Connect your LinkedIn account to enable prospect research and enrichment"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:e0,disabled:eH,className:"bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white px-3 py-2 rounded-lg transition-colors text-sm",children:eH?"Checking...":"Refresh"}),(0,a.jsxs)("button",{onClick:()=>{e0(),window.location.href="/integrations/unipile"},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[(0,a.jsx)(ex.A,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[eB?"Manage":"Connect"," LinkedIn"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:"Prospect Approval System"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Access the AI-powered prospect approval and outreach system"})]}),(0,a.jsx)("button",{onClick:()=>window.location.href="/dashboard/prospect-approval",className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Open Prospects"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white mb-6",children:"App Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:"Clear Chat History"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Remove all conversation history from this device"})]}),(0,a.jsx)("button",{onClick:()=>{confirm("Clear all conversation history? This cannot be undone.")&&(w([]),u(!0),f("chat"),localStorage.removeItem("sam_messages"),localStorage.removeItem("sam_active_menu"),alert("Chat history cleared successfully"))},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Clear History"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:"Change Password"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Update your account password"})]}),(0,a.jsx)("button",{onClick:()=>E(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Change Password"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white mb-6",children:"Account Actions"}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:"Sign Out"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Sign out of your SAM AI account"})]}),(0,a.jsxs)("button",{onClick:eX,className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[(0,a.jsx)(em.A,{size:16}),(0,a.jsx)("span",{children:"Sign Out"})]})]})})]})]})}):"superadmin"===j?(0,a.jsx)("div",{className:"flex-1 p-6 overflow-y-auto",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center",children:[(0,a.jsx)(ed.A,{className:"mr-3",size:36}),"SuperAdmin Panel"]}),(0,a.jsx)("button",{onClick:()=>f("chat"),className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg transition-colors text-white",children:"← Back to Chat"})]}),Q&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-900 to-indigo-900 rounded-lg p-6 mb-6 border border-purple-500",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-semibold text-white flex items-center",children:[(0,a.jsx)(ed.A,{className:"mr-2",size:24}),"Super Admin Panel"]}),(0,a.jsx)("p",{className:"text-purple-200 text-sm",children:"Advanced tenant and user management"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("label",{className:"text-white text-sm font-medium",children:"Company:"}),(0,a.jsxs)("select",{value:eh,onChange:e=>eg(e.target.value),className:"bg-gray-700 text-white px-3 py-1 rounded border border-gray-600",children:[(0,a.jsx)("option",{value:"InnovareAI",children:"InnovareAI"}),(0,a.jsx)("option",{value:"3cubedai",children:"3CubedAI"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("button",{onClick:()=>J(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-3 rounded-lg flex items-center justify-center space-x-2 transition-colors",children:[(0,a.jsx)(X.A,{size:18}),(0,a.jsx)("span",{children:"Create Tenant"})]}),(0,a.jsxs)("button",{onClick:async()=>{console.log("\uD83D\uDD04 Refreshing workspaces before opening invite popup..."),n&&await eZ(n.id,Q),ey(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg flex items-center justify-center space-x-2 transition-colors",children:[(0,a.jsx)(h.A,{size:18}),(0,a.jsx)("span",{children:"Invite User"})]}),(0,a.jsxs)("button",{onClick:()=>{eP(!0),e4()},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg flex items-center justify-center space-x-2 transition-colors",children:[(0,a.jsx)(b.A,{size:18}),(0,a.jsx)("span",{children:"Manage Users"})]})]}),(0,a.jsxs)("div",{className:"text-xs text-purple-200",children:["Company emails will be sent from: ","InnovareAI"===eh?"sp@innovareai.com":"sophia@3cubed.ai"]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white",children:Q?"All Workspaces":"My Workspaces"}),Q&&R.length>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",onChange:e=>{e.target.checked?ef(new Set(R.filter(e=>"innovareai"!==e.slug).map(e=>e.id))):ef(new Set)},checked:ej.size>0&&ej.size===R.filter(e=>"innovareai"!==e.slug).length,className:"rounded bg-gray-700 border-gray-600 text-purple-600 focus:ring-purple-500"}),(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:"Select All"})]})]}),(0,a.jsxs)("div",{className:"text-gray-400 text-sm",children:[R.length," workspace",1!==R.length?"s":""]})]}),G?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("div",{className:"text-gray-400",children:"Loading workspaces..."})}):0===R.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-gray-700 rounded-lg",children:[(0,a.jsx)(X.A,{className:"mx-auto mb-4 text-gray-600",size:48}),(0,a.jsx)("p",{className:"text-gray-400",children:"No workspaces created yet"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:'Use "Create Tenant" in the Super Admin panel above'})]}):(0,a.jsx)("div",{className:"space-y-4",children:R.map(e=>{var s;return(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[Q&&(0,a.jsx)("input",{type:"checkbox",checked:ej.has(e.id),onChange:s=>((e,s)=>{let t=new Set(ej);s?t.add(e):t.delete(e),ef(t)})(e.id,s.target.checked),disabled:"innovareai"===e.slug,className:"rounded bg-gray-700 border-gray-600 text-purple-600 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:e.name}),e.slug&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("innovareai"===e.slug?"bg-blue-600 text-white":"bg-green-600 text-white"),children:e.slug})]}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:["Created ",new Date(e.created_at).toLocaleDateString()]}),Q&&e.owner&&(0,a.jsxs)("p",{className:"text-gray-500 text-xs mt-1",children:["Owner: ",e.owner.email||"Unknown"]}),e.workspace_members&&e.workspace_members.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("p",{className:"text-gray-400 text-xs mb-1",children:["Members (",e.workspace_members.length,"):"]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.workspace_members.slice(0,3).map((e,s)=>{var t;return(0,a.jsxs)("span",{className:"text-xs bg-gray-600 text-gray-200 px-2 py-1 rounded",children:[(null==(t=e.user)?void 0:t.email)||"User ".concat(e.user_id.slice(0,8)),(0,a.jsxs)("span",{className:"text-gray-400 ml-1",children:["(",e.role,")"]})]},s)}),e.workspace_members.length>3&&(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:["+",e.workspace_members.length-3," more"]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(Q&&e.owner_id!==n.id?"bg-gray-600 text-gray-300":"bg-purple-600 text-white"),children:Q&&e.owner_id!==n.id?"View":"Owner"}),(0,a.jsxs)("button",{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm flex items-center space-x-1 transition-colors",onClick:()=>{eS(e.id),ey(!0)},children:[(0,a.jsx)(h.A,{size:14}),(0,a.jsx)("span",{children:"Invite"})]})]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,a.jsx)(b.A,{size:14,className:"inline mr-1"}),e.member_count||(null==(s=e.workspace_members)?void 0:s.length)||0," members"]})]},e.id)})}),Q&&ej.size>0&&(0,a.jsxs)("div",{className:"flex justify-between items-center mt-6 pt-6 border-t border-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:e3,disabled:ev,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white px-6 py-2 rounded-lg transition-colors flex items-center space-x-2",children:(0,a.jsx)("span",{children:ev?"Deleting...":"Delete ".concat(ej.size," Workspace").concat(ej.size>1?"s":"")})}),(0,a.jsxs)("span",{className:"text-gray-400 text-sm",children:[ej.size," workspace",ej.size>1?"s":""," selected"]})]}),(0,a.jsx)("div",{className:"text-gray-500 text-xs",children:"Note: InnovareAI workspace is protected and cannot be deleted"})]})]})]})}):p?(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-start pt-24 p-6",children:[(0,a.jsx)("div",{className:"mb-12",children:(0,a.jsx)("img",{src:"/SAM.jpg",alt:"Sam AI",className:"w-48 h-48 rounded-full object-cover shadow-lg",style:{objectPosition:"center 30%"}})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("h2",{className:"text-white text-2xl font-medium",children:"What do you want to get done today?"})})]}):(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[N.map(e=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-[70%] ".concat("user"===e.role?"order-2":"order-1"),children:["assistant"===e.role&&(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("img",{src:"/SAM.jpg",alt:"Sam AI",className:"w-8 h-8 rounded-full object-cover flex-shrink-0 mt-1",style:{objectPosition:"center 30%"}}),(0,a.jsx)("div",{className:"bg-gray-700 text-white px-4 py-3 rounded-2xl",children:(0,a.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:e.content})})]}),"user"===e.role&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex items-center justify-end space-x-2 mb-1",children:(0,a.jsx)("span",{className:"text-gray-400 text-sm font-medium",children:"You"})}),(0,a.jsx)("div",{className:"bg-gray-800 text-white px-4 py-3 rounded-2xl",children:(0,a.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:e.content})})]})]})},e.id)),C&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"max-w-[70%]",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("img",{src:"/SAM.jpg",alt:"Sam AI",className:"w-8 h-8 rounded-full object-cover flex-shrink-0 mt-1",style:{objectPosition:"center 30%"}}),(0,a.jsx)("div",{className:"bg-gray-700 text-white px-4 py-3 rounded-2xl",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-purple-600 rounded-full animate-pulse",style:{animationDelay:"0.4s"}}),(0,a.jsx)("span",{className:"text-sm text-gray-300 ml-2",children:"Sam is thinking..."})]})})]})})}),(0,a.jsx)("div",{ref:F})]}),"chat"===j&&(0,a.jsxs)("div",{className:"flex-shrink-0 p-6",children:[(0,a.jsxs)("div",{className:"bg-black text-white px-4 py-3 rounded-t-lg max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-sm",children:C?"Processing...":"Ready"}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(C?"bg-purple-400 animate-pulse":"bg-green-400")}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(C?"bg-purple-500 animate-pulse":"bg-green-500"),style:{animationDelay:"0.2s"}}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(C?"bg-purple-600 animate-pulse":"bg-green-600"),style:{animationDelay:"0.4s"}})]})]}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:C?"Sam is thinking...":"Ready to chat with Sam AI"})]}),(0,a.jsx)("div",{className:"bg-gray-700 p-4 rounded-b-lg max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"flex items-end bg-gray-600 rounded-lg px-4 py-2",children:[(0,a.jsx)("button",{onClick:()=>M(!0),className:"text-gray-400 hover:text-gray-200 transition-colors p-1 mr-2",title:"Conversation History",children:(0,a.jsx)(U.A,{size:18})}),(0,a.jsx)("button",{className:"text-gray-400 hover:text-gray-200 transition-colors p-1 mr-2",children:(0,a.jsx)(ep.A,{size:18})}),(0,a.jsx)("textarea",{value:g,onChange:e=>y(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),eQ())},placeholder:"What do you want to get done?",className:"flex-1 bg-transparent text-white placeholder-gray-400 text-base pl-3 pr-3 py-2 outline-none resize-vertical min-h-[96px] max-h-48",style:{textAlign:"left"},rows:4}),(0,a.jsxs)("button",{onClick:eQ,disabled:C||!g.trim(),className:"text-gray-400 hover:text-gray-200 disabled:text-gray-600 disabled:cursor-not-allowed transition-colors ml-2 px-3 py-1 flex items-center space-x-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:C?"Sending...":"Send"}),(0,a.jsx)(eu.A,{size:16})]})]})})]})]}),(0,a.jsx)(K,{isOpen:O,onClose:()=>M(!1),currentMessages:N,onLoadConversation:e=>{w(e),u(!1)}}),eb&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Invite User to Workspace"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),(0,a.jsx)("input",{type:"email",value:ew,onChange:e=>ek(e.target.value),placeholder:"user@example.com",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Workspace"}),(0,a.jsxs)("select",{value:eC||"",onChange:e=>eS(e.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[(0,a.jsx)("option",{value:"",children:"Select a workspace..."}),R.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Company"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"InnovareAI",checked:"InnovareAI"===eh,onChange:e=>eg(e.target.value),className:"mr-2"}),(0,a.jsx)("span",{className:"text-white",children:"InnovareAI"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"3cubedai",checked:"3cubedai"===eh,onChange:e=>eg(e.target.value),className:"mr-2"}),(0,a.jsx)("span",{className:"text-white",children:"3CubedAI"})]})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Invitation will be sent from: ","InnovareAI"===eh?"sp@innovareai.com":"sophia@3cubed.ai"]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:async()=>{if(!ew.trim()||!eC)return void alert("Please fill in all fields");try{let e=await fetch("/api/admin/simple-invite",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(await l())},body:JSON.stringify({email:ew,firstName:ew.split("@")[0],lastName:"User",workspaceId:eC,company:eh,role:"member"})}),s=await e.json();e.ok?(alert("Invitation sent successfully to ".concat(ew," from ").concat(eh,"!")),ey(!1),ek(""),eS(null)):alert("Failed to send invitation: ".concat(s.error))}catch(e){console.error("Error sending invitation:",e),alert("Failed to send invitation")}},disabled:!ew.trim()||!eC,className:"flex-1 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white py-2 rounded-lg transition-colors",children:"Send Invitation"}),(0,a.jsx)("button",{onClick:()=>{ey(!1),ek(""),eS(null)},className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),B&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Create New Workspace"}),(0,a.jsx)("input",{type:"text",value:H,onChange:e=>V(e.target.value),placeholder:"Workspace name",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white mb-4",onKeyPress:e=>{"Enter"===e.key&&e2()}}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:e2,disabled:!H.trim(),className:"flex-1 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white py-2 rounded-lg transition-colors",children:"Create"}),(0,a.jsx)("button",{onClick:()=>{J(!1),V("")},className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),z&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 max-w-md w-full mx-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Change Password"}),(0,a.jsx)("p",{className:"text-gray-400 mb-6",children:"Enter your new password below"}),(0,a.jsxs)("form",{onSubmit:eY,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"New Password"}),(0,a.jsx)("input",{type:"password",value:P.password,onChange:e=>L(s=>({...s,password:e.target.value})),required:!0,minLength:6,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter new password (min 6 characters)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm New Password"}),(0,a.jsx)("input",{type:"password",value:P.confirmPassword,onChange:e=>L(s=>({...s,confirmPassword:e.target.value})),required:!0,minLength:6,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Confirm new password"})]}),(0,a.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,a.jsx)("button",{type:"submit",disabled:P.loading,className:"flex-1 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white font-medium py-3 px-4 rounded-lg transition-colors",children:P.loading?"Updating...":"Update Password"}),(0,a.jsx)("button",{type:"button",onClick:()=>{E(!1),L({password:"",confirmPassword:"",loading:!1})},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-medium py-3 px-4 rounded-lg transition-colors",children:"Cancel"})]})]})]})}),eE&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold text-white",children:"Manage Users"}),(0,a.jsx)("button",{onClick:()=>eP(!1),className:"text-gray-400 hover:text-gray-200",children:"✕"})]}),eO&&(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:eO.total_users}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Total Users"})]}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-400",children:eO.active_users}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Active Users"})]}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:eO.pending_invitations}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Pending Invites"})]}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:eO.super_admins}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Super Admins"})]})]}),eT?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("div",{className:"text-gray-400",children:"Loading users..."})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 text-gray-300 w-12",children:(0,a.jsx)("input",{type:"checkbox",onChange:e=>{e.target.checked?eR(new Set(eD.filter(e=>!e.is_super_admin).map(e=>e.id))):eR(new Set)},checked:eF.size>0&&eF.size===eD.filter(e=>!e.is_super_admin).length,className:"rounded bg-gray-700 border-gray-600 text-purple-600 focus:ring-purple-500"})}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-gray-300",children:"Email"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-gray-300",children:"Status"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-gray-300",children:"Workspaces"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-gray-300",children:"Last Sign In"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-gray-300",children:"Created"})]})}),(0,a.jsx)("tbody",{children:eD.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-700 hover:bg-gray-700/30",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("input",{type:"checkbox",checked:eF.has(e.id),onChange:s=>((e,s)=>{let t=new Set(eF);s?t.add(e):t.delete(e),eR(t)})(e.id,s.target.checked),disabled:e.is_super_admin,className:"rounded bg-gray-700 border-gray-600 text-purple-600 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed"})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white font-medium",children:e.email}),e.is_super_admin&&(0,a.jsx)("span",{className:"bg-purple-600 text-white text-xs px-2 py-1 rounded mt-1 inline-block",children:"Super Admin"})]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(e.email_confirmed_at?"bg-green-600 text-white":"bg-yellow-600 text-white"),children:e.email_confirmed_at?"Confirmed":"Pending"})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"text-gray-300",children:[e.memberships.length>0?(0,a.jsx)("div",{className:"space-y-1",children:e.memberships.map((e,s)=>{var t,r,l;return(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsx)("span",{className:"text-white",children:(null==(t=e.workspaces)?void 0:t.name)||"Unknown"}),(0,a.jsx)("span",{className:"ml-2 px-1 py-0.5 rounded text-xs ".concat((null==(r=e.workspaces)?void 0:r.slug)==="innovareai"?"bg-blue-500 text-white":"bg-green-500 text-white"),children:(null==(l=e.workspaces)?void 0:l.slug)||"Unknown"}),(0,a.jsxs)("span",{className:"ml-2 text-gray-400",children:["(",e.role,")"]})]},s)})}):(0,a.jsx)("span",{className:"text-gray-500",children:"No workspaces"}),e.pending_invitations.length>0&&(0,a.jsxs)("div",{className:"text-yellow-400 text-xs mt-1",children:[e.pending_invitations.length," pending invite(s)"]})]})}),(0,a.jsx)("td",{className:"py-3 px-4 text-gray-300 text-sm",children:e.last_sign_in_at?new Date(e.last_sign_in_at).toLocaleDateString():"Never"}),(0,a.jsx)("td",{className:"py-3 px-4 text-gray-300 text-sm",children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[eF.size>0&&(0,a.jsx)("button",{onClick:e6,disabled:eW,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white px-6 py-2 rounded-lg transition-colors flex items-center space-x-2",children:(0,a.jsx)("span",{children:eW?"Deleting...":"Delete ".concat(eF.size," User").concat(eF.size>1?"s":"")})}),eF.size>0&&(0,a.jsxs)("span",{className:"text-gray-400 text-sm",children:[eF.size," user",eF.size>1?"s":""," selected"]})]}),(0,a.jsx)("button",{onClick:()=>eP(!1),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Close"})]})]})}),(0,a.jsx)(Z,{isOpen:eb,onClose:()=>ey(!1),onSubmit:e1,workspaces:R}),(0,a.jsx)(er,{isOpen:eA,onClose:()=>eI(!1),initialMode:e_})]}):(0,a.jsx)("div",{className:"flex h-screen bg-gray-900 items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto px-6",children:[(0,a.jsx)("img",{src:"/SAM.jpg",alt:"Sam AI",className:"w-20 h-20 rounded-full object-cover mx-auto mb-6",style:{objectPosition:"center 30%"}}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-4",children:"Welcome to SAM AI"}),(0,a.jsx)("p",{className:"text-gray-400 mb-8",children:"Your AI-powered Sales Assistant Platform"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("button",{onClick:()=>{ez("signin"),eI(!0)},className:"block w-full bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-6 rounded-lg transition-colors transform hover:scale-105",children:"Sign In"}),(0,a.jsx)("button",{onClick:()=>{ez("signup"),eI(!0)},className:"block w-full bg-gray-700 hover:bg-gray-600 text-gray-300 font-medium py-3 px-6 rounded-lg transition-colors transform hover:scale-105",children:"Create Account"})]})]})})}}},e=>{e.O(0,[5040,8760,3680,8441,1255,7358],()=>e(e.s=5367)),_N_E=e.O()}]);