(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8403],{1078:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5105).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1150:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let s=r(5155),a=r(2115),n=r(4437);function i(e){return{default:e&&"default"in e?e.default:e}}r(6552);let l={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},c=function(e){let t={...l,...e},r=(0,a.lazy)(()=>t.loader().then(i)),c=t.loading;function o(e){let i=c?(0,s.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,l=!t.ssr||!!t.loading,o=l?a.Suspense:a.Fragment,d=t.ssr?(0,s.jsxs)(s.Fragment,{children:[null,(0,s.jsx)(r,{...e})]}):(0,s.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(r,{...e})});return(0,s.jsx)(o,{...l?{fallback:i}:{},children:d})}return o.displayName="LoadableComponent",o}},1169:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5105).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2857:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(5155),a=r(2115),n=r(8760),i=r(6278),l=r.n(i),c=r(7003),o=r(3209),d=r(7812);let u=(0,r(5105).A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var f=r(6154),m=r(7816),x=r(1078),h=r(1169),g=r(3664);function p(){let e=(0,n.createClientComponentClient)(),[t,r]=(0,a.useState)(null),[i,l]=(0,a.useState)([]),[p,v]=(0,a.useState)(null),[j,y]=(0,a.useState)(!1),[b,N]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{let{data:{user:t}}=await e.auth.getUser();r(t)})();let{data:{subscription:t}}=e.auth.onAuthStateChange((e,t)=>{r((null==t?void 0:t.user)||null)});return()=>t.unsubscribe()},[e]);let w=async()=>{y(!0);try{let{data:{session:t}}=await e.auth.getSession(),r=await fetch("/api/admin/activecampaign?action=test",{headers:{Authorization:"Bearer ".concat(null==t?void 0:t.access_token)}}),s=await r.json();v(s),s.success&&await A()}catch(e){console.error("Connection test failed:",e),v({success:!1,error:"Connection test failed"})}finally{y(!1)}},A=async()=>{try{let{data:{session:t}}=await e.auth.getSession(),r=await fetch("/api/admin/activecampaign?action=lists",{headers:{Authorization:"Bearer ".concat(null==t?void 0:t.access_token)}}),s=await r.json();s.lists&&l(s.lists)}catch(e){console.error("Failed to get lists:",e)}},C=async t=>{y(!0);try{let{data:{session:r}}=await e.auth.getSession(),s=await fetch("/api/admin/activecampaign",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==r?void 0:r.access_token)},body:JSON.stringify({email:"test-sam-ai@example.com",firstName:"Test",lastName:"User",listId:t,additionalData:{fieldValues:[{field:"company",value:"InnovareAI"},{field:"source",value:"SAM AI Test"}]}})}),a=await s.json();N(a)}catch(e){console.error("Test contact addition failed:",e),N({error:"Test contact addition failed"})}finally{y(!1)}};return((0,a.useEffect)(()=>{t&&w()},[t]),t)?(0,s.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"ActiveCampaign Integration"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage ActiveCampaign connection and lists"})]}),(0,s.jsxs)(c.$,{onClick:w,disabled:j,variant:"outline",children:[j?(0,s.jsx)(u,{className:"h-4 w-4 animate-spin mr-2"}):(0,s.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Test Connection"]})]}),(0,s.jsxs)(o.Zp,{children:[(0,s.jsx)(o.aR,{children:(0,s.jsxs)(o.ZB,{className:"flex items-center",children:[(null==p?void 0:p.success)?(0,s.jsx)(m.A,{className:"h-5 w-5 text-green-500 mr-2"}):(0,s.jsx)(x.A,{className:"h-5 w-5 text-red-500 mr-2"}),"Connection Status"]})}),(0,s.jsx)(o.Wu,{children:p?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.E,{variant:p.success?"default":"destructive",children:p.success?"Connected":"Failed"}),p.error&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:p.error}),p.success&&p.data&&(0,s.jsx)("p",{className:"text-green-600 text-sm",children:"ActiveCampaign API is working correctly"})]}):(0,s.jsx)("p",{className:"text-muted-foreground",children:'Click "Test Connection" to check status'})})]}),i.length>0&&(0,s.jsxs)(o.Zp,{children:[(0,s.jsxs)(o.aR,{children:[(0,s.jsxs)(o.ZB,{className:"flex items-center",children:[(0,s.jsx)(h.A,{className:"h-5 w-5 mr-2"}),"Available Lists (",i.length,")"]}),(0,s.jsx)(o.BT,{children:"These are the mailing lists available in your ActiveCampaign account"})]}),(0,s.jsx)(o.Wu,{children:(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map(e=>(0,s.jsxs)(o.Zp,{className:"border-2",children:[(0,s.jsxs)(o.aR,{className:"pb-3",children:[(0,s.jsx)(o.ZB,{className:"text-lg",children:e.name}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(d.E,{variant:"secondary",children:["ID: ",e.id]}),e.stringid&&(0,s.jsxs)(d.E,{variant:"outline",children:["String ID: ",e.stringid]})]})]}),(0,s.jsx)(o.Wu,{children:(0,s.jsxs)(c.$,{onClick:()=>C(e.id),disabled:j,size:"sm",className:"w-full",children:[j?(0,s.jsx)(u,{className:"h-4 w-4 animate-spin mr-2"}):(0,s.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Test Add Contact"]})})]},e.id))})})]}),b&&(0,s.jsxs)(o.Zp,{children:[(0,s.jsx)(o.aR,{children:(0,s.jsxs)(o.ZB,{className:"flex items-center",children:[(0,s.jsx)(g.A,{className:"h-5 w-5 mr-2"}),"Test Contact Result"]})}),(0,s.jsx)(o.Wu,{children:(0,s.jsx)("div",{className:"space-y-2",children:b.error?(0,s.jsxs)("div",{children:[(0,s.jsx)(d.E,{variant:"destructive",children:"Failed"}),(0,s.jsx)("p",{className:"text-red-500 text-sm mt-2",children:b.error}),b.details&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-1",children:b.details})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)(d.E,{variant:"default",children:"Success"}),(0,s.jsx)("p",{className:"text-green-600 text-sm mt-2",children:b.message}),b.contactId&&(0,s.jsxs)("p",{className:"text-muted-foreground text-xs mt-1",children:["Contact ID: ",b.contactId]})]})})})]}),(0,s.jsxs)(o.Zp,{children:[(0,s.jsx)(o.aR,{children:(0,s.jsx)(o.ZB,{children:"Integration Details"})}),(0,s.jsx)(o.Wu,{className:"space-y-2",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Base URL:"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"https://innovareai.api-us1.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"API Key:"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Configured via environment"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Integration Status:"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"New users will automatically be added to ActiveCampaign when invited"})]})]})})]})]}):(0,s.jsx)("div",{children:"Please sign in to access this page."})}let v=l()(()=>Promise.resolve(p),{ssr:!1})},3209:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>i,aR:()=>l});var s=r(5155),a=r(2115),n=r(5016);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});o.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{bindSnapshot:function(){return i},createAsyncLocalStorage:function(){return n},createSnapshot:function(){return l}});let r=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class s{disable(){throw r}getStore(){}run(){throw r}exit(){throw r}enterWith(){throw r}static bind(e){return e}}let a="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function n(){return a?new a:new s}function i(e){return a?a.bind(e):s.bind(e)}function l(){return a?a.snapshot():function(e,...t){return e(...t)}}},4437:(e,t,r)=>{"use strict";function s(e){let{reason:t,children:r}=e;return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}}),r(4553)},5016:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(2821),a=r(5889);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},5447:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return s}});let s=(0,r(4054).createAsyncLocalStorage)()},6154:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(5105).A)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},6278:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let s=r(8140)._(r(1150));function a(e,t){var r;let a={};"function"==typeof e&&(a.loader=e);let n={...a,...t};return(0,s.default)({...n,modules:null==(r=n.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6552:(e,t,r)=>{"use strict";function s(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return s}}),r(5155),r(7650),r(8567),r(7278)},6866:(e,t,r)=>{Promise.resolve().then(r.bind(r,2857))},7003:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var s=r(5155),a=r(2115),n=r(2467),i=r(3101),l=r(5016);let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:o=!1,...d}=e,u=o?n.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(c({variant:a,size:i,className:r})),ref:t,...d})});o.displayName="Button"},7812:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var s=r(5155);r(2115);var a=r(3101),n=r(5016);let i=(0,a.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...a})}},8567:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return s.workAsyncStorageInstance}});let s=r(5447)}},e=>{e.O(0,[5040,8760,8851,8441,1255,7358],()=>e(e.s=6866)),_N_E=e.O()}]);