(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8403],{25016:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var a=t(2821),r=t(75889);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},36407:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var a=t(95155),r=t(12115),n=t(78760),i=t(67909),c=t(97003),d=t(83209),l=t(67812),o=t(919),u=t(56154),m=t(27816),x=t(91078),h=t(91169),f=t(23664);function g(){let e=(0,n.createClientComponentClient)(),[s,t]=(0,r.useState)(null),[i,g]=(0,r.useState)([]),[v,p]=(0,r.useState)(null),[j,N]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{let{data:{user:s}}=await e.auth.getUser();t(s)})();let{data:{subscription:s}}=e.auth.onAuthStateChange((e,s)=>{t((null==s?void 0:s.user)||null)});return()=>s.unsubscribe()},[e]);let w=async()=>{N(!0);try{let{data:{session:s}}=await e.auth.getSession(),t=await fetch("/api/admin/activecampaign?action=test",{headers:{Authorization:"Bearer ".concat(null==s?void 0:s.access_token)}}),a=await t.json();p(a),a.success&&await C()}catch(e){console.error("Connection test failed:",e),p({success:!1,error:"Connection test failed"})}finally{N(!1)}},C=async()=>{try{let{data:{session:s}}=await e.auth.getSession(),t=await fetch("/api/admin/activecampaign?action=lists",{headers:{Authorization:"Bearer ".concat(null==s?void 0:s.access_token)}}),a=await t.json();a.lists&&g(a.lists)}catch(e){console.error("Failed to get lists:",e)}},A=async s=>{N(!0);try{let{data:{session:t}}=await e.auth.getSession(),a=await fetch("/api/admin/activecampaign",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==t?void 0:t.access_token)},body:JSON.stringify({email:"test-sam-ai@example.com",firstName:"Test",lastName:"User",listId:s,additionalData:{fieldValues:[{field:"company",value:"InnovareAI"},{field:"source",value:"SAM AI Test"}]}})}),r=await a.json();b(r)}catch(e){console.error("Test contact addition failed:",e),b({error:"Test contact addition failed"})}finally{N(!1)}};return((0,r.useEffect)(()=>{s&&w()},[s]),s)?(0,a.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"ActiveCampaign Integration"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage ActiveCampaign connection and lists"})]}),(0,a.jsxs)(c.$,{onClick:w,disabled:j,variant:"outline",children:[j?(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Test Connection"]})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsxs)(d.ZB,{className:"flex items-center",children:[(null==v?void 0:v.success)?(0,a.jsx)(m.A,{className:"h-5 w-5 text-green-500 mr-2"}):(0,a.jsx)(x.A,{className:"h-5 w-5 text-red-500 mr-2"}),"Connection Status"]})}),(0,a.jsx)(d.Wu,{children:v?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.E,{variant:v.success?"default":"destructive",children:v.success?"Connected":"Failed"}),v.error&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:v.error}),v.success&&v.data&&(0,a.jsx)("p",{className:"text-green-600 text-sm",children:"ActiveCampaign API is working correctly"})]}):(0,a.jsx)("p",{className:"text-muted-foreground",children:'Click "Test Connection" to check status'})})]}),i.length>0&&(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsxs)(d.ZB,{className:"flex items-center",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 mr-2"}),"Available Lists (",i.length,")"]}),(0,a.jsx)(d.BT,{children:"These are the mailing lists available in your ActiveCampaign account"})]}),(0,a.jsx)(d.Wu,{children:(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map(e=>(0,a.jsxs)(d.Zp,{className:"border-2",children:[(0,a.jsxs)(d.aR,{className:"pb-3",children:[(0,a.jsx)(d.ZB,{className:"text-lg",children:e.name}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(l.E,{variant:"secondary",children:["ID: ",e.id]}),e.stringid&&(0,a.jsxs)(l.E,{variant:"outline",children:["String ID: ",e.stringid]})]})]}),(0,a.jsx)(d.Wu,{children:(0,a.jsxs)(c.$,{onClick:()=>A(e.id),disabled:j,size:"sm",className:"w-full",children:[j?(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Test Add Contact"]})})]},e.id))})})]}),y&&(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsxs)(d.ZB,{className:"flex items-center",children:[(0,a.jsx)(f.A,{className:"h-5 w-5 mr-2"}),"Test Contact Result"]})}),(0,a.jsx)(d.Wu,{children:(0,a.jsx)("div",{className:"space-y-2",children:y.error?(0,a.jsxs)("div",{children:[(0,a.jsx)(l.E,{variant:"destructive",children:"Failed"}),(0,a.jsx)("p",{className:"text-red-500 text-sm mt-2",children:y.error}),y.details&&(0,a.jsx)("p",{className:"text-red-400 text-xs mt-1",children:y.details})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)(l.E,{variant:"default",children:"Success"}),(0,a.jsx)("p",{className:"text-green-600 text-sm mt-2",children:y.message}),y.contactId&&(0,a.jsxs)("p",{className:"text-muted-foreground text-xs mt-1",children:["Contact ID: ",y.contactId]})]})})})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsx)(d.ZB,{children:"Integration Details"})}),(0,a.jsx)(d.Wu,{className:"space-y-2",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Base URL:"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"https://innovareai.api-us1.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"API Key:"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Configured via environment"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Integration Status:"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"New users will automatically be added to ActiveCampaign when invited"})]})]})})]})]}):(0,a.jsx)("div",{children:"Please sign in to access this page."})}let v=(0,i.default)(()=>Promise.resolve(g),{ssr:!1})},67812:(e,s,t)=>{"use strict";t.d(s,{E:()=>c});var a=t(95155);t(12115);var r=t(83101),n=t(25016);let i=(0,r.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:t}),s),...r})}},76866:(e,s,t)=>{Promise.resolve().then(t.bind(t,36407))},83209:(e,s,t)=>{"use strict";t.d(s,{BT:()=>l,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>c});var a=t(95155),r=t(12115),n=t(25016);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...r})});i.displayName="Card";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});c.displayName="CardHeader";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("font-semibold leading-none tracking-tight",t),...r})});d.displayName="CardTitle";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});l.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},97003:(e,s,t)=>{"use strict";t.d(s,{$:()=>l});var a=t(95155),r=t(12115),n=t(32467),i=t(83101),c=t(25016);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=r.forwardRef((e,s)=>{let{className:t,variant:r,size:i,asChild:l=!1,...o}=e,u=l?n.DX:"button";return(0,a.jsx)(u,{className:(0,c.cn)(d({variant:r,size:i,className:t})),ref:s,...o})});l.displayName="Button"}},e=>{e.O(0,[7349,5040,8760,3665,8441,1255,7358],()=>e(e.s=76866)),_N_E=e.O()}]);