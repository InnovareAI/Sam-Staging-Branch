(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8403],{6866:(e,s,t)=>{Promise.resolve().then(t.bind(t,9512))},9512:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S});var a=t(5155),r=t(2115),i=t(3412),n=t(9718),d=t(7909),c=t(6673),l=t(3101),o=t(2821),m=t(5889);function x(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,m.QP)((0,o.$)(s))}let u=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),h=r.forwardRef((e,s)=>{let{className:t,variant:r,size:i,asChild:n=!1,...d}=e,l=n?c.DX:"button";return(0,a.jsx)(l,{className:x(u({variant:r,size:i,className:t})),ref:s,...d})});h.displayName="Button";let f=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:x("rounded-xl border bg-card text-card-foreground shadow",t),...r})});f.displayName="Card";let g=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:x("flex flex-col space-y-1.5 p-6",t),...r})});g.displayName="CardHeader";let v=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:x("font-semibold leading-none tracking-tight",t),...r})});v.displayName="CardTitle";let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:x("text-sm text-muted-foreground",t),...r})});p.displayName="CardDescription";let j=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:x("p-6 pt-0",t),...r})});j.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:x("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter";let N=(0,l.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function y(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:x(N({variant:t}),s),...r})}var b=t(919),w=t(6154),C=t(7816),A=t(1078),I=t(1169),k=t(3664);function T(){let{user:e}=(0,i.Jd)(),{getToken:s}=(0,n.d)(),[t,d]=(0,r.useState)([]),[c,l]=(0,r.useState)(null),[o,m]=(0,r.useState)(!1),[x,u]=(0,r.useState)(null),N=async()=>{m(!0);try{let e=await fetch("/api/admin/activecampaign?action=test",{headers:{Authorization:"Bearer ".concat(await s())}}),t=await e.json();l(t),t.success&&await T()}catch(e){console.error("Connection test failed:",e),l({success:!1,error:"Connection test failed"})}finally{m(!1)}},T=async()=>{try{let e=await fetch("/api/admin/activecampaign?action=lists",{headers:{Authorization:"Bearer ".concat(await s())}}),t=await e.json();t.lists&&d(t.lists)}catch(e){console.error("Failed to get lists:",e)}},S=async e=>{m(!0);try{let t=await fetch("/api/admin/activecampaign",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(await s())},body:JSON.stringify({email:"test-sam-ai@example.com",firstName:"Test",lastName:"User",listId:e,additionalData:{fieldValues:[{field:"company",value:"InnovareAI"},{field:"source",value:"SAM AI Test"}]}})}),a=await t.json();u(a)}catch(e){console.error("Test contact addition failed:",e),u({error:"Test contact addition failed"})}finally{m(!1)}};return((0,r.useEffect)(()=>{e&&N()},[e]),e)?(0,a.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"ActiveCampaign Integration"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage ActiveCampaign connection and lists"})]}),(0,a.jsxs)(h,{onClick:N,disabled:o,variant:"outline",children:[o?(0,a.jsx)(b.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Test Connection"]})]}),(0,a.jsxs)(f,{children:[(0,a.jsx)(g,{children:(0,a.jsxs)(v,{className:"flex items-center",children:[(null==c?void 0:c.success)?(0,a.jsx)(C.A,{className:"h-5 w-5 text-green-500 mr-2"}):(0,a.jsx)(A.A,{className:"h-5 w-5 text-red-500 mr-2"}),"Connection Status"]})}),(0,a.jsx)(j,{children:c?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y,{variant:c.success?"default":"destructive",children:c.success?"Connected":"Failed"}),c.error&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:c.error}),c.success&&c.data&&(0,a.jsx)("p",{className:"text-green-600 text-sm",children:"ActiveCampaign API is working correctly"})]}):(0,a.jsx)("p",{className:"text-muted-foreground",children:'Click "Test Connection" to check status'})})]}),t.length>0&&(0,a.jsxs)(f,{children:[(0,a.jsxs)(g,{children:[(0,a.jsxs)(v,{className:"flex items-center",children:[(0,a.jsx)(I.A,{className:"h-5 w-5 mr-2"}),"Available Lists (",t.length,")"]}),(0,a.jsx)(p,{children:"These are the mailing lists available in your ActiveCampaign account"})]}),(0,a.jsx)(j,{children:(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>(0,a.jsxs)(f,{className:"border-2",children:[(0,a.jsxs)(g,{className:"pb-3",children:[(0,a.jsx)(v,{className:"text-lg",children:e.name}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(y,{variant:"secondary",children:["ID: ",e.id]}),e.stringid&&(0,a.jsxs)(y,{variant:"outline",children:["String ID: ",e.stringid]})]})]}),(0,a.jsx)(j,{children:(0,a.jsxs)(h,{onClick:()=>S(e.id),disabled:o,size:"sm",className:"w-full",children:[o?(0,a.jsx)(b.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Test Add Contact"]})})]},e.id))})})]}),x&&(0,a.jsxs)(f,{children:[(0,a.jsx)(g,{children:(0,a.jsxs)(v,{className:"flex items-center",children:[(0,a.jsx)(k.A,{className:"h-5 w-5 mr-2"}),"Test Contact Result"]})}),(0,a.jsx)(j,{children:(0,a.jsx)("div",{className:"space-y-2",children:x.error?(0,a.jsxs)("div",{children:[(0,a.jsx)(y,{variant:"destructive",children:"Failed"}),(0,a.jsx)("p",{className:"text-red-500 text-sm mt-2",children:x.error}),x.details&&(0,a.jsx)("p",{className:"text-red-400 text-xs mt-1",children:x.details})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)(y,{variant:"default",children:"Success"}),(0,a.jsx)("p",{className:"text-green-600 text-sm mt-2",children:x.message}),x.contactId&&(0,a.jsxs)("p",{className:"text-muted-foreground text-xs mt-1",children:["Contact ID: ",x.contactId]})]})})})]}),(0,a.jsxs)(f,{children:[(0,a.jsx)(g,{children:(0,a.jsx)(v,{children:"Integration Details"})}),(0,a.jsx)(j,{className:"space-y-2",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Base URL:"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"https://innovareai.api-us1.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"API Key:"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Configured via environment"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Integration Status:"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"New users will automatically be added to ActiveCampaign when invited"})]})]})})]})]}):(0,a.jsx)("div",{children:"Please sign in to access this page."})}let S=(0,d.default)(()=>Promise.resolve(T),{ssr:!1})}},e=>{e.O(0,[6244,8441,1255,7358],()=>e(e.s=6866)),_N_E=e.O()}]);