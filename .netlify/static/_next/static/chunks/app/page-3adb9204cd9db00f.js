(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{2262:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ec});var a=t(5155),r=t(2115);function l(){let[e,s]=(0,r.useState)(null),[t,l]=(0,r.useState)("idle");return(0,a.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-white",children:"Upload Document"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-600 rounded p-6 text-center",children:[(0,a.jsx)("input",{type:"file",onChange:e=>{var t,a;return s(null!=(a=null==(t=e.target.files)?void 0:t[0])?a:null)},className:"text-gray-300"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"PDF, DOCX, MD, URL exports"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,a.jsx)("button",{className:"px-3 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:opacity-50 transition-colors",disabled:!e||"uploading"===t,onClick:()=>l("done"),children:"uploading"===t?"Uploading…":"Upload (mock)"}),e&&(0,a.jsxs)("span",{className:"text-sm text-gray-400",children:["Selected: ",e.name]})]})]})}function n(){let[e,s]=(0,r.useState)(""),[t,l]=(0,r.useState)([]);return(0,a.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-white",children:"Test Knowledge Retrieval"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{className:"bg-gray-700 border border-gray-600 px-3 py-2 rounded text-white placeholder-gray-400 w-full focus:border-purple-500 focus:outline-none",placeholder:"Ask a question…",value:e,onChange:e=>s(e.target.value)}),(0,a.jsx)("button",{className:"px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors",onClick:()=>{l([{score:.89,text:"Our ICP are B2B SaaS startups…",labels:["icp","saas"]},{score:.74,text:"Competitors include HubSpot and Apollo…",labels:["competitive"]},{score:.66,text:"Success metrics: reply %, meetings/mo, ROI…",labels:["metrics"]}])},children:"Run"})]}),(0,a.jsx)("div",{className:"space-y-2 mt-3 max-h-72 overflow-auto",children:t.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 bg-gray-700 border border-gray-600 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[(0,a.jsx)("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-gray-800 text-white text-[10px]",children:(100*e.score).toFixed(0)}),(0,a.jsx)("span",{children:"score"})]}),(0,a.jsx)("div",{className:"text-sm mt-1 text-gray-300",children:e.text}),(0,a.jsx)("div",{className:"flex gap-2 mt-2 flex-wrap",children:e.labels.map(e=>(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs rounded bg-gray-600 text-gray-200",children:e},e))})]},s))})]})}let i=[{name:"ICP_SaaS.pdf",status:"Ready",uploaded:"10m ago",labels:["icp","saas"]},{name:"Competitors_2025.md",status:"Processing",uploaded:"2m ago",labels:["competitive"]},{name:"CaseStudy_Acme.pdf",status:"Error",uploaded:"1h ago",labels:[]}];function c(){return(0,a.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg",children:[(0,a.jsx)("div",{className:"px-4 py-3 border-b border-gray-700 font-semibold text-white",children:"Documents"}),(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-750 text-gray-400",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left px-4 py-2",children:"File Name"}),(0,a.jsx)("th",{className:"text-left px-4 py-2",children:"Status"}),(0,a.jsx)("th",{className:"text-left px-4 py-2",children:"Uploaded"}),(0,a.jsx)("th",{className:"text-left px-4 py-2",children:"Labels"}),(0,a.jsx)("th",{className:"text-right px-4 py-2",children:"Action"})]})}),(0,a.jsx)("tbody",{children:i.map(e=>(0,a.jsxs)("tr",{className:"border-t border-gray-700",children:[(0,a.jsx)("td",{className:"px-4 py-2 text-gray-300",children:e.name}),(0,a.jsxs)("td",{className:"px-4 py-2",children:["Ready"===e.status&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-green-400",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Ready"]}),"Processing"===e.status&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-yellow-400",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Processing"]}),"Error"===e.status&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-red-400",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-red-500"}),"Error"]})]}),(0,a.jsx)("td",{className:"px-4 py-2 text-gray-400",children:e.uploaded}),(0,a.jsx)("td",{className:"px-4 py-2",children:(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:e.labels.length?e.labels.map(e=>(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs rounded bg-gray-600 text-gray-200",children:e},e)):(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"—"})})}),(0,a.jsx)("td",{className:"px-4 py-2 text-right",children:(0,a.jsx)("button",{className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded transition-colors",children:"View Chunks"})})]},e.name))})]})]})}let o=[{text:"Our ICP: B2B SaaS, 50–200 employees, NA/EU, VP Sales/CRO…",labels:["icp","saas","vp_sales"],confidence:.92},{text:"Competitors: HubSpot, Apollo; we win on personalization at scale…",labels:["competitive"],confidence:.81}];function d(){let[e,s]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-gray-700 flex items-center justify-between",children:[(0,a.jsx)("div",{className:"font-semibold text-white",children:"Chunks"}),(0,a.jsx)("button",{className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded transition-colors",onClick:()=>s(!e),children:e?"Close":"Open"})]}),e&&(0,a.jsx)("div",{className:"p-4 space-y-3 max-h-72 overflow-auto",children:o.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 bg-gray-700 border border-gray-600 rounded",children:[(0,a.jsx)("div",{className:"text-sm text-gray-300",children:e.text}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2 flex-wrap",children:[e.labels.map(e=>(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs rounded bg-gray-600 text-gray-200",children:e},e)),(0,a.jsxs)("span",{className:"ml-auto text-xs text-gray-400",children:["conf: ",Math.round(100*e.confidence),"%"]})]})]},s))})]})}let x=()=>(0,a.jsxs)("div",{className:"flex-1 bg-gray-900 p-6 overflow-y-auto",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Knowledge Base"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Manage and search your knowledge documents"})]})}),(0,a.jsxs)("div",{className:"max-w-7xl space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(l,{}),(0,a.jsx)(n,{})]}),(0,a.jsx)(c,{}),(0,a.jsx)(d,{})]})]});var m=t(6485),p=t(1761),u=t(5899),h=t(3664),g=t(6983),b=t(1169),y=t(5368);let j=[{id:"1",type:"demo",subject:"Demo request from Acme Corp",from:"kevin@acme.com",time:"now",company:"Acme Corp",details:"Interested in our enterprise solution for 500+ employees"},{id:"2",type:"pricing",subject:"Pricing for 10k leads",from:"mara@beta.com",time:"5m",company:"Beta Systems",details:"Need pricing information for processing 10,000 leads monthly"},{id:"3",type:"support",subject:"Login issue",from:"ops@charlie.com",time:"10m",company:"Charlie Solutions",details:"Users unable to access dashboard since this morning"},{id:"4",type:"demo",subject:"Product walkthrough request",from:"sarah@deltatech.com",time:"1h",company:"Delta Tech",details:"Technical team wants to see API integration capabilities"}];function f(){let[e,s]=(0,r.useState)(j[0]),t=e=>{switch(e){case"demo":return m.A;case"pricing":return p.A;case"support":return u.A;default:return h.A}},l=e=>{switch(e){case"demo":return"text-green-400 bg-green-900/20";case"pricing":return"text-blue-400 bg-blue-900/20";case"support":return"text-orange-400 bg-orange-900/20";default:return"text-gray-400 bg-gray-900/20"}};return(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[(0,a.jsxs)("div",{className:"lg:col-span-1 bg-gray-800 border border-gray-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"border-b border-gray-700 p-4",children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:"Inbound Requests"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Recent inquiries and requests"})]}),(0,a.jsx)("div",{className:"divide-y divide-gray-700 max-h-96 overflow-y-auto",children:j.map(r=>{let n=t(r.type),i=r.id===e.id;return(0,a.jsx)("div",{onClick:()=>s(r),className:"p-4 cursor-pointer transition-colors ".concat(i?"bg-purple-900/30 border-l-4 border-l-purple-500":"hover:bg-gray-700"),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(l(r.type)),children:(0,a.jsx)(n,{size:16})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-xs uppercase font-medium ".concat(l(r.type).split(" ")[0]),children:r.type}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-400",children:[(0,a.jsx)(g.A,{size:12,className:"mr-1"}),r.time]})]}),(0,a.jsx)("h4",{className:"text-sm text-white font-medium truncate mb-1",children:r.subject}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 truncate",children:[r.from," • ",r.company]})]})]})},r.id)})})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 bg-gray-800 border border-gray-700 rounded-lg",children:[(0,a.jsx)("div",{className:"border-b border-gray-700 p-4",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(l(e.type)),children:r.createElement(t(e.type),{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xs uppercase font-medium ".concat(l(e.type).split(" ")[0]),children:e.type}),(0,a.jsx)("h2",{className:"text-white font-semibold",children:e.subject})]})]})})}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"From:"}),(0,a.jsx)("span",{className:"text-white",children:e.from})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Company:"}),(0,a.jsx)("span",{className:"text-white",children:e.company})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Time:"}),(0,a.jsx)("span",{className:"text-white",children:e.time})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-white font-medium mb-2",children:"Details"}),(0,a.jsx)("div",{className:"bg-gray-700 rounded-lg p-4",children:(0,a.jsx)("p",{className:"text-gray-300 text-sm",children:e.details})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 pt-4 border-t border-gray-700",children:["demo"===e.type&&(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(m.A,{size:16}),"Send Calendar Link"]}),"pricing"===e.type&&(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(p.A,{size:16}),"Send Pricing Sheet"]}),"support"===e.type&&(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(u.A,{size:16}),"Route to Support"]}),(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-600 hover:bg-gray-700 text-gray-300 rounded-lg transition-colors",children:[(0,a.jsx)(b.A,{size:16}),"Create Callback"]}),(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 border border-gray-600 hover:bg-gray-700 text-gray-300 rounded-lg transition-colors",children:[(0,a.jsx)(y.A,{size:16}),"Escalate to AE"]})]})]})]})]})}let v=()=>(0,a.jsxs)("div",{className:"flex-1 bg-gray-900 p-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Contact Center"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Manage inbound requests and customer communications"})]}),(0,a.jsx)("div",{className:"h-[calc(100vh-200px)]",children:(0,a.jsx)(f,{})})]});var N=t(3511),w=t(5921),k=t(33),S=t(6191);let C=[{id:"c1",name:"VP Sales (SaaS, NA)",status:"draft",sent:0,opened:0,replied:0},{id:"c2",name:"Founders (Consulting, EU)",status:"active",sent:47,opened:23,replied:5},{id:"c3",name:"CTOs (Fintech, Global)",status:"paused",sent:132,opened:61,replied:12}];function A(){return(0,a.jsx)("div",{className:"space-y-3",children:C.map(e=>(0,a.jsxs)("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:e.name}),(0,a.jsx)("span",{className:"text-xs uppercase px-2 py-1 rounded ".concat((e=>{switch(e){case"active":return"text-green-400 bg-green-900/20";case"paused":return"text-yellow-400 bg-yellow-900/20";default:return"text-gray-400 bg-gray-900/20"}})(e.status)),children:e.status})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:["active"===e.status?(0,a.jsx)("button",{className:"p-2 text-yellow-400 hover:bg-gray-700 rounded",children:(0,a.jsx)(N.A,{size:16})}):(0,a.jsx)("button",{className:"p-2 text-green-400 hover:bg-gray-700 rounded",children:(0,a.jsx)(w.A,{size:16})}),(0,a.jsx)("button",{className:"p-2 text-blue-400 hover:bg-gray-700 rounded",children:(0,a.jsx)(k.A,{size:16})})]})]}),"draft"!==e.status&&(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-white font-medium",children:e.sent}),(0,a.jsx)("div",{className:"text-gray-400",children:"Sent"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-white font-medium",children:e.opened}),(0,a.jsx)("div",{className:"text-gray-400",children:"Opened"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-white font-medium",children:e.replied}),(0,a.jsx)("div",{className:"text-gray-400",children:"Replied"})]})]})]},e.id))})}function _(){let[e,s]=(0,r.useState)("Outbound – VP Sales (SaaS, NA)"),t=async()=>{alert("Created draft campaign: ".concat(e))};return(0,a.jsxs)("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-white",children:"New Campaign"}),(0,a.jsx)("input",{className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-purple-500 focus:outline-none",value:e,onChange:e=>s(e.target.value),placeholder:"Campaign name..."}),(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"Create Draft"})]})}let I=()=>{let[e,s]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"flex-1 bg-gray-900 p-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Campaign Hub"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Design, approve, and launch marketing campaigns"})]}),(0,a.jsxs)("button",{onClick:()=>s(!e),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(S.A,{size:16}),"New Campaign"]})]}),(0,a.jsxs)("div",{className:"max-w-4xl space-y-6",children:[e&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(_,{})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Active Campaigns"}),(0,a.jsx)(A,{})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8",children:[(0,a.jsx)("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(h.A,{size:24,className:"text-blue-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:"179"}),(0,a.jsx)("div",{className:"text-gray-400 text-sm",children:"Total Sent"})]})]})}),(0,a.jsx)("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(k.A,{size:24,className:"text-green-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:"84"}),(0,a.jsx)("div",{className:"text-gray-400 text-sm",children:"Opened"})]})]})}),(0,a.jsx)("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(b.A,{size:24,className:"text-purple-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:"17"}),(0,a.jsx)("div",{className:"text-gray-400 text-sm",children:"Replies"})]})]})})]})]})]})},z=["Prospects","Qualified","Opportunities","Closed"],E={Prospects:[{id:"p1",name:"Acme Inc."},{id:"p2",name:"Beta LLC"}],Qualified:[{id:"q1",name:"CoreTech"}],Opportunities:[{id:"o1",name:"DeltaWorks"}],Closed:[{id:"c1",name:"Everest"}]};function P(){let[e,s]=(0,r.useState)(E);return(0,a.jsx)("div",{className:"grid grid-cols-4 gap-4",children:z.map(t=>{var r;return(0,a.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"font-semibold mb-4 text-white text-center",children:t}),(0,a.jsx)("div",{className:"space-y-3",children:null==(r=e[t])?void 0:r.map((r,l)=>(0,a.jsxs)("div",{className:"p-3 bg-gray-700 border border-gray-600 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-white font-medium mb-2",children:r.name}),(0,a.jsx)("div",{className:"flex gap-1 flex-wrap",children:z.filter(e=>e!==t).map(r=>(0,a.jsx)("button",{onClick:()=>((t,a,r)=>{let l=e[t][r],n={...e};n[t]=n[t].filter((e,s)=>s!==r),n[a]=[...n[a],l],s(n)})(t,r,l),className:"px-2 py-1 bg-gray-600 hover:bg-gray-500 text-gray-200 rounded text-xs transition-colors",children:r},r))})]},r.id))})]},t)})})}let D=()=>(0,a.jsxs)("div",{className:"flex-1 bg-gray-900 p-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Lead Pipeline"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Track prospects from discovery to opportunities"})]}),(0,a.jsx)("div",{className:"max-w-7xl",children:(0,a.jsx)(P,{})})]});function L(){return(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Readiness",value:"82%"},{label:"Reply Rate",value:"9.8%"},{label:"Meetings / Mo",value:"34"},{label:"ROI (90d)",value:"9.6x"}].map(e=>(0,a.jsxs)("div",{className:"p-6 bg-gray-800 border border-gray-700 rounded-lg",children:[(0,a.jsx)("div",{className:"text-xs uppercase text-gray-400 mb-2",children:e.label}),(0,a.jsx)("div",{className:"text-3xl font-semibold text-white",children:e.value})]},e.label))})}let T=()=>(0,a.jsxs)("div",{className:"flex-1 bg-gray-900 p-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Analytics"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Performance metrics, insights, and optimization recommendations"})]}),(0,a.jsx)("div",{className:"max-w-6xl",children:(0,a.jsx)(L,{})})]});var U=t(4485),O=t(6046),F=t(5229),M=t(6651),R=t(7107),q=t(5937),W=t(1360),B=t(7726);let J=["qualified","demo-scheduled","proposal-sent","negotiation","closed-won","closed-lost","fintech","healthcare","enterprise","startup","saas","manufacturing","hot-lead","warm-lead","cold-lead","follow-up-needed","decision-maker","influencer","linkedin","referral","cold-outreach","inbound","webinar","conference","prospect-research","company-analysis","competitor-intel","market-research","meddic","spin","challenger","discovery","objection-handling"];function H(e){let{currentTags:s=[],onTagsChange:t,suggestedTags:l=J,className:n="",maxTags:i=10,placeholder:c="Add tags..."}=e,[o,d]=(0,r.useState)(!1),[x,m]=(0,r.useState)(""),[p,u]=(0,r.useState)([]),h=(0,r.useRef)(null),g=(0,r.useRef)(null);(0,r.useEffect)(()=>{x.trim()?u(l.filter(e=>e.toLowerCase().includes(x.toLowerCase())&&!s.includes(e)).slice(0,8)):u(l.filter(e=>!s.includes(e)).slice(0,8))},[x,s,l]),(0,r.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&(d(!1),m(""))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let b=e=>{let a=e.trim().toLowerCase();a&&!s.includes(a)&&s.length<i&&(t([...s,a]),m(""),d(!1))},y=e=>{t(s.filter(s=>s!==e))};return(0,a.jsxs)("div",{ref:g,className:"relative ".concat(n),children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:s.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(["hot-lead","decision-maker","qualified"].includes(e)?"bg-red-100 text-red-800":["warm-lead","demo-scheduled","follow-up-needed"].includes(e)?"bg-orange-100 text-orange-800":["cold-lead","prospect-research"].includes(e)?"bg-blue-100 text-blue-800":["closed-won","proposal-sent"].includes(e)?"bg-green-100 text-green-800":["linkedin","referral","inbound"].includes(e)?"bg-purple-100 text-purple-800":["meddic","spin","challenger"].includes(e)?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800"),children:[(0,a.jsx)(R.A,{size:12,className:"mr-1"}),e,(0,a.jsx)("button",{onClick:()=>y(e),className:"ml-1 hover:bg-black hover:bg-opacity-20 rounded-full p-0.5",children:(0,a.jsx)(F.A,{size:12})})]},e))}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)("input",{ref:h,type:"text",value:x,onChange:e=>m(e.target.value),onKeyDown:e=>{switch(e.key){case"Enter":e.preventDefault(),x.trim()&&b(x);break;case"Escape":d(!1),m("");break;case"Backspace":!x&&s.length>0&&y(s[s.length-1])}},onFocus:()=>d(!0),placeholder:s.length>=i?"Max ".concat(i," tags reached"):c,disabled:s.length>=i,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed"}),(0,a.jsx)(B.A,{className:"absolute right-3 top-2.5 h-4 w-4 text-gray-400"})]}),x.trim()&&(0,a.jsx)("button",{onClick:()=>b(x),className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:(0,a.jsx)(S.A,{size:16})})]}),o&&p.length>0&&(0,a.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-gray-500 mb-2",children:"Suggested tags:"}),(0,a.jsx)("div",{className:"space-y-1",children:p.map(e=>(0,a.jsxs)("button",{onClick:()=>b(e),className:"w-full text-left px-2 py-1 text-sm hover:bg-gray-100 rounded flex items-center space-x-2",children:[(0,a.jsx)(R.A,{size:12,className:"text-gray-400"}),(0,a.jsx)("span",{children:e})]},e))})]})})]}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[s.length,"/",i," tags"]})]})}function K(e){let{isOpen:s,onClose:t,currentMessages:l,onLoadConversation:n,className:i=""}=e,{threads:c,isLoading:o,loadThreads:d,createThread:x,deleteThread:m}=function(){let[e,s]=(0,r.useState)([]),[t,a]=(0,r.useState)(null),[l,n]=(0,r.useState)([]),[i,c]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!1),[x,m]=(0,r.useState)(null),p=(0,r.useCallback)(async e=>{try{var t;c(!0),m(null);let a=new URLSearchParams;(null==e?void 0:e.thread_type)&&a.append("type",e.thread_type),(null==e?void 0:e.status)&&a.append("status",e.status),(null==e?void 0:e.priority)&&a.append("priority",e.priority),(null==e?void 0:e.search)&&a.append("search",e.search),(null==e||null==(t=e.tags)?void 0:t.length)&&a.append("tags",e.tags.join(","));let r=await fetch("/api/sam/threads?".concat(a));if(!r.ok){if(401===r.status||403===r.status){console.log("\uD83D\uDCA1 User not authenticated, skipping thread load"),s([]);return}throw Error("Failed to load conversation threads")}let l=await r.json();s(l.threads||[])}catch(e){console.error("\uD83D\uDCA5 Load threads error:",e),m(e instanceof Error?e.message:"Unknown error")}finally{c(!1)}},[]),u=(0,r.useCallback)(async e=>{try{c(!0);let s=await fetch("/api/sam/threads/".concat(e,"/messages"));if(!s.ok)throw Error("Failed to load thread messages");let t=await s.json();n(t.messages||[])}catch(e){m(e instanceof Error?e.message:"Unknown error")}finally{c(!1)}},[]),h=(0,r.useCallback)(async e=>{try{c(!0);let t=await fetch("/api/sam/threads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create thread: ".concat(t.status));let r=(await t.json()).thread;return s(e=>[r,...e]),a(r),n([]),r}catch(e){return m(e instanceof Error?e.message:"Unknown error"),null}finally{c(!1)}},[]),g=(0,r.useCallback)(async(e,s,t)=>{let a=s&&t?"".concat(s," - ").concat(t):"LinkedIn Research - ".concat(new Date().toLocaleDateString());return await h({title:a,thread_type:"linkedin_research",prospect_name:s,prospect_company:t,prospect_linkedin_url:e,tags:["linkedin","prospect-research"],priority:"medium",sales_methodology:"meddic"})},[h]),b=(0,r.useCallback)(async(e,a)=>{if(!e.trim())return null;let r=t,l=e.match(/https?:\/\/(www\.)?linkedin\.com\/in\/[^\s]+/gi);if(l&&!r&&(console.log("\uD83D\uDD17 LinkedIn URL detected, creating research thread..."),!(r=await g(l[0])))||!r&&!(r=await h({title:"Chat - ".concat(new Date().toLocaleDateString()),thread_type:"general",priority:"medium",sales_methodology:"meddic"})))return null;let i=a||r.id;try{d(!0);let t=await fetch("/api/sam/threads/".concat(i,"/messages"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})});if(!t.ok){let e=await t.text();throw Error("Failed to send message: ".concat(t.status," - ").concat(e))}let a=await t.json();return a.userMessage&&a.samMessage&&(n(e=>[...e,a.userMessage,a.samMessage]),s(e=>e.map(e=>e.id===i?{...e,last_user_message:a.userMessage.content,last_sam_message:a.samMessage.content,message_count:e.message_count+2,last_active_at:new Date().toISOString()}:e))),a}catch(e){return console.error("\uD83D\uDCA5 SendMessage error:",e),m(e instanceof Error?e.message:"Unknown error"),null}finally{d(!1)}},[t,h,g]),y=(0,r.useCallback)(async e=>{a(e),await u(e.id)},[u]),j=(0,r.useCallback)(async(e,r)=>{try{let l=await fetch("/api/sam/threads/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!l.ok)throw Error("Failed to update thread");let n=(await l.json()).thread;return s(s=>s.map(s=>s.id===e?n:s)),(null==t?void 0:t.id)===e&&a(n),n}catch(e){return m(e instanceof Error?e.message:"Unknown error"),null}},[t]),f=(0,r.useCallback)(async e=>await j(e,{status:"archived"}),[j]),v=(0,r.useCallback)(async e=>{try{if(!(await fetch("/api/sam/threads/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete thread");return s(s=>s.filter(s=>s.id!==e)),(null==t?void 0:t.id)===e&&(a(null),n([])),!0}catch(e){return m(e instanceof Error?e.message:"Unknown error"),!1}},[t]),N=(0,r.useCallback)(()=>e.reduce((e,s)=>(e[s.thread_type]||(e[s.thread_type]=[]),e[s.thread_type].push(s),e),{}),[e]),w=(0,r.useCallback)(function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return e.filter(e=>"active"===e.status).sort((e,s)=>new Date(s.last_active_at).getTime()-new Date(e.last_active_at).getTime()).slice(0,s)},[e]);return{threads:e,currentThread:t,messages:l,isLoading:i,isSending:o,error:x,loadThreads:p,loadMessages:u,createThread:h,createLinkedInThread:g,sendMessage:b,switchToThread:y,updateThread:j,archiveThread:f,deleteThread:v,getThreadsByType:N,getRecentThreads:w,clearError:()=>m(null)}}(),[p,u]=(0,r.useState)(""),[h,b]=(0,r.useState)([]),[y,j]=(0,r.useState)(!1),[f,v]=(0,r.useState)({title:"",tags:[],priority:"medium"});(0,r.useEffect)(()=>{s&&d()},[s,d]);let N=c.filter(e=>{var s,t,a;if(p){let a=p.toLowerCase();if(!e.title.toLowerCase().includes(a)&&!(null==(s=e.prospect_name)?void 0:s.toLowerCase().includes(a))&&!(null==(t=e.tags)?void 0:t.some(e=>e.toLowerCase().includes(a))))return!1}return(!(h.length>0)||!!(null==(a=e.tags)?void 0:a.some(e=>h.includes(e))))&&!0}),w=Array.from(new Set(c.flatMap(e=>e.tags||[]))),k=async()=>{if(0===l.length)return void alert("No conversation to save");if(!f.title.trim())return void alert("Please enter a title for the conversation");try{if(await x({title:f.title,thread_type:"general",priority:f.priority,tags:f.tags})){for(let e of l);alert("Conversation saved successfully!"),j(!1),v({title:"",tags:[],priority:"medium"}),d()}}catch(e){console.error("Failed to save conversation:",e),alert("Failed to save conversation")}},S=async e=>{try{let s=await fetch("/api/sam/threads/".concat(e.id,"/messages"));if(!s.ok)throw Error("Failed to load thread messages");let a=(await s.json()).messages||[];a.length>0?(n(a),t()):alert("No messages found in this conversation")}catch(e){console.error("Failed to load conversation:",e),alert("Failed to load conversation")}},C=async(e,s)=>{if(confirm('Are you sure you want to delete "'.concat(s,'"? This cannot be undone.')))try{await m(e),d()}catch(e){console.error("Failed to delete thread:",e),alert("Failed to delete conversation")}};return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl h-[80vh] flex flex-col ".concat(i),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(U.A,{className:"text-purple-400",size:24}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Conversation History"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[l.length>0&&(0,a.jsxs)("button",{onClick:()=>j(!0),className:"flex items-center space-x-2 px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(O.A,{size:16}),(0,a.jsx)("span",{children:"Save Current"})]}),(0,a.jsx)("button",{onClick:t,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:(0,a.jsx)(F.A,{size:20})})]})]}),(0,a.jsxs)("div",{className:"p-4 border-b border-gray-700 space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(M.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search conversations...",value:p,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),w.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400 self-center",children:"Filter by tags:"}),w.slice(0,10).map(e=>(0,a.jsxs)("button",{onClick:()=>{b(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium transition-colors ".concat(h.includes(e)?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:[(0,a.jsx)(R.A,{size:10,className:"mr-1"}),e]},e))]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:o?(0,a.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Loading conversations..."}):0===N.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(q.A,{className:"mx-auto mb-4 text-gray-600",size:48}),(0,a.jsx)("p",{className:"text-gray-400",children:p||h.length>0?"No conversations match your filters.":"No saved conversations yet."}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Start chatting and save important conversations to access them later."})]}):(0,a.jsx)("div",{className:"space-y-3",children:N.map(e=>(0,a.jsx)("div",{className:"bg-gray-700 rounded-lg p-4 hover:bg-gray-600 transition-colors group",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("h3",{className:"text-white font-medium truncate",children:e.title}),(0,a.jsx)("span",{className:"text-xs ".concat((e=>{switch(e){case"urgent":return"text-red-400";case"high":return"text-orange-400";case"medium":return"text-blue-400";default:return"text-gray-400"}})(e.priority)),children:e.priority})]}),e.prospect_name&&(0,a.jsxs)("p",{className:"text-sm text-gray-300 mb-2",children:[e.prospect_name,e.prospect_company&&" • ".concat(e.prospect_company)]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-400 mb-2",children:[(0,a.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,a.jsx)(g.A,{size:12}),(0,a.jsx)("span",{children:(e=>{let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/36e5),a=Math.floor(t/24);return t<1?"Just now":t<24?"".concat(t,"h ago"):a<7?"".concat(a,"d ago"):s.toLocaleDateString()})(e.last_active_at)})]}),(0,a.jsxs)("span",{children:[e.message_count," messages"]})]}),e.tags&&e.tags.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,4).map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-gray-600 text-gray-300 rounded text-xs",children:[(0,a.jsx)(R.A,{size:8,className:"mr-1"}),e]},e)),e.tags.length>4&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.tags.length-4]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("button",{onClick:()=>S(e),className:"px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded transition-colors",children:"Load"}),(0,a.jsx)("button",{onClick:()=>C(e.id,e.title),className:"p-1 text-gray-400 hover:text-red-400 transition-colors",children:(0,a.jsx)(W.A,{size:14})})]})]})},e.id))})}),y&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Save Conversation"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),(0,a.jsx)("input",{type:"text",value:f.title,onChange:e=>v(s=>({...s,title:e.target.value})),placeholder:"Enter conversation title...",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Priority"}),(0,a.jsxs)("select",{value:f.priority,onChange:e=>v(s=>({...s,priority:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"}),(0,a.jsx)("option",{value:"urgent",children:"Urgent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tags"}),(0,a.jsx)(H,{currentTags:f.tags,onTagsChange:e=>v(s=>({...s,tags:e})),maxTags:5,className:"text-sm"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,a.jsx)("button",{onClick:k,className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-lg transition-colors",children:"Save"}),(0,a.jsx)("button",{onClick:()=>j(!1),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded-lg transition-colors",children:"Cancel"})]})]})})]})}):null}function V(e){let{isOpen:s,onClose:t,title:r,children:l,size:n="md",showCloseButton:i=!0,className:c=""}=e;return s?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-900/90 backdrop-blur-md",onClick:t}),(0,a.jsxs)("div",{className:"\n        relative w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[n]," mx-4 \n        bg-gray-800 rounded-lg border border-gray-600\n        shadow-xl shadow-black/30\n        transform transition-all duration-300 ease-out\n        ").concat(c,"\n      "),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-600 bg-gray-700/50",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:r}),i&&(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-200 transition-colors p-2 rounded-md hover:bg-gray-700",children:(0,a.jsx)(F.A,{size:18})})]}),(0,a.jsx)("div",{className:"p-6",children:l})]})]}):null}function G(e){let{isOpen:s,onClose:t,title:r,children:l,onSubmit:n,submitText:i="Submit",submitDisabled:c=!1,size:o="md"}=e;return(0,a.jsx)(V,{isOpen:s,onClose:t,title:r,size:o,children:(0,a.jsxs)("form",{onSubmit:n,className:"space-y-6",children:[l,(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-600",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"px-6 py-2 text-gray-300 bg-gray-600 hover:bg-gray-500 rounded-lg transition-colors font-medium",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors font-medium",children:i})]})]})})}function Q(e){let{label:s,type:t="text",value:r,onChange:l,placeholder:n,required:i=!1,disabled:c=!1,error:o}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[s,i&&(0,a.jsx)("span",{className:"text-red-400 ml-1",children:"*"})]}),(0,a.jsx)("input",{type:t,value:r,onChange:e=>l(e.target.value),placeholder:n,required:i,disabled:c,className:"\n          w-full px-3 py-2 bg-gray-700 text-white rounded-lg border border-gray-600\n          focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\n          disabled:bg-gray-800 disabled:cursor-not-allowed\n          ".concat(o?"border-red-500 focus:ring-red-500":"","\n        ")}),o&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-400",children:o})]})}function X(e){let{label:s,value:t,onChange:r,options:l,required:n=!1,disabled:i=!1,error:c}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[s,n&&(0,a.jsx)("span",{className:"text-red-400 ml-1",children:"*"})]}),(0,a.jsx)("select",{value:t,onChange:e=>r(e.target.value),required:n,disabled:i,className:"\n          w-full px-3 py-2 bg-gray-700 text-white rounded-lg border border-gray-600\n          focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\n          disabled:bg-gray-800 disabled:cursor-not-allowed\n          ".concat(c?"border-red-500 focus:ring-red-500":"","\n        "),children:l.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),c&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-400",children:c})]})}var Y=t(9408);function Z(e){let{isOpen:s,onClose:t,onSubmit:l,workspaces:n=[]}=e,[i,c]=(0,r.useState)({email:"",firstName:"",lastName:"",company:"InnovareAI",role:"member",workspaceId:""}),[o,d]=(0,r.useState)(!1),[x,m]=(0,r.useState)({}),p=async e=>{if(e.preventDefault(),(()=>{let e={};return i.email.trim()?/\S+@\S+\.\S+/.test(i.email)||(e.email="Invalid email format"):e.email="Email is required",i.firstName.trim()||(e.firstName="First name is required"),i.lastName.trim()||(e.lastName="Last name is required"),i.workspaceId||(e.workspaceId="Workspace selection is required"),m(e),0===Object.keys(e).length})()){d(!0);try{await l(i),c({email:"",firstName:"",lastName:"",company:"InnovareAI",role:"member",workspaceId:""}),m({}),t()}catch(e){console.error("Invitation failed:",e)}finally{d(!1)}}};console.log("\uD83D\uDCCB InviteUserPopup received workspaces:",(null==n?void 0:n.length)||0),console.log("\uD83D\uDCCB Workspace names in invite popup:",(null==n?void 0:n.map(e=>e.name))||[]);let u=[{value:"",label:"Select a workspace..."},...n.map(e=>({value:e.id,label:"".concat(e.name).concat(e.company?" (".concat(e.company,")"):e.slug?" (".concat(e.slug,")"):"")}))];return(0,a.jsxs)(G,{isOpen:s,onClose:()=>{o||(c({email:"",firstName:"",lastName:"",company:"InnovareAI",role:"member",workspaceId:""}),m({}),t())},title:"Invite User to SAM AI",onSubmit:p,submitText:o?"Sending Invitation...":"Send Invitation",submitDisabled:o,size:"md",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(h.A,{className:"text-white",size:24})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-white",children:"Send Invitation"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Invite a new user to join your SAM AI workspace"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(Q,{label:"First Name",value:i.firstName,onChange:e=>c({...i,firstName:e}),placeholder:"John",required:!0,disabled:o,error:x.firstName}),(0,a.jsx)(Q,{label:"Last Name",value:i.lastName,onChange:e=>c({...i,lastName:e}),placeholder:"Doe",required:!0,disabled:o,error:x.lastName})]}),(0,a.jsx)(Q,{label:"Email Address",type:"email",value:i.email,onChange:e=>c({...i,email:e}),placeholder:"john.doe@company.com",required:!0,disabled:o,error:x.email}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(X,{label:"Company",value:i.company,onChange:e=>c({...i,company:e}),options:[{value:"InnovareAI",label:"InnovareAI"},{value:"3cubedai",label:"3CubedAI"}],required:!0,disabled:o}),(0,a.jsx)(X,{label:"Role",value:i.role,onChange:e=>c({...i,role:e}),options:[{value:"member",label:"Member"},{value:"admin",label:"Admin"},{value:"owner",label:"Owner"}],required:!0,disabled:o})]}),(0,a.jsx)(X,{label:"Target Workspace",value:i.workspaceId||"",onChange:e=>c({...i,workspaceId:e}),options:u,required:!0,disabled:o,error:x.workspaceId}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-gray-700 rounded-lg",children:[(0,a.jsx)(Y.A,{size:16,className:"text-gray-400"}),(0,a.jsxs)("span",{className:"text-sm text-gray-300",children:["Email will be sent from:"," ",(0,a.jsx)("span",{className:"font-medium ".concat("InnovareAI"===i.company?"text-blue-400":"text-green-400"),children:"InnovareAI"===i.company?"sp@innovareai.com (Sarah Powell)":"sophia@3cubed.ai (Sophia)"})]})]})]})]})}var $=t(8760),ee=t(8446),es=t(403),et=t(1524),ea=t(508),er=t(5870),el=t(4926),en=t(4285),ei=t(8085);function ec(){var e,s;let t=(0,$.createClientComponentClient)(),[l,n]=(0,r.useState)(null),[i,c]=(0,r.useState)(!0),[o,d]=(0,r.useState)(!0),[m,p]=(0,r.useState)(""),[u,g]=(0,r.useState)("chat"),[y,j]=(0,r.useState)([]),[f,N]=(0,r.useState)(!1),[w,S]=(0,r.useState)(!1),[C,A]=(0,r.useState)(!1),[_,z]=(0,r.useState)({password:"",confirmPassword:"",loading:!1}),[E,P]=(0,r.useState)(!1),L=(0,r.useRef)(null),[O,F]=(0,r.useState)([]),[M,R]=(0,r.useState)(!1),[W,B]=(0,r.useState)(""),[J,H]=(0,r.useState)(!1),[V,G]=(0,r.useState)(!1),[Q,X]=(0,r.useState)("InnovareAI"),[ec,eo]=(0,r.useState)(!1),[ed,ex]=(0,r.useState)(new Set),[em,ep]=(0,r.useState)(!1),[eu,eh]=(0,r.useState)(""),[eg,eb]=(0,r.useState)(null),[ey,ej]=(0,r.useState)(!1),[ef,ev]=(0,r.useState)([]),[eN,ew]=(0,r.useState)(!1),[ek,eS]=(0,r.useState)(null),[eC,eA]=(0,r.useState)(new Set),[e_,eI]=(0,r.useState)(!1),ez=e=>["tl@innovareai.com","cl@innovareai.com"].includes(e.toLowerCase());(0,r.useEffect)(()=>{(async()=>{try{let{data:{user:e}}=await t.auth.getUser();if(console.log("Auth check result:",e?"authenticated":"not authenticated"),n(e),e){let s=ez(e.email||"");G(s),eT(e.id,s)}}catch(e){console.error("Error getting user:",e),n(null)}finally{c(!1)}})();let{data:{subscription:e}}=t.auth.onAuthStateChange((e,s)=>{if(console.log("Auth state change:",e,(null==s?void 0:s.user)?"user present":"no user"),n((null==s?void 0:s.user)||null),null==s?void 0:s.user){let e=ez(s.user.email||"");G(e),eT(s.user.id,e)}c(!1)});return()=>{e.unsubscribe()}},[]),(0,r.useEffect)(()=>{"true"===new URLSearchParams(window.location.search).get("change-password")&&(A(!0),window.history.replaceState({},document.title,window.location.pathname))},[]),(0,r.useEffect)(()=>{{let e=localStorage.getItem("sam_messages");if(e)try{let s=JSON.parse(e);Array.isArray(s)&&s.length>0&&(j(s),d(!1))}catch(e){console.error("Error loading saved messages:",e)}let s=localStorage.getItem("sam_active_menu");s&&g(s),S(!0)}},[]),(0,r.useEffect)(()=>{w&&localStorage.setItem("sam_messages",JSON.stringify(y))},[y,w]),(0,r.useEffect)(()=>{w&&localStorage.setItem("sam_active_menu",u)},[u,w]),(0,r.useEffect)(()=>{var e;null==(e=L.current)||e.scrollIntoView({behavior:"smooth"})},[y,f]);let eE=[{id:"chat",label:"Chat with Sam",icon:q.A,active:!0},{id:"knowledge",label:"Knowledge Base",icon:ee.A,active:!1},{id:"contact",label:"Contact Center",icon:b.A,active:!1},{id:"campaign",label:"Campaign Hub",icon:es.A,active:!1},{id:"pipeline",label:"Lead Pipeline",icon:et.A,active:!1},{id:"analytics",label:"Analytics",icon:k.A,active:!1},{id:"profile",label:"Profile",icon:ea.A,active:!1},...V?[{id:"superadmin",label:"SuperAdmin",icon:er.A,active:!1}]:[]],eP=async e=>{if(e.preventDefault(),_.password!==_.confirmPassword)return void alert("Passwords do not match");if(_.password.length<6)return void alert("Password must be at least 6 characters long");z(e=>({...e,loading:!0}));try{let{error:e}=await t.auth.updateUser({password:_.password});e?alert("Error updating password: "+e.message):(alert("Password updated successfully!"),A(!1),z({password:"",confirmPassword:"",loading:!1}))}catch(e){alert("An unexpected error occurred")}finally{z(e=>({...e,loading:!1}))}},eD=async()=>{if(m.trim()){let e={id:Date.now(),role:"user",content:m.trim()};j(s=>[...s,e]),p(""),N(!0),o&&d(!1);try{let s=await fetch("/api/sam/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e.content,conversationHistory:y})}),t=await s.json();if(s.ok){let e={id:Date.now()+1,role:"assistant",content:t.response};j(s=>[...s,e])}else{let e={id:Date.now()+1,role:"assistant",content:"I apologize, but I'm having trouble processing your request right now. Please try again."};j(s=>[...s,e])}}catch(s){console.error("Chat API error:",s);let e={id:Date.now()+1,role:"assistant",content:"I'm experiencing technical difficulties. Please try again in a moment."};j(s=>[...s,e])}finally{N(!1)}}},eL=async()=>{if(confirm("Are you sure you want to sign out?"))try{await t.auth.signOut({scope:"global"}),localStorage.removeItem("supabase.auth.token"),localStorage.removeItem("sam_messages"),localStorage.removeItem("sam_active_menu"),sessionStorage.clear(),j([]),d(!0),g("chat"),n(null),c(!1),window.location.reload()}catch(e){console.error("Error signing out:",e),window.location.reload()}},eT=async(e,s)=>{try{console.log("\uD83D\uDD04 loadWorkspaces called with userId:",e,"isAdmin:",s,"isSuperAdmin:",V),H(!0);let n=null!=s?s:V;if(console.log("\uD83C\uDFAF shouldLoadAllWorkspaces:",n),n){var a,r,l;let s=await fetch("/api/admin/workspaces",{method:"GET",headers:{Authorization:"Bearer ".concat(null==(a=(await t.auth.getSession()).data.session)?void 0:a.access_token),"Content-Type":"application/json"}});if(s.ok){let e=await s.json();console.log("\uD83D\uDCCA Admin API returned workspaces:",(null==(r=e.workspaces)?void 0:r.length)||0),console.log("\uD83D\uDCCB Workspace names:",(null==(l=e.workspaces)?void 0:l.map(e=>e.name))||[]),F(e.workspaces||[])}else console.error("❌ Failed to fetch admin workspaces"),await eU(e)}else await eU(e)}catch(e){console.error("Failed to load workspaces:",e)}finally{H(!1)}},eU=async e=>{let{data:s,error:a}=await t.from("workspaces").select("\n        *,\n        workspace_members (\n          id,\n          user_id,\n          role,\n          joined_at,\n          users (\n            email,\n            first_name,\n            last_name\n          )\n        )\n      ").eq("owner_id",e);if(a)throw a;F(s||[])},eO=async()=>{try{var e;ew(!0);let s=await fetch("/api/admin/users",{method:"GET",headers:{Authorization:"Bearer ".concat(null==(e=(await t.auth.getSession()).data.session)?void 0:e.access_token),"Content-Type":"application/json"}});if(s.ok){let e=await s.json();ev(e.users||[]),eS(e.stats||{})}else console.error("Failed to fetch users")}catch(e){console.error("Failed to load users:",e)}finally{ew(!1)}},eF=async()=>{if(W.trim()&&l)try{var e,s,a,r;console.log("Attempting workspace creation via service role API...");let n=await fetch("/api/admin/create-workspace-minimal",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==(e=(await t.auth.getSession()).data.session)?void 0:e.access_token)},body:JSON.stringify({name:W,company:Q||"InnovareAI"})}),i=await n.json();if(n.ok&&i.success){console.log("✅ Workspace created via service role API:",i.workspace),B(""),R(!1),console.log("\uD83D\uDD04 Reloading workspaces after creation..."),await eT(l.id,V),alert("✅ Workspace created successfully!");return}console.log("Service role API failed, trying direct insertion...");let c=[{name:W,owner_id:l.id,created_by:l.id,company:Q||"InnovareAI",settings:{}},{name:W,owner_id:l.id,created_by:l.id,settings:{}},{name:W,owner_id:l.id,settings:{}},{name:W,owner_id:l.id}],o=null,d=null;for(let e=0;e<c.length;e++)try{console.log("Direct attempt ".concat(e+1,":"),c[e]);let{data:a,error:r}=await t.from("workspaces").insert(c[e]).select().single();if(r){if(d=r,null==(s=r.message)?void 0:s.includes("infinite recursion"))throw Error("❌ Database RLS policies are preventing workspace creation. This requires manual database configuration.")}else{o=a,console.log("Workspace created on direct attempt ".concat(e+1));break}}catch(e){if(d=e,(null==(a=e.message)?void 0:a.includes("infinite recursion"))||(null==(r=e.message)?void 0:r.includes("Database RLS")))throw e}if(!o)throw Error("All creation methods failed. API error: ".concat(i.error||"Unknown",". Direct error: ").concat((null==d?void 0:d.message)||"Unknown"));B(""),R(!1),await eT(l.id,V),alert("✅ Workspace created successfully!")}catch(s){console.error("Complete workspace creation failure:",s);let e=(null==s?void 0:s.message)||"Unknown error occurred";e.includes("infinite recursion")||e.includes("Database RLS")?alert("❌ ".concat(e,"\n\n\uD83D\uDD27 To fix: Execute the SQL script in FIX_RLS_POLICIES_MANUAL.sql via Supabase console.")):alert("❌ Failed to create workspace: ".concat(e))}},eM=async e=>{try{var s;let a=await fetch("/api/admin/invite-user",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==(s=(await t.auth.getSession()).data.session)?void 0:s.access_token)},body:JSON.stringify(e)}),r=await a.json();if(a.ok)alert("✅ Invitation sent successfully to ".concat(e.email,"!")),ey&&eO();else throw Error(r.error||"Failed to send invitation")}catch(e){throw console.error("Invitation failed:",e),alert("❌ Failed to send invitation: ".concat(e instanceof Error?e.message:"Unknown error")),e}},eR=async()=>{if(0===eC.size)return void alert("Please select users to delete");if(window.confirm("Are you sure you want to delete ".concat(eC.size," selected user").concat(eC.size>1?"s":"","? This action cannot be undone."))){eI(!0);try{var e;let s=await fetch("/api/admin/delete-users",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==(e=(await t.auth.getSession()).data.session)?void 0:e.access_token)},body:JSON.stringify({userIds:Array.from(eC)})}),a=await s.json();if(s.ok)alert("✅ Successfully deleted ".concat(eC.size," user").concat(eC.size>1?"s":"","!")),eA(new Set),eO();else throw Error(a.error||"Failed to delete users")}catch(e){console.error("Bulk delete failed:",e),alert("❌ Failed to delete users: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{eI(!1)}}},eq=async()=>{if(0===ed.size)return void alert("Please select workspaces to delete");if(window.confirm("Are you sure you want to delete ".concat(ed.size," selected workspace").concat(ed.size>1?"s":"","? This action cannot be undone and will remove all associated data."))){ep(!0);try{var e;let s=await fetch("/api/admin/delete-workspaces",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==(e=(await t.auth.getSession()).data.session)?void 0:e.access_token)},body:JSON.stringify({workspaceIds:Array.from(ed)})}),a=await s.json();if(s.ok)alert("✅ Successfully deleted ".concat(ed.size," workspace").concat(ed.size>1?"s":"","!")),ex(new Set),l&&await eT(l.id,V);else throw Error(a.error||"Failed to delete workspaces")}catch(e){console.error("Bulk workspace delete failed:",e),alert("❌ Failed to delete workspaces: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{ep(!1)}}};return i||!w?(0,a.jsx)("div",{className:"flex h-screen bg-gray-900 items-center justify-center",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"text-white text-lg font-medium",children:"Loading..."})})}):l?(0,a.jsxs)("div",{className:"flex h-screen bg-gray-800",children:[(0,a.jsxs)("div",{className:"w-64 bg-gray-700 flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-600",children:(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("img",{src:"/SAM.jpg",alt:"Sam AI",className:"w-10 h-10 rounded-full object-cover",style:{objectPosition:"center 30%"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-white font-bold text-base",children:"SAM AI ✨"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Sales Assistant"})]})]})})}),(0,a.jsx)("div",{className:"flex-1 py-2",children:(0,a.jsx)("nav",{className:"space-y-1 px-3",children:eE.map(e=>{let s=e.icon,t=e.id===u;return(0,a.jsxs)("button",{onClick:()=>g(e.id),className:"w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-sm font-medium transition-colors ".concat(t?"bg-purple-600 text-white":"text-gray-400 hover:bg-gray-600 hover:text-gray-300"),children:[(0,a.jsx)(s,{size:18}),(0,a.jsx)("span",{children:e.label})]},e.id)})})}),(0,a.jsxs)("div",{className:"border-t border-gray-600",children:[(0,a.jsxs)("button",{onClick:()=>{confirm("Clear all conversation history? This cannot be undone.")&&(j([]),d(!0),g("chat"),localStorage.removeItem("sam_messages"),localStorage.removeItem("sam_active_menu"))},className:"w-full flex items-center space-x-3 px-6 py-3 text-gray-400 hover:bg-gray-600 hover:text-gray-300 transition-colors",children:[(0,a.jsx)(er.A,{size:18}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Clear History"})]}),(0,a.jsx)("div",{className:"p-4",children:l?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:l.email?l.email.charAt(0).toUpperCase():"U"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-white text-sm font-medium truncate",children:l.email||"Authenticated User"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"Authenticated"})]})]}),(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsxs)("button",{onClick:eL,className:"w-full flex items-center justify-center space-x-2 px-3 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg text-gray-200 hover:text-white text-sm font-medium transition-colors",children:[(0,a.jsx)(el.A,{size:16}),(0,a.jsx)("span",{children:"Sign Out"})]})})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-sm font-medium",children:"A"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white text-sm font-medium",children:"Anonymous User"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"No Authentication"})]})]})})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col bg-gray-900",children:["knowledge"===u?(0,a.jsx)(x,{}):"contact"===u?(0,a.jsx)(v,{}):"campaign"===u?(0,a.jsx)(I,{}):"pipeline"===u?(0,a.jsx)(D,{}):"analytics"===u?(0,a.jsx)(T,{}):"profile"===u?(0,a.jsx)("div",{className:"flex-1 p-6 overflow-y-auto",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center",children:[(0,a.jsx)(ea.A,{className:"mr-3",size:36}),"User Profile"]}),(0,a.jsx)("button",{onClick:()=>g("chat"),className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg transition-colors text-white",children:"← Back to Chat"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white mb-6",children:"Profile Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),(0,a.jsx)("input",{type:"email",value:(null==l?void 0:l.email)||"",disabled:!0,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white opacity-50"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"Email cannot be changed"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"First Name"}),(0,a.jsx)("input",{type:"text",value:(null==l||null==(e=l.user_metadata)?void 0:e.first_name)||"",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",placeholder:"Enter first name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Last Name"}),(0,a.jsx)("input",{type:"text",value:(null==l||null==(s=l.user_metadata)?void 0:s.last_name)||"",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",placeholder:"Enter last name"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Account Created"}),(0,a.jsx)("input",{type:"text",value:(null==l?void 0:l.created_at)?new Date(l.created_at).toLocaleDateString():"N/A",disabled:!0,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white opacity-50"})]}),(0,a.jsx)("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Update Profile"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white mb-6",children:"App Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:"Clear Chat History"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Remove all conversation history from this device"})]}),(0,a.jsx)("button",{onClick:()=>{confirm("Clear all conversation history? This cannot be undone.")&&(j([]),d(!0),g("chat"),localStorage.removeItem("sam_messages"),localStorage.removeItem("sam_active_menu"),alert("Chat history cleared successfully"))},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Clear History"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:"Change Password"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Update your account password"})]}),(0,a.jsx)("button",{onClick:()=>A(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Change Password"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white mb-6",children:"Account Actions"}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:"Sign Out"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Sign out of your SAM AI account"})]}),(0,a.jsxs)("button",{onClick:eL,className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[(0,a.jsx)(el.A,{size:16}),(0,a.jsx)("span",{children:"Sign Out"})]})]})})]})]})}):"superadmin"===u?(0,a.jsx)("div",{className:"flex-1 p-6 overflow-y-auto",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center",children:[(0,a.jsx)(er.A,{className:"mr-3",size:36}),"SuperAdmin Panel"]}),(0,a.jsx)("button",{onClick:()=>g("chat"),className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg transition-colors text-white",children:"← Back to Chat"})]}),V&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-900 to-indigo-900 rounded-lg p-6 mb-6 border border-purple-500",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-semibold text-white flex items-center",children:[(0,a.jsx)(er.A,{className:"mr-2",size:24}),"Super Admin Panel"]}),(0,a.jsx)("p",{className:"text-purple-200 text-sm",children:"Advanced tenant and user management"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("label",{className:"text-white text-sm font-medium",children:"Company:"}),(0,a.jsxs)("select",{value:Q,onChange:e=>X(e.target.value),className:"bg-gray-700 text-white px-3 py-1 rounded border border-gray-600",children:[(0,a.jsx)("option",{value:"InnovareAI",children:"InnovareAI"}),(0,a.jsx)("option",{value:"3cubedai",children:"3CubedAI"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("button",{onClick:()=>R(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-3 rounded-lg flex items-center justify-center space-x-2 transition-colors",children:[(0,a.jsx)(Y.A,{size:18}),(0,a.jsx)("span",{children:"Create Tenant"})]}),(0,a.jsxs)("button",{onClick:async()=>{console.log("\uD83D\uDD04 Refreshing workspaces before opening invite popup..."),l&&await eT(l.id,V),eo(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg flex items-center justify-center space-x-2 transition-colors",children:[(0,a.jsx)(h.A,{size:18}),(0,a.jsx)("span",{children:"Invite User"})]}),(0,a.jsxs)("button",{onClick:()=>{ej(!0),eO()},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg flex items-center justify-center space-x-2 transition-colors",children:[(0,a.jsx)(b.A,{size:18}),(0,a.jsx)("span",{children:"Manage Users"})]})]}),(0,a.jsxs)("div",{className:"text-xs text-purple-200",children:["Company emails will be sent from: ","InnovareAI"===Q?"sp@innovareai.com":"sophia@3cubed.ai"]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white",children:V?"All Workspaces":"My Workspaces"}),V&&O.length>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",onChange:e=>{e.target.checked?ex(new Set(O.filter(e=>"innovareai"!==e.slug).map(e=>e.id))):ex(new Set)},checked:ed.size>0&&ed.size===O.filter(e=>"innovareai"!==e.slug).length,className:"rounded bg-gray-700 border-gray-600 text-purple-600 focus:ring-purple-500"}),(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:"Select All"})]})]}),(0,a.jsxs)("div",{className:"text-gray-400 text-sm",children:[O.length," workspace",1!==O.length?"s":""]})]}),J?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("div",{className:"text-gray-400",children:"Loading workspaces..."})}):0===O.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-gray-700 rounded-lg",children:[(0,a.jsx)(Y.A,{className:"mx-auto mb-4 text-gray-600",size:48}),(0,a.jsx)("p",{className:"text-gray-400",children:"No workspaces created yet"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:'Use "Create Tenant" in the Super Admin panel above'})]}):(0,a.jsx)("div",{className:"space-y-4",children:O.map(e=>{var s;return(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[V&&(0,a.jsx)("input",{type:"checkbox",checked:ed.has(e.id),onChange:s=>((e,s)=>{let t=new Set(ed);s?t.add(e):t.delete(e),ex(t)})(e.id,s.target.checked),disabled:"innovareai"===e.slug,className:"rounded bg-gray-700 border-gray-600 text-purple-600 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:e.name}),e.slug&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("innovareai"===e.slug?"bg-blue-600 text-white":"bg-green-600 text-white"),children:e.slug})]}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:["Created ",new Date(e.created_at).toLocaleDateString()]}),V&&e.owner&&(0,a.jsxs)("p",{className:"text-gray-500 text-xs mt-1",children:["Owner: ",e.owner.email||"Unknown"]}),e.workspace_members&&e.workspace_members.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("p",{className:"text-gray-400 text-xs mb-1",children:["Members (",e.workspace_members.length,"):"]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.workspace_members.slice(0,3).map((e,s)=>{var t;return(0,a.jsxs)("span",{className:"text-xs bg-gray-600 text-gray-200 px-2 py-1 rounded",children:[(null==(t=e.user)?void 0:t.email)||"User ".concat(e.user_id.slice(0,8)),(0,a.jsxs)("span",{className:"text-gray-400 ml-1",children:["(",e.role,")"]})]},s)}),e.workspace_members.length>3&&(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:["+",e.workspace_members.length-3," more"]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(V&&e.owner_id!==l.id?"bg-gray-600 text-gray-300":"bg-purple-600 text-white"),children:V&&e.owner_id!==l.id?"View":"Owner"}),(0,a.jsxs)("button",{className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm flex items-center space-x-1 transition-colors",onClick:()=>{eb(e.id),eo(!0)},children:[(0,a.jsx)(h.A,{size:14}),(0,a.jsx)("span",{children:"Invite"})]})]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,a.jsx)(b.A,{size:14,className:"inline mr-1"}),e.member_count||(null==(s=e.workspace_members)?void 0:s.length)||0," members"]})]},e.id)})}),V&&ed.size>0&&(0,a.jsxs)("div",{className:"flex justify-between items-center mt-6 pt-6 border-t border-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:eq,disabled:em,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white px-6 py-2 rounded-lg transition-colors flex items-center space-x-2",children:(0,a.jsx)("span",{children:em?"Deleting...":"Delete ".concat(ed.size," Workspace").concat(ed.size>1?"s":"")})}),(0,a.jsxs)("span",{className:"text-gray-400 text-sm",children:[ed.size," workspace",ed.size>1?"s":""," selected"]})]}),(0,a.jsx)("div",{className:"text-gray-500 text-xs",children:"Note: InnovareAI workspace is protected and cannot be deleted"})]})]})]})}):o?(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-start pt-24 p-6",children:[(0,a.jsx)("div",{className:"mb-12",children:(0,a.jsx)("img",{src:"/SAM.jpg",alt:"Sam AI",className:"w-48 h-48 rounded-full object-cover shadow-lg",style:{objectPosition:"center 30%"}})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("h2",{className:"text-white text-2xl font-medium",children:"What do you want to get done today?"})})]}):(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[y.map(e=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-[70%] ".concat("user"===e.role?"order-2":"order-1"),children:["assistant"===e.role&&(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("img",{src:"/SAM.jpg",alt:"Sam AI",className:"w-8 h-8 rounded-full object-cover flex-shrink-0 mt-1",style:{objectPosition:"center 30%"}}),(0,a.jsx)("div",{className:"bg-gray-700 text-white px-4 py-3 rounded-2xl",children:(0,a.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:e.content})})]}),"user"===e.role&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex items-center justify-end space-x-2 mb-1",children:(0,a.jsx)("span",{className:"text-gray-400 text-sm font-medium",children:"You"})}),(0,a.jsx)("div",{className:"bg-gray-800 text-white px-4 py-3 rounded-2xl",children:(0,a.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:e.content})})]})]})},e.id)),f&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"max-w-[70%]",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("img",{src:"/SAM.jpg",alt:"Sam AI",className:"w-8 h-8 rounded-full object-cover flex-shrink-0 mt-1",style:{objectPosition:"center 30%"}}),(0,a.jsx)("div",{className:"bg-gray-700 text-white px-4 py-3 rounded-2xl",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-purple-600 rounded-full animate-pulse",style:{animationDelay:"0.4s"}}),(0,a.jsx)("span",{className:"text-sm text-gray-300 ml-2",children:"Sam is thinking..."})]})})]})})}),(0,a.jsx)("div",{ref:L})]}),"chat"===u&&(0,a.jsxs)("div",{className:"flex-shrink-0 p-6",children:[(0,a.jsxs)("div",{className:"bg-black text-white px-4 py-3 rounded-t-lg max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-sm",children:f?"Processing...":"Ready"}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(f?"bg-purple-400 animate-pulse":"bg-green-400")}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(f?"bg-purple-500 animate-pulse":"bg-green-500"),style:{animationDelay:"0.2s"}}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(f?"bg-purple-600 animate-pulse":"bg-green-600"),style:{animationDelay:"0.4s"}})]})]}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:f?"Sam is thinking...":"Ready to chat with Sam AI"})]}),(0,a.jsx)("div",{className:"bg-gray-700 p-4 rounded-b-lg max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"flex items-end bg-gray-600 rounded-lg px-4 py-2",children:[(0,a.jsx)("button",{onClick:()=>P(!0),className:"text-gray-400 hover:text-gray-200 transition-colors p-1 mr-2",title:"Conversation History",children:(0,a.jsx)(U.A,{size:18})}),(0,a.jsx)("button",{className:"text-gray-400 hover:text-gray-200 transition-colors p-1 mr-2",children:(0,a.jsx)(en.A,{size:18})}),(0,a.jsx)("textarea",{value:m,onChange:e=>p(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),eD())},placeholder:"What do you want to get done?",className:"flex-1 bg-transparent text-white placeholder-gray-400 text-base pl-3 pr-3 py-2 outline-none resize-vertical min-h-[96px] max-h-48",style:{textAlign:"left"},rows:4}),(0,a.jsxs)("button",{onClick:eD,disabled:f||!m.trim(),className:"text-gray-400 hover:text-gray-200 disabled:text-gray-600 disabled:cursor-not-allowed transition-colors ml-2 px-3 py-1 flex items-center space-x-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:f?"Sending...":"Send"}),(0,a.jsx)(ei.A,{size:16})]})]})})]})]}),(0,a.jsx)(K,{isOpen:E,onClose:()=>P(!1),currentMessages:y,onLoadConversation:e=>{j(e),d(!1)}}),ec&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Invite User to Workspace"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),(0,a.jsx)("input",{type:"email",value:eu,onChange:e=>eh(e.target.value),placeholder:"user@example.com",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Workspace"}),(0,a.jsxs)("select",{value:eg||"",onChange:e=>eb(e.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[(0,a.jsx)("option",{value:"",children:"Select a workspace..."}),O.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Company"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"InnovareAI",checked:"InnovareAI"===Q,onChange:e=>X(e.target.value),className:"mr-2"}),(0,a.jsx)("span",{className:"text-white",children:"InnovareAI"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"3cubedai",checked:"3cubedai"===Q,onChange:e=>X(e.target.value),className:"mr-2"}),(0,a.jsx)("span",{className:"text-white",children:"3CubedAI"})]})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Invitation will be sent from: ","InnovareAI"===Q?"sp@innovareai.com":"sophia@3cubed.ai"]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:async()=>{if(!eu.trim()||!eg)return void alert("Please fill in all fields");try{var e;let s=await fetch("/api/admin/invite-user",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==(e=(await t.auth.getSession()).data.session)?void 0:e.access_token)},body:JSON.stringify({email:eu,firstName:eu.split("@")[0],lastName:"User",workspaceId:eg,company:Q,role:"member"})}),a=await s.json();s.ok?(alert("Invitation sent successfully to ".concat(eu," from ").concat(Q,"!")),eo(!1),eh(""),eb(null)):alert("Failed to send invitation: ".concat(a.error))}catch(e){console.error("Error sending invitation:",e),alert("Failed to send invitation")}},disabled:!eu.trim()||!eg,className:"flex-1 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white py-2 rounded-lg transition-colors",children:"Send Invitation"}),(0,a.jsx)("button",{onClick:()=>{eo(!1),eh(""),eb(null)},className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),M&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Create New Workspace"}),(0,a.jsx)("input",{type:"text",value:W,onChange:e=>B(e.target.value),placeholder:"Workspace name",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white mb-4",onKeyPress:e=>{"Enter"===e.key&&eF()}}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:eF,disabled:!W.trim(),className:"flex-1 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white py-2 rounded-lg transition-colors",children:"Create"}),(0,a.jsx)("button",{onClick:()=>{R(!1),B("")},className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),C&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 max-w-md w-full mx-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Change Password"}),(0,a.jsx)("p",{className:"text-gray-400 mb-6",children:"Enter your new password below"}),(0,a.jsxs)("form",{onSubmit:eP,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"New Password"}),(0,a.jsx)("input",{type:"password",value:_.password,onChange:e=>z(s=>({...s,password:e.target.value})),required:!0,minLength:6,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter new password (min 6 characters)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm New Password"}),(0,a.jsx)("input",{type:"password",value:_.confirmPassword,onChange:e=>z(s=>({...s,confirmPassword:e.target.value})),required:!0,minLength:6,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Confirm new password"})]}),(0,a.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,a.jsx)("button",{type:"submit",disabled:_.loading,className:"flex-1 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white font-medium py-3 px-4 rounded-lg transition-colors",children:_.loading?"Updating...":"Update Password"}),(0,a.jsx)("button",{type:"button",onClick:()=>{A(!1),z({password:"",confirmPassword:"",loading:!1})},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-medium py-3 px-4 rounded-lg transition-colors",children:"Cancel"})]})]})]})}),ey&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold text-white",children:"Manage Users"}),(0,a.jsx)("button",{onClick:()=>ej(!1),className:"text-gray-400 hover:text-gray-200",children:"✕"})]}),ek&&(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:ek.total_users}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Total Users"})]}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-400",children:ek.active_users}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Active Users"})]}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:ek.pending_invitations}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Pending Invites"})]}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:ek.super_admins}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Super Admins"})]})]}),eN?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("div",{className:"text-gray-400",children:"Loading users..."})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 text-gray-300 w-12",children:(0,a.jsx)("input",{type:"checkbox",onChange:e=>{e.target.checked?eA(new Set(ef.filter(e=>!e.is_super_admin).map(e=>e.id))):eA(new Set)},checked:eC.size>0&&eC.size===ef.filter(e=>!e.is_super_admin).length,className:"rounded bg-gray-700 border-gray-600 text-purple-600 focus:ring-purple-500"})}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-gray-300",children:"Email"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-gray-300",children:"Status"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-gray-300",children:"Workspaces"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-gray-300",children:"Last Sign In"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-gray-300",children:"Created"})]})}),(0,a.jsx)("tbody",{children:ef.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-700 hover:bg-gray-700/30",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("input",{type:"checkbox",checked:eC.has(e.id),onChange:s=>((e,s)=>{let t=new Set(eC);s?t.add(e):t.delete(e),eA(t)})(e.id,s.target.checked),disabled:e.is_super_admin,className:"rounded bg-gray-700 border-gray-600 text-purple-600 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed"})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white font-medium",children:e.email}),e.is_super_admin&&(0,a.jsx)("span",{className:"bg-purple-600 text-white text-xs px-2 py-1 rounded mt-1 inline-block",children:"Super Admin"})]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(e.email_confirmed_at?"bg-green-600 text-white":"bg-yellow-600 text-white"),children:e.email_confirmed_at?"Confirmed":"Pending"})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"text-gray-300",children:[e.memberships.length>0?(0,a.jsx)("div",{className:"space-y-1",children:e.memberships.map((e,s)=>{var t,r,l;return(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsx)("span",{className:"text-white",children:(null==(t=e.workspaces)?void 0:t.name)||"Unknown"}),(0,a.jsx)("span",{className:"ml-2 px-1 py-0.5 rounded text-xs ".concat((null==(r=e.workspaces)?void 0:r.slug)==="innovareai"?"bg-blue-500 text-white":"bg-green-500 text-white"),children:(null==(l=e.workspaces)?void 0:l.slug)||"Unknown"}),(0,a.jsxs)("span",{className:"ml-2 text-gray-400",children:["(",e.role,")"]})]},s)})}):(0,a.jsx)("span",{className:"text-gray-500",children:"No workspaces"}),e.pending_invitations.length>0&&(0,a.jsxs)("div",{className:"text-yellow-400 text-xs mt-1",children:[e.pending_invitations.length," pending invite(s)"]})]})}),(0,a.jsx)("td",{className:"py-3 px-4 text-gray-300 text-sm",children:e.last_sign_in_at?new Date(e.last_sign_in_at).toLocaleDateString():"Never"}),(0,a.jsx)("td",{className:"py-3 px-4 text-gray-300 text-sm",children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[eC.size>0&&(0,a.jsx)("button",{onClick:eR,disabled:e_,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white px-6 py-2 rounded-lg transition-colors flex items-center space-x-2",children:(0,a.jsx)("span",{children:e_?"Deleting...":"Delete ".concat(eC.size," User").concat(eC.size>1?"s":"")})}),eC.size>0&&(0,a.jsxs)("span",{className:"text-gray-400 text-sm",children:[eC.size," user",eC.size>1?"s":""," selected"]})]}),(0,a.jsx)("button",{onClick:()=>ej(!1),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Close"})]})]})}),(0,a.jsx)(Z,{isOpen:ec,onClose:()=>eo(!1),onSubmit:eM,workspaces:O})]}):(0,a.jsx)("div",{className:"flex h-screen bg-gray-900 items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto px-6",children:[(0,a.jsx)("img",{src:"/SAM.jpg",alt:"Sam AI",className:"w-20 h-20 rounded-full object-cover mx-auto mb-6",style:{objectPosition:"center 30%"}}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-4",children:"Welcome to SAM AI"}),(0,a.jsx)("p",{className:"text-gray-400 mb-8",children:"Your AI-powered Sales Assistant Platform"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("a",{href:"/api/auth/signin",className:"block w-full bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:"Sign In"}),(0,a.jsx)("a",{href:"/api/auth/signup",className:"block w-full bg-gray-700 hover:bg-gray-600 text-gray-300 font-medium py-3 px-6 rounded-lg transition-colors",children:"Create Account"})]})]})})}},5367:(e,s,t)=>{Promise.resolve().then(t.bind(t,2262))}},e=>{e.O(0,[5040,8760,7666,8441,1255,7358],()=>e(e.s=5367)),_N_E=e.O()}]);