(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[956],{63:(e,t,s)=>{"use strict";var n=s(7260);s.o(n,"useParams")&&s.d(t,{useParams:function(){return n.useParams}}),s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSelectedLayoutSegments")&&s.d(t,{useSelectedLayoutSegments:function(){return n.useSelectedLayoutSegments}})},3051:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var n=s(5155),r=s(2115),a=s(63),i=s(7471),o=s(2454),l=s(4652),c=s.n(l);function u(e){let{params:t}=e,[s,l]=(0,r.useState)("");(0,r.useEffect)(()=>{t.then(e=>l(e.token))},[t]);let u=(0,a.useRouter)(),{isSignedIn:d,userId:m}=(0,i.d)(),{user:h}=(0,o.Jd)(),[x,p]=(0,r.useState)(!0),[f,g]=(0,r.useState)(null),[j,v]=(0,r.useState)(""),[b,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s&&(d&&m?N():w())},[d,m,s]);let w=async()=>{try{p(!1)}catch(e){v("Failed to load invitation details"),p(!1)}},N=async()=>{y(!0);try{let e=await fetch("/api/workspaces/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invite_token:s})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to join workspace");if(t.success)u.push("/");else throw Error(t.error||"Failed to join workspace")}catch(e){console.error("Error joining workspace:",e),v(e instanceof Error?e.message:"Failed to join workspace")}finally{y(!1)}};return x?(0,n.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,n.jsx)("div",{className:"text-white text-xl",children:"Loading invitation..."})}):j?(0,n.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-red-400 text-xl mb-4",children:"⚠️ Invitation Error"}),(0,n.jsx)("div",{className:"text-gray-300 mb-8",children:j}),(0,n.jsx)("button",{onClick:()=>u.push("/"),className:"bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-6 rounded-lg",children:"Go to SAM AI"})]})}):d?(0,n.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(c(),{src:"/SAM.jpg",alt:"SAM AI",width:100,height:100,className:"rounded-full mx-auto mb-6 object-cover",style:{objectPosition:"center 30%"}}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:b?"Joining Workspace...":"Welcome!"}),(0,n.jsx)("p",{className:"text-gray-400 mb-8",children:b?"Please wait while we add you to the workspace.":"Hi ".concat((null==h?void 0:h.firstName)||(null==h?void 0:h.username),", you're being added to the workspace.")}),b&&(0,n.jsxs)("div",{className:"flex justify-center space-x-1",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),(0,n.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,n.jsx)("div",{className:"w-2 h-2 bg-purple-600 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]})}):(0,n.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,n.jsx)("div",{className:"max-w-md w-full mx-4",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(c(),{src:"/SAM.jpg",alt:"SAM AI",width:100,height:100,className:"rounded-full mx-auto mb-6 object-cover",style:{objectPosition:"center 30%"}}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"You're Invited!"}),(0,n.jsx)("p",{className:"text-gray-400 mb-8",children:"You've been invited to join a SAM AI workspace. Sign in to accept the invitation and start collaborating."}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("button",{onClick:()=>{u.push("/sign-in?redirect_url=".concat(encodeURIComponent("/invite/".concat(s))))},className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:"Sign In to Accept Invitation"}),(0,n.jsxs)("div",{className:"text-center text-sm text-gray-400",children:["Don't have an account?"," ",(0,n.jsx)("button",{onClick:()=>u.push("/sign-up?redirect_url=".concat(encodeURIComponent("/invite/".concat(s)))),className:"text-purple-400 hover:text-purple-300",children:"Sign up here"})]})]})]})})})}},4652:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return l},getImageProps:function(){return o}});let n=s(8140),r=s(5040),a=s(1356),i=n._(s(1124));function o(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let l=a.Image},5187:(e,t,s)=>{Promise.resolve().then(s.bind(s,3051))}},e=>{e.O(0,[471,356,441,255,358],()=>e(e.s=5187)),_N_E=e.O()}]);